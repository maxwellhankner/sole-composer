(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{146:function(e,t,a){},147:function(e,t,a){},149:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},302:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(131),c=a.n(s),i=(a(146),a(21)),o=a(19),l=(a(147),a(13)),u=a(1),d=Object(n.createContext)(null),v=function(e){var t=e.children,a=Object(n.useState)(),r=Object(l.a)(a,2),s=r[0],c=r[1];return Object(n.useEffect)((function(){fetch("/auth/getsession",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.err||c(e)}))}),[]),Object(u.jsx)(d.Provider,{value:s,children:t})};v.context=d;var b=v,j=(a(149),a(132)),h=a.n(j);a(183),a(184),a(185);var g=function(){var e=Object(o.f)();return Object(u.jsx)("div",{className:"splash-design-button standard-button",onClick:function(){e.push("/designer")},children:Object(u.jsx)("button",{children:"S T A R T \xa0 D E S I G N I N G"})})};var p=function(){return Object(u.jsxs)("div",{className:"landing-splash-container",children:[Object(u.jsxs)("div",{className:"splash-left",children:[Object(u.jsx)("p",{className:"splash-header",children:"Create Something New"}),Object(u.jsx)("p",{className:"splash-para",children:"Sole Composer gives you the ability to design and visualize one\u2011of\u2011a\u2011kind sneakers."}),Object(u.jsx)(g,{})]}),Object(u.jsx)("div",{className:"splash-right",children:Object(u.jsx)("img",{src:"/sole-cover.png",className:"splash-image"})})]})};a(190);var f=function(){var e=Object(o.f)();return Object(u.jsx)("div",{className:"new-design-button standard-button",onClick:function(){e.push("/designer")},children:Object(u.jsx)("button",{children:"N E W \xa0 D E S I G N"})})};a(191);var O=function(e){var t=e.props,a=t._id,n=t.title,r=t.configId,s=t.author,c=t.screenshot,i=Object(o.f)();return Object(u.jsxs)("div",{className:"featureddesigncard-container",onClick:function(){i.push("/designer/".concat(a))},children:[Object(u.jsx)("div",{className:"featureddesigncard-image",children:Object(u.jsx)("img",{src:"api/assets/images/".concat(c),alt:"feature-design"})}),Object(u.jsx)("p",{className:"featureddesigncard-title",children:n}),Object(u.jsx)("p",{className:"featureddesigncard-model",children:r.modelName}),Object(u.jsx)("p",{className:"featureddesigncard-author",children:s.firstName})]})};a(192);var x=function(e){var t=e.myDesigns;return Object(u.jsxs)("div",{className:"mydesigntiles-container",children:[Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"landing-section-label",children:"MY DESIGNS"})}),Object(u.jsx)("div",{className:"my-designs-grid",children:t.map((function(e,t){return Object(u.jsx)(i.b,{to:"/designer/".concat(e._id),className:"link-to-designer",children:Object(u.jsx)("div",{className:"my-design-tile",children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.screenshot),alt:"my-design-preview"})})},t)}))})]})},y=function(e,t){return fetch(e,{method:t})},m=function(e,t,a){return fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})};var C=function(){var e=Object(n.useContext)(b.context),t=Object(n.useState)(),a=Object(l.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(),o=Object(l.a)(c,2),d=o[0],v=o[1];Object(n.useEffect)((function(){y("/api/featured","GET").then((function(e){return e.json()})).then((function(e){return s(e)})),e&&y("/api/outlines/mydesigns","GET").then((function(e){return e.json()})).then((function(e){return v(e)}))}),[e]);var j=r?r.featured.map((function(t,a){return Object(u.jsx)(O,{props:t,userData:e},a)})):null;return Object(u.jsxs)("div",{className:"landing-container",children:[Object(u.jsxs)("div",{className:"landing-header",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:"Sole"})," Composer"]}),e?Object(u.jsx)(i.b,{to:"/profile",children:e.firstName}):Object(u.jsx)(i.b,{to:"/login",children:"Login"})]}),!e&&Object(u.jsx)(p,{}),Object(u.jsxs)("div",{className:"landing-content",children:[Object(u.jsxs)("div",{className:"featured-designs-container",children:[Object(u.jsx)("p",{className:"landing-section-label",children:"FEATURED"}),r?Object(u.jsx)(h.a,{responsive:{0:{items:1.7},700:{items:3}},items:j}):null]}),e&&Object(u.jsx)(f,{}),!e&&Object(u.jsxs)(i.b,{to:"/login",children:[Object(u.jsx)("div",{className:"landing-button",children:Object(u.jsx)("button",{children:"Sign Up"})}),Object(u.jsx)("div",{className:"landing-bottom-spacing"})]}),d&&Object(u.jsx)(x,{myDesigns:d})]})]})},N=a(14),w=a.n(N),k=a(17),D=(a(194),a(195),a(25)),S=a(353),V=a(354),L=a(3);a(196);var I=function(){return Object(u.jsx)("div",{id:"loading-screen",children:Object(u.jsx)("div",{id:"loader"})})};a(197);function P(e){var t,a,r=e.design,s=e.texture,c=e.right,i=e.setCurrentPart,o=e.setCurrentShoe,l=e.alone,d=e.setLayersView,v=e.setCurrentLayer,b=e.setView,j=e.redMapCanvas,h=Object(n.useRef)(),g=Object(S.a)("/api/assets/models/".concat(r.configData.source.model)).nodes,p=Object(D.c)(L.TextureLoader,"/api/assets/designimages/".concat(r.configData.source[c?"aoMapRight":"aoMapLeft"]));p.flipY=!1;var f=function(e){if(e.delta<10){var t=Math.floor(1e3*e.uv.x),a=Math.floor(1e3*e.uv.y),n=function(e){switch(e){case 255:return 4;case 220:return 2;case 210:return 0;case 200:return 5;case 190:return 3;case 180:return 1;case 170:return 16;case 160:return 15;case 150:return 14;case 140:return 9;case 130:return 13;case 120:return 11;case 110:return 12;case 100:return 8;case 90:return 10;case 80:return 7;case 70:return 6;case 60:return 17}}(j.getContext("2d").getImageData(t,a,1,1).data[0]);(n||0===n)&&(d("LayerOverview"),v(-1),b("Layers"),i(n),o(c?"right":"left"))}};return Object(u.jsx)("group",{ref:h,dispose:null,onPointerDown:function(e){return function(e){e.stopPropagation(),t=e.clientX,a=e.clientY}(e)},onPointerUp:function(e){return function(e){e.stopPropagation(),e.clientX>t-5&&e.clientX<t+5&&e.clientY>a-5&&e.clientY<a+5&&f(e)}(e)},children:Object(u.jsx)("mesh",{geometry:g.af1.geometry,rotation:[Math.PI/2,0,Math.PI/2],position:[0,-1,l?0:c?1.3:-1.3],scale:[c?.35:-.35,.35,.35],children:Object(u.jsx)("meshStandardMaterial",{aoMap:p,map:s})})})}var T=function(e){var t=e.design,a=e.rightTexture,r=e.leftTexture,s=e.texturesLoaded,c=e.setCurrentPart,i=e.setCurrentShoe,o=e.shoeVisibility,l=e.setLayersView,d=e.setCurrentLayer,v=e.setView,b=e.redMapCanvas,j=e.cameraReset,h=e.setCameraReset;function g(e){e.reset&&(Object(D.d)().camera.position.set(5.5,1.5,5.5),h(!1));return null}return Object(u.jsxs)("div",{className:"scene-container",id:"scene-container-id",children:[Object(u.jsxs)(D.a,{camera:{fov:45},linear:!0,dpr:3,gl:{preserveDrawingBuffer:!0},children:[Object(u.jsx)(g,{reset:j}),Object(u.jsx)("ambientLight",{}),Object(u.jsxs)(n.Suspense,{fallback:null,children:[o.right&&Object(u.jsx)(P,{right:!0,design:t,texture:a,setCurrentPart:c,setCurrentShoe:i,alone:!o.left,setLayersView:l,setCurrentLayer:d,setView:v,redMapCanvas:b}),o.left&&Object(u.jsx)(P,{design:t,texture:r,setCurrentPart:c,setCurrentShoe:i,alone:!o.right,setLayersView:l,setCurrentLayer:d,setView:v,redMapCanvas:b})]}),Object(u.jsx)(V.a,{minPolarAngle:Math.PI/4,maxPolarAngle:3*Math.PI/4,minDistance:4,maxDistance:12,enablePan:!1,enableDamping:!0})]}),!s&&Object(u.jsx)(I,{})]})},R=(a(199),a(200),function(e,t){var a=new FormData;return t?a.append("image",e,"newImage"):a.append("image",e),fetch("/api/assets/uploadimage",{method:"POST",body:a}).then((function(e){return e.json()}))}),M=function(e){return new Promise((function(t){setTimeout((function(){var a=document.getElementById("scene-container-id").firstElementChild.firstElementChild,n=document.createElement("canvas");n.width=1024,n.height=1024,n.getContext("2d").drawImage(a,0,0,1024,1024);for(var r=n.toDataURL("image/png"),s=atob(r.split(",")[1]),c=[],i=0;i<s.length;i++)c.push(s.charCodeAt(i));var o=new Blob([new Uint8Array(c)],{type:"image/png"});o.name="theBlob",o.lastModifiedDate=new Date;var l=new File([o],e,{type:"image/png"});t(l)}),500)}))},E=function(e){var t=e.split("/");return t=t[t.length-1]},B=a(16),A=a(11);a(201);var U=function(e){var t=e.currentShoe,a=e.setCurrentShoe,n=e.visibility,r=e.setVisibility,s=function(e){if("right"===e&&e!==t)if(n.right)a(e);else{var s=Object(A.a)({},n);s.right=!0,s.left=!1,r(s),a(e)}else if("left"===e&&e!==t)if(n.left)a(e);else{var c=Object(A.a)({},n);c.right=!1,c.left=!0,r(c),a(e)}},c=function(e){if(1===e){if("left"===t){n.right;var s=Object(A.a)({},n);s.right=!s.right,r(s)}else if("right"===t)if(n.left){var c=Object(A.a)({},n);c.right=!1,r(c),a("left")}else{var i=Object(A.a)({},n);i.right=!i.right,i.left=!i.left,r(i),a("left")}}else if(2===e)if("right"===t){n.left;var o=Object(A.a)({},n);o.left=!o.left,r(o)}else if("left"===t)if(n.right){var l=Object(A.a)({},n);l.left=!1,r(l),a("right")}else{var u=Object(A.a)({},n);u.right=!u.right,u.left=!u.left,r(u),a("right")}};return Object(u.jsxs)("div",{className:"design-preview-toggle-container",children:[Object(u.jsxs)("div",{className:"design-preview-toggle-left",children:[Object(u.jsx)("div",{className:"design-preview-toggle-shoe ".concat("right"===t?null:"disabled-shoe"),onClick:function(){s("right")},children:Object(u.jsx)("p",{children:"Right"})}),Object(u.jsx)("div",{className:"design-preview-toggle-shoe ".concat("left"===t?null:"disabled-shoe"),onClick:function(){s("left")},children:Object(u.jsx)("p",{children:"Left"})})]}),Object(u.jsxs)("div",{className:"design-preview-toggle-right",children:[Object(u.jsx)("div",{className:"design-preview-toggle-visible ".concat(n.right?null:"disabled-visibility"),onClick:function(){c(1)},children:Object(u.jsx)(B.l,{})}),Object(u.jsx)("div",{className:"design-preview-toggle-visible ".concat(n.left?null:"disabled-visibility"),onClick:function(){c(2)},children:Object(u.jsx)(B.l,{})})]})]})};var G=function(e){var t,a=e.handleViewChange,r=e.design,s=e.canSave,c=e.setCanSave,o=e.userData,d=e.currentShoe,v=e.setCurrentShoe,b=e.shoeVisibility,j=e.setShoeVisibility,h=e.setCameraReset,g=Object(n.useState)(!1),p=Object(l.a)(g,2),f=p[0],O=p[1];"object"===typeof o&&"_id"in o&&(t=o._id);var x=function(){var e=Object(k.a)(w.a.mark((function e(){var t,a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=26;break}if(c(!1),r.author){e.next=11;break}return O(!0),h(!0),e.next=7,M("newImage");case 7:t=e.sent,R(t,!0).then((function(e){var t=E(e.image),a={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};m("/api/outlines","POST",a).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))})),e.next=26;break;case 11:if(r.author!==o._id){e.next=20;break}return O(!0),h(!0),e.next=16,M(r.screenshot);case 16:a=e.sent,R(a,!1).then((function(e){var t=E(e.image),a={author:r.author,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};m("/api/outlines/".concat(r._id),"PUT",a),O(!1)})),e.next=26;break;case 20:return O(!0),h(!0),e.next=24,M(r.screenshot);case 24:n=e.sent,R(n,!0).then((function(e){var t=E(e.image),a={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};m("/api/outlines/","POST",a).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))}));case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f?Object(u.jsx)("div",{className:"design-preview-container",children:Object(u.jsx)("div",{id:"loading-small",children:Object(u.jsx)("div",{id:"loader"})})}):Object(u.jsxs)("div",{className:"design-preview-container",children:[Object(u.jsx)("div",{className:"design-preview-info",children:Object(u.jsxs)("div",{className:"design-title-container",children:[Object(u.jsx)("p",{className:"design-title",children:r.title}),Object(u.jsx)("button",{className:"edit-design-title-button",onClick:function(){return a("ChangeDesignName")},children:Object(u.jsx)(B.n,{})})]})}),Object(u.jsxs)("div",{className:"design-preview-buttons",children:[Object(u.jsx)(U,{currentShoe:d,setCurrentShoe:v,visibility:b,setVisibility:j}),Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){return a("ChangeBaseColor")},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",style:{color:r.outlineData.baseColors[d]},children:Object(u.jsx)(B.q,{})}),Object(u.jsx)("button",{children:"Base Color"})]}),Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){return a("Layers")},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(B.m,{})}),Object(u.jsx)("button",{children:"Layers"})]}),Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){return h(!0)},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(B.f,{})}),Object(u.jsx)("button",{children:"Reset Camera"})]}),s&&o?Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){x()},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(B.p,{})}),Object(u.jsx)("button",{children:"Save"})]}):Object(u.jsxs)("div",{className:"design-preview-button save-deactivated",children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(B.p,{})}),Object(u.jsx)("button",{children:"Save"})]}),o&&r.author===t?Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){o&&o._id===r.author&&(fetch("/api/outlines/".concat(r._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}),window.location.href="/")},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(B.s,{})}),Object(u.jsx)("button",{children:"Delete"})]}):Object(u.jsxs)("div",{className:"design-preview-button save-deactivated",children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(B.s,{})}),Object(u.jsx)("button",{children:"Delete"})]}),Object(u.jsx)(i.b,{to:"/",children:Object(u.jsxs)("div",{className:"design-preview-button",children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(B.r,{})}),Object(u.jsx)("button",{children:"Exit"})]})})]})]})};a(202);var z=function(e){var t=e.props,a=t.design,n=t.currentPartName,r=t.handleAddLayer,s=t.setLayersView;return Object(u.jsxs)("div",{className:"design-preview-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:"Select Layer Type"})}),a.configData.layerTypes[n].types.map((function(e,t){return Object(u.jsx)("div",{className:"standard-button",children:"Mask"===e?Object(u.jsx)("button",{onClick:function(){s("MaskTypes")},children:e}):"Graphic"===e?Object(u.jsx)("button",{onClick:function(){s("GraphicPicker")},children:e}):Object(u.jsx)("button",{onClick:function(){r(e),s("LayerOverview")},children:e})},t)})),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return s("LayerOverview")},children:"Cancel"})})]})},_=(a(203),function(e){var t=e.split(/(?=[A-Z])/).join(" ");return t.charAt(0).toUpperCase()+t.substr(1)});a(204);var F=function(e){var t=e.colorsArray,a=e.handleColorChange;return Object(u.jsx)("div",{className:"current-colors-container",children:Object(u.jsx)("div",{className:"current-colors-scroll",children:t.map((function(e,t){return Object(u.jsx)("button",{style:{backgroundColor:e},onClick:function(){return a(e)}},t)}))})})},W=(a(205),a(141)),Y=(a(302),function(){return Object(u.jsx)("div",{className:"custom-pointer"})}),H=a(73),J=Object(W.a)((function(e){var t=e.hex,a=e.hsl,n=e.hsv,r=e.onChange,s={hue:{height:18,position:"relative",marginBottom:9,overflow:"hidden"},saturation:{width:"100%",height:120,position:"relative",marginBottom:9,overflow:"hidden"},input:{width:"47%",height:"30px",border:"none",borderRadius:"none",fontSize:".7rem",WebkitAppearance:"none",WebkitBorderRadius:0,boxShadow:"none",display:"block",paddingLeft:"3%",paddingRight:"0px"},swatch:{width:"100%",height:"100%",background:t},inputContainer:{background:t}};return Object(u.jsxs)("div",{className:"custom-color",children:[Object(u.jsx)("div",{style:s.hue,children:Object(u.jsx)(H.Hue,{hsl:a,onChange:r,pointer:Y})}),Object(u.jsx)("div",{style:s.saturation,children:Object(u.jsx)(H.Saturation,{hsl:a,hsv:n,onChange:r,pointer:Y})}),Object(u.jsx)("div",{className:"color-input",style:s.inputContainer,children:Object(u.jsx)(H.EditableInput,{style:{input:s.input},className:"custom-color-input",value:t,onChange:r})})]})}));var X=function(e){var t=e.props,a=t.currentLayer,r=t.currentPartName,s=t.design,c=t.handleChangeManager,i=t.setLayersView,o=t.setCanSave,d=t.currentShoe,v=Object(n.useState)("#ffffaa"),b=Object(l.a)(v,2),j=b[0],h=b[1],g=Object(n.useState)([]),p=Object(l.a)(g,2),f=p[0],O=p[1];Object(n.useEffect)((function(){O(function(){var e=[];for(var t in s.outlineData.parts){for(var a in s.outlineData.parts[t].right){var n=s.outlineData.parts[t].right[a].type;if("color"===n||"mask"===n){var r=s.outlineData.parts[t].right[a].color;e.includes(r)||e.push(r)}}for(var c in s.outlineData.parts[t].left){var i=s.outlineData.parts[t].left[c].type;if("color"===i||"mask"===i){var o=s.outlineData.parts[t].left[c].color;e.includes(o)||e.push(o)}}}for(var l in s.outlineData.overlays){for(var u in s.outlineData.overlays[l].right)if("color"===s.outlineData.overlays[l].right[u].type){var d=s.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var v in s.outlineData.overlays[l].left)if("color"===s.outlineData.overlays[l].left[v].type){var b=s.outlineData.overlays[l].left[v].color;e.includes(b)||e.push(b)}}var j=s.outlineData.baseColors.right;e.includes(j)||e.push(j);var h=s.outlineData.baseColors.left;return e.includes(h)||e.push(h),e}()),h("outerOverlay"===r||"innerOverlay"===r?s.outlineData.overlays[r][d][a].color:s.outlineData.parts[r][d][a].color)}),[s,r,a,O,d]);var x=function(e){o(!0);var t=e.hex||e;h(e),c({type:"color-changed",partName:r,layerIndex:a,newColor:t})};return Object(u.jsxs)("div",{className:"color-picker-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:_(r)})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return x("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random Color"})}),Object(u.jsx)("div",{children:Object(u.jsx)(F,{colorsArray:f,handleColorChange:x})}),Object(u.jsx)("div",{children:Object(u.jsx)(J,{color:j,onChangeComplete:x})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return i("LayerOverview")},children:"Back"})})]})};a(337);var q=function(e){var t=e.props,a=t.currentLayer,r=t.currentPartName,s=t.graphicVisualCanvas,c=t.handleChangeManager,i=t.handleUpdateGraphicVisualCanvas,o=t.setLayersView,l=t.setCanSave,d=t.currentShoe,v=function(e,t){l(!0),c({type:"graphic-moved",partName:r,layerIndex:a,direction:e,distance:t})};return Object(n.useEffect)((function(){!function(){var e=document.getElementById("graphic-visual-container");e.innerHTML="",e.appendChild(s)}(),i(r)}),[]),Object(u.jsxs)("div",{className:"graphic-editor-container",children:[Object(u.jsxs)("div",{className:"graphic-editor-upper",children:[Object(u.jsxs)("div",{className:"graphic-editor-buttons",id:"edit-buttons-div",children:[Object(u.jsx)("button",{className:"graphic-edit-button",id:"up-button",onClick:function(){return v("vert",-30)},children:Object(u.jsx)(B.d,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"down-button",onClick:function(){return v("vert",30)},children:Object(u.jsx)(B.a,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"left-button",onClick:function(){return v("hor",-30)},children:Object(u.jsx)(B.b,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"right-button",onClick:function(){return v("hor",30)},children:Object(u.jsx)(B.c,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"scale-up-button",onClick:function(){return v("scale",1.1)},children:Object(u.jsx)(B.e,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"scale-down-button",onClick:function(){return v("scale",.9)},children:Object(u.jsx)(B.k,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"clockwise-button",onClick:function(){return v("rotate",5)},children:Object(u.jsx)(B.o,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"counterclockwise-button",onClick:function(){return v("rotate",-5)},children:Object(u.jsx)(B.t,{})})]}),Object(u.jsx)("div",{id:"graphic-visual-container",className:"left"===d?"mirror-graphic-visual":null})]}),Object(u.jsxs)("div",{className:"graphic-editor-lower",children:[Object(u.jsx)("div",{className:"standard-button graphic-editor-lower-button",children:Object(u.jsx)("button",{onClick:function(){return v("reset",0)},children:"Reset"})}),Object(u.jsx)("div",{className:"standard-button graphic-editor-lower-button",children:Object(u.jsx)("button",{onClick:function(){return o("LayerOverview")},children:"Back"})})]})]})};a(338),a(339);var Z=function(e){var t=e.design,a=e.currentPart,n=e.setCurrentPart,r=e.setCurrentLayer,s=e.setLayersView,c=t.configData.partsArray.length,i=t.configData.partsArray,o=function(e){n(0===a&&e<0?c-1:a===c-1&&e>0?0:a+e)};return Object(u.jsx)("div",{className:"part-selector-container",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"change-part-button",onClick:function(){o(-1),r(-1)},children:Object(u.jsx)(B.h,{})}),Object(u.jsx)("button",{className:"partname-button",onClick:function(){s("PartList")},children:_(i[a])}),Object(u.jsx)("button",{className:"change-part-button",onClick:function(){o(1),r(-1)},children:Object(u.jsx)(B.i,{})})]})})};var $=function(e){var t=e.props,a=t.allLayers,n=t.currentPart,r=t.design,s=t.currentLayer,c=t.handleViewChange,i=t.numberOfLayers,o=t.setCurrentLayer,l=t.setCurrentPart,d=t.setLayersView,v=t.handleDeleteLayer,b=t.handleEditLayer,j=t.handleMoveLayer;return Object(u.jsxs)("div",{className:"layers-view-container",onClick:function(e){"layers-view-container"===e.target.className&&o(-1)},children:[Object(u.jsx)(Z,{design:r,currentPart:n,setCurrentPart:l,setCurrentLayer:o,setLayersView:d}),Object(u.jsx)("div",{className:"add-layer-button",children:Object(u.jsx)("button",{onClick:function(){return d("AddLayerType")},children:"Add Layer"})}),Object(u.jsx)("div",{className:"layers-box-container",children:a.map((function(e,t){return Object(u.jsxs)("div",{className:"layer-list-items",children:[Object(u.jsxs)("div",{className:"layer-list-item-end ".concat(s!==t?"hide-edit-buttons":""),children:[Object(u.jsx)("div",{className:"edit-layer-button ".concat(t===i-1?"edit-layer-button-dead":""),children:Object(u.jsx)("button",{onClick:t===i-1?null:function(){return j(t,1)},children:Object(u.jsx)(B.j,{})})}),Object(u.jsx)("div",{className:"edit-layer-button ".concat(0===t?"edit-layer-button-dead":""),children:Object(u.jsx)("button",{onClick:0===t?null:function(){return j(t,-1)},children:Object(u.jsx)(B.g,{})})})]}),Object(u.jsxs)("div",{className:"layer-list-item-middle",onClick:function(){t===s?b(t,e):o(t)},children:[Object(u.jsx)("div",{className:"layer-list-item-left ".concat(s===t?"focus-layer-highlight":""),children:Object(u.jsx)("div",{className:"layer-list-item-type",children:"overlay"===e.type?_(e.source).toLowerCase():e.type})}),"color"===e.type?Object(u.jsx)("div",{className:"layer-list-item-right",style:{backgroundColor:e.color}}):"graphic"===e.type?Object(u.jsx)("div",{className:"layer-list-item-right",children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):"mask"===e.type?Object(u.jsx)("div",{className:"layer-list-item-right",children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):Object(u.jsx)("div",{className:"layer-list-item-right",children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.source,"Mask.png"),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})})]}),Object(u.jsxs)("div",{className:"layer-list-item-end ".concat(s!==t?"hide-edit-buttons":""),children:[Object(u.jsx)("div",{className:"edit-layer-button",children:Object(u.jsx)("button",{onClick:function(){b(t,e)},children:Object(u.jsx)(B.n,{})})}),"overlay"===e.type?Object(u.jsx)("div",{className:"edit-layer-button edit-layer-button-dead",children:Object(u.jsx)("button",{children:Object(u.jsx)(B.r,{})})}):Object(u.jsx)("div",{className:"edit-layer-button",children:Object(u.jsx)("button",{onClick:function(){return v(t)},children:Object(u.jsx)(B.r,{})})})]})]},t)}))}),Object(u.jsx)("div",{className:"standard-button layer-back-button",children:Object(u.jsx)("button",{onClick:function(){o(-1),c("DesignPreview")},children:"Back"})})]})};a(340);var K=function(e){var t=e.props,a=t.design,n=t.currentPartName,r=t.handleAddMaskLayer,s=t.setLayersView;return Object(u.jsxs)("div",{className:"design-preview-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:"Select Mask Type"})}),a.configData.maskTypes[n].map((function(e,t){return Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){r(e[0],e[1]),s("LayerOverview")},children:e[0]})},t)})),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return s("LayerOverview")},children:"Cancel"})})]})};a(341);var Q=function(e){var t=e.props,a=t.design,n=t.setCurrentPart,r=t.setLayersView,s=t.setCurrentLayer;return Object(u.jsxs)("div",{className:"partlist-container",children:[Object(u.jsx)("div",{className:"partlist-title",children:Object(u.jsx)("p",{children:"Parts"})}),Object(u.jsx)("div",{className:"partlist-buttons",children:a.configData.partsArray.map((function(e,t){return Object(u.jsx)("div",{className:"standard-button part-list-button",children:Object(u.jsx)("button",{onClick:function(){s(-1),n(t),r("LayerOverview")},children:e})},t)}))}),Object(u.jsx)("div",{className:"standard-button bottom-button",children:Object(u.jsx)("button",{onClick:function(){return r("LayerOverview")},children:"Back"})})]})};a(342),a(343);var ee=function(e){var t=e.graphicsArray,a=e.handleAddGraphicLayer;return Object(u.jsx)("div",{className:"current-graphics-container",children:t.map((function(e,t){return Object(u.jsx)("div",{className:"current-graphics-item",onClick:function(){return a(e)},children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e),alt:"used-already"})},t)}))})};var te={AddLayerType:z,ColorPicker:X,GraphicEditor:q,LayerOverview:$,MaskTypes:K,PartList:Q,GraphicPicker:function(e){var t=e.props,a=t.setLayersView,r=t.handleAddLayer,s=t.design,c=Object(n.useState)(!1),i=Object(l.a)(c,2),o=i[0],d=i[1],v=Object(n.useState)(!1),b=Object(l.a)(v,2),j=b[0],h=b[1],g=Object(n.useState)(),p=Object(l.a)(g,2),f=p[0],O=p[1];Object(n.useEffect)((function(){O(function(){var e=["red-apple.png"];for(var t in s.outlineData.parts){for(var a in s.outlineData.parts[t].right)if("graphic"===s.outlineData.parts[t].right[a].type){var n=s.outlineData.parts[t].right[a].link;e.includes(n)||e.push(n)}for(var r in s.outlineData.parts[t].left)if("graphic"===s.outlineData.parts[t].left[r].type){var c=s.outlineData.parts[t].left[r].link;e.includes(c)||e.push(c)}}for(var i in s.outlineData.overlays){for(var o in s.outlineData.overlays[i].right)if("graphic"===s.outlineData.overlays[i].right[o].type){var l=s.outlineData.overlays[i].right[o].link;e.includes(l)||e.push(l)}for(var u in s.outlineData.overlays[i].left)if("graphic"===s.outlineData.overlays[i].left[u].type){var d=s.outlineData.overlays[i].left[u].link;e.includes(d)||e.push(d)}}return e[0]?e:null}())}),[s]);var x=function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t.target.files[0].size/1024/1024).toFixed(4)<2)){e.next=8;break}return h(!0),a=t.target.files[0],e.next=6,R(a,!0).then((function(e){var t=E(e.image);y(t)}));case 6:e.next=9;break;case 8:d(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){r("Graphic",e),a("LayerOverview")};return j?Object(u.jsx)("div",{className:"upload-image-container",children:Object(u.jsx)("div",{id:"loading-small",children:Object(u.jsx)("div",{id:"loader"})})}):Object(u.jsxs)("div",{className:"upload-image-container",children:[f&&Object(u.jsx)("div",{className:"used-graphics",children:Object(u.jsx)(ee,{graphicsArray:f,handleAddGraphicLayer:y})}),Object(u.jsx)("div",{className:"upload-image-input",children:Object(u.jsxs)("label",{htmlFor:"image-input-id",className:"upload-image-label",children:[Object(u.jsx)("input",{onChange:function(e){return x(e)},id:"image-input-id",type:"file",name:"myImage",accept:"image/png, image/jpeg, .png, .jpg"}),"Upload"]})}),o&&Object(u.jsx)("div",{className:"file-size-warning",children:Object(u.jsx)("p",{children:"file must be less that 2MB."})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return a("LayerOverview")},children:"Cancel"})})]})}};a(344);var ae=function(e){var t=e.layersView,a=e.setLayersView,n=e.currentLayer,r=e.currentPart,s=e.design,c=e.graphicVisualCanvas,i=e.handleChangeManager,o=e.handleUpdateGraphicVisualCanvas,l=e.handleViewChange,d=e.setCurrentLayer,v=e.setCurrentPart,b=e.setCanSave,j=e.currentShoe,h=Object.keys(s.configData.partsObject)[r],g="parts";"outerOverlay"!==h&&"innerOverlay"!==h||(g="overlays");var p=s.outlineData[g][h][j].length,f=s.outlineData[g][h][j],O=te[t],x={allLayers:f,currentPart:r,currentLayer:n,currentPartName:h,design:s,graphicVisualCanvas:c,handleAddLayer:function(e,t){b(!0),i(Object(A.a)({type:"layer-added",partName:h,layerType:e},t&&{fileName:t})),d(p)},handleAddMaskLayer:function(e,t){b(!0),i({type:"layer-added",partName:h,layerType:"Mask",maskType:e,maskLink:t}),d(p)},handleMoveLayer:function(e,t){b(!0),i({type:"layer-moved",partName:h,layerIndex:e,direction:t}),d(n+t)},handleEditLayer:function(e,t){"color"===t.type?(d(e),a("ColorPicker")):"graphic"===t.type?(d(e),a("GraphicEditor")):"mask"===t.type?(d(e),a("ColorPicker")):"overlay"===t.type&&(v(s.configData.partsArray.indexOf(t.source)),d(-1))},handleDeleteLayer:function(e){b(!0),i({type:"layer-deleted",partName:h,layerIndex:e}),d(-1)},handleChangeManager:i,handleUpdateGraphicVisualCanvas:o,handleViewChange:l,setCurrentLayer:d,setCurrentPart:v,setLayersView:a,numberOfLayers:p,setCanSave:b,currentShoe:j,layersView:t};return Object(u.jsx)(O,{props:x})},ne=(a(345),a(33));var re=function(e){var t=e.handleViewChange,a=e.design,n=e.setDesign,r=e.setCanSave;return Object(u.jsxs)("div",{className:"changedesignname-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:"Change Design Name"})}),Object(u.jsx)("div",{className:"designer-input-div",children:Object(u.jsx)("input",{type:"text",id:"design-name-input",className:"designer-input",defaultValue:a.title})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return function(){var e=Object(ne.cloneDeep)(a),s=Object(ne.startCase)(document.getElementById("design-name-input").value);e.title=s,r(!0),n(e),t("DesignPreview")}()},children:"Done"})})]})};a(346);var se=function(e){var t=e.handleViewChange,a=e.design,r=e.setDesign,s=e.setCanSave,c=e.handleUpdateBaseColor,i=e.currentShoe,o=e.setCurrentShoe,d=Object(n.useState)(a.outlineData.baseColors.left===a.outlineData.baseColors.right?"both":i),v=Object(l.a)(d,2),b=v[0],j=v[1],h=Object(n.useState)(a.outlineData.baseColors[i]),g=Object(l.a)(h,2),p=g[0],f=g[1],O=function(e){var t=e.hex||e;f(t)},x=function(e){j(e),"right"!==e&&"left"!==e||(o(e),f(a.outlineData.baseColors[e]))};return Object(u.jsxs)("div",{className:"change-base-color-container",children:[Object(u.jsx)("div",{className:"base-color-selector",children:Object(u.jsx)(J,{color:p,onChangeComplete:O})}),Object(u.jsxs)("div",{className:"base-color-buttons",children:[Object(u.jsx)("div",{className:"base-color-radio",children:Object(u.jsxs)("div",{className:"radio-container",children:[Object(u.jsx)("div",{className:"radio-option ".concat("left"===b?"radio-active":null),onClick:function(){x("left")},children:Object(u.jsx)("p",{children:"Left"})}),Object(u.jsx)("div",{className:"radio-option ".concat("both"===b?"radio-active":null),onClick:function(){x("both")},children:Object(u.jsx)("p",{children:"Both"})}),Object(u.jsx)("div",{className:"radio-option ".concat("right"===b?"radio-active":null),onClick:function(){x("right")},children:Object(u.jsx)("p",{children:"Right"})})]})}),Object(u.jsx)("div",{className:"base-color-button",children:Object(u.jsx)("button",{onClick:function(){return O("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random"})}),Object(u.jsx)("div",{className:"base-color-button",children:Object(u.jsx)("button",{onClick:function(){return function(){var e=Object(ne.cloneDeep)(a);"left"===b?e.outlineData.baseColors.left=p:"right"===b?e.outlineData.baseColors.right=p:"both"===b&&(e.outlineData.baseColors.left=p,e.outlineData.baseColors.right=p),s(!0),r(e),c(e)}()},children:"Apply"})}),Object(u.jsx)("div",{className:"base-color-button",children:Object(u.jsx)("button",{onClick:function(){return t("DesignPreview")},children:"Done"})})]})]})};var ce=function(e){var t=e.design,a=e.setDesign,r=e.graphicVisualCanvas,s=e.handleUpdateGraphicVisualCanvas,c=e.handleChangeManager,i=e.handleUpdateBaseColor,o=e.userData,d=e.currentPart,v=e.setCurrentPart,b=e.currentShoe,j=e.setCurrentShoe,h=e.shoeVisibility,g=e.setShoeVisibility,p=e.view,f=e.setView,O=e.layersView,x=e.setLayersView,y=e.currentLayer,m=e.setCurrentLayer,C=e.setCameraReset,N=Object(n.useState)(!1),w=Object(l.a)(N,2),k=w[0],D=w[1],S=function(e){f(e)};return"DesignPreview"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(G,{handleViewChange:S,design:t,setDesign:a,canSave:k,setCanSave:D,userData:o,currentShoe:b,setCurrentShoe:j,shoeVisibility:h,setShoeVisibility:g,setCameraReset:C})}):"Layers"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(ae,{layersView:O,setLayersView:x,handleViewChange:S,design:t,setDesign:a,currentShoe:b,currentPart:d,setCurrentPart:v,currentLayer:y,setCurrentLayer:m,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:s,handleChangeManager:c,setCanSave:D})}):"ChangeDesignName"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(re,{handleViewChange:S,design:t,setDesign:a,setCanSave:D})}):"ChangeBaseColor"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(se,{handleViewChange:S,design:t,setDesign:a,setCanSave:D,handleUpdateBaseColor:i,currentShoe:b,setCurrentShoe:j})}):void 0},ie=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,j,h,g,p,f,O,x;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.setTexturesLoaded,n=t.design,r=t.graphicVisualCanvas,s=t.rightInnerOverlayCanvas,c=t.rightOuterOverlayCanvas,i=t.rightTexture,o=t.rightTextureCanvas,l=t.leftInnerOverlayCanvas,u=t.leftOuterOverlayCanvas,d=t.leftTexture,v=t.leftTextureCanvas,b=t.rightCanvasObjectRef,j=t.rightOverlaysCanvasObjectRef,h=t.rightBaseColorCanvasObjectRef,g=t.leftBaseColorCanvasObjectRef,p=t.leftCanvasObjectRef,f=t.leftOverlaysCanvasObjectRef,e.next=3,fe({design:n,type:"overlaysCanvasObject",currentShoe:"right"});case 3:return j.current=e.sent,e.next=6,fe({design:n,type:"overlaysCanvasObject",currentShoe:"left"});case 6:return f.current=e.sent,Oe({design:n,overlayCanvasObject:j.current,overlayCanvas:c,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),Oe({design:n,overlayCanvasObject:f.current,overlayCanvas:u,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),Oe({design:n,overlayCanvasObject:j.current,overlayCanvas:s,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),Oe({design:n,overlayCanvasObject:f.current,overlayCanvas:l,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),e.next=13,fe({design:n,type:"partsCanvasObject",overlays:[c,s],currentShoe:"right"});case 13:return b.current=e.sent,e.next=16,fe({design:n,type:"partsCanvasObject",overlays:[u,l],currentShoe:"left"});case 16:return p.current=e.sent,e.next=19,fe({design:n,type:"baseColorCanvasObject",currentShoe:"right"});case 19:return h.current=e.sent,e.next=22,fe({design:n,type:"baseColorCanvasObject",currentShoe:"left"});case 22:return g.current=e.sent,e.next=25,Pe({design:n,canvasObject:b.current,baseColorCanvasObject:h.current});case 25:return O=e.sent,e.next=28,Pe({design:n,canvasObject:p.current,baseColorCanvasObject:g.current});case 28:x=e.sent,o.getContext("2d").drawImage(O,0,0),i.needsUpdate=!0,v.getContext("2d").drawImage(x,0,0),d.needsUpdate=!0,a(!0);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){var t=new L.CanvasTexture(e);return t.flipY=!1,t},le=function(e){var t=e.design;return new Promise((function(e){var a=t.configData.canvasSize,n=document.createElement("canvas");n.width=a,n.height=a;var r=n.getContext("2d");!function t(){null!==r&&"object"===typeof n?(r.fillStyle="#ffffff",r.fillRect(0,0,a,a),e(n)):setTimeout(t,100)}()}))},ue=function(e){var t=e.design;return new Promise((function(e){var a=t.configData.canvasSize,n=document.createElement("canvas");n.width=a,n.height=a;var r=n.getContext("2d"),s=new Image;s.src="/api/assets/designimages/".concat(t.configData.source.redMap),s.onload=function(){!function t(){null!==r&&"object"===typeof n?(r.drawImage(s,0,0,1e3,1e3),e(n)):setTimeout(t,100)}()}}))},de=function(e){var t=e.design.configData.canvasSize,a=document.createElement("canvas");return a.id="graphic-visual-canvas",a.width=t,a.height=t,a},ve=function(e){var t=e.design,a=e.layer,n=e.partName;return new Promise((function(e){var r=t.configData.partsObject[n].mask,s=a.color,c=t.configData.canvasSize,i=document.createElement("canvas");i.width=c,i.height=c;var o=i.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof i?(o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=s,o.fillRect(0,0,c,c),e(i)):setTimeout(t,100)}()}}))},be=function(e){var t=e.design,a=e.layer,n=e.partName,r=e.currentShoe;return new Promise((function(e){var s=t.configData.partsObject[n].mask,c=a.link,i=a.x,o=a.y,l=a.scale,u=a.rotation,d=t.configData.canvasSize,v=document.createElement("canvas");v.width=d,v.height=d;var b=v.getContext("2d"),j=new Image;j.src="/api/assets/images/".concat(c),j.onload=function(){var t=j.width,a=j.height,n=Math.round(Math.sqrt(t*t+a*a)),c=document.createElement("canvas");c.id="pythagorean-canvas",c.width=n,c.height=n;var h=c.getContext("2d");!function t(){if(null!==h&&"object"===typeof c&&null!==b&&"object"===typeof v){h.translate(c.width/2,c.height/2),h.rotate(u*Math.PI/180),h.drawImage(j,j.width/-2,j.height/-2,j.width,j.height);var a=new Image;a.src="/api/assets/designimages/".concat(s),a.onload=function(){b.drawImage(a,0,0,d,d),b.globalCompositeOperation="source-in";var t=i+(d-d*l)/2,n=o+(d-d*l)/2,s=d*l;"left"===r&&(b.scale(-1,1),b.translate(-d,0)),b.drawImage(c,t,n,s,s),e(v)}}else setTimeout(t,100)}()}}))},je=function(e){var t=e.design,a=e.layer,n=e.currentShoe;return new Promise((function(e){var r=a.link,s=a.color,c=t.configData.canvasSize,i=document.createElement("canvas");i.width=c,i.height=c;var o=i.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof i?("left"===n&&"heelWingLogoMask.png"===r&&(o.scale(-1,1),o.translate(-c,0)),o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=s,o.fillRect(0,0,c,c),e(i)):setTimeout(t,100)}()}}))},he=function(e){var t=e.design,a=e.layer,n=e.partName,r=e.overlayCanvas;return new Promise((function(e){var s=t.configData.partsObject[n].mask,c=a.source,i=t.configData.translations[c][n],o=i.x,l=i.y,u=i.scale,d=i.rotation,v=t.configData.canvasSize,b=document.createElement("canvas");b.width=v,b.height=v;var j=b.getContext("2d"),h=new Image;h.src="/api/assets/designimages/".concat(s),h.onload=function(){!function t(){null!==j&&"object"===typeof b?(j.drawImage(h,0,0,v,v),j.globalCompositeOperation="source-in",j.translate(v*o,v*l),j.rotate(d),j.drawImage(r,0,0,v*u,v*u),e(b)):setTimeout(t,100)}()}}))},ge=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s,c,i,o,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.design,n=t.designLayers,r=t.partName,s=t.overlays,c=t.currentShoe,i=[],e.t0=w.a.keys(n);case 3:if((e.t1=e.t0()).done){e.next=44;break}if(o=e.t1.value,"color"!==n[o].type){e.next=12;break}return e.next=8,ve({design:a,layer:n[o],partName:r});case 8:l=e.sent,i.push(l),e.next=42;break;case 12:if("graphic"!==n[o].type){e.next=20;break}return e.t2=i,e.next=16,be({design:a,layer:n[o],partName:r,currentShoe:c});case 16:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=42;break;case 20:if("mask"!==n[o].type){e.next=28;break}return e.t4=i,e.next=24,je({design:a,layer:n[o],currentShoe:c});case 24:e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.next=42;break;case 28:if("overlay"!==n[o].type){e.next=42;break}if("outerOverlay"!==n[o].source){e.next=37;break}return e.t6=i,e.next=33,he({design:a,layer:n[o],partName:r,overlayCanvas:s[0]});case 33:e.t7=e.sent,e.t6.push.call(e.t6,e.t7),e.next=42;break;case 37:return e.t8=i,e.next=40,he({design:a,layer:n[o],partName:r,overlayCanvas:s[1]});case 40:e.t9=e.sent,e.t8.push.call(e.t8,e.t9);case 42:e.next=3;break;case 44:return e.abrupt("return",{layers:i});case 45:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.design,n=t.partName,r=t.currentShoe,e.next=3,ve({design:a,layer:{color:a.outlineData.baseColors[r]},partName:n});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){var t=e.design,a=e.type,n=e.overlays,r=e.currentShoe;return new Promise((function(e,s){var c={};(function(){var s=Object(k.a)(w.a.mark((function s(){var i,o,l;return w.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("partsCanvasObject"!==a){s.next=11;break}s.t0=w.a.keys(t.outlineData.parts);case 2:if((s.t1=s.t0()).done){s.next=9;break}return i=s.t1.value,s.next=6,ge({design:t,designLayers:t.outlineData.parts[i][r],partName:i,overlays:n,currentShoe:r});case 6:c[i]=s.sent,s.next=2;break;case 9:s.next=31;break;case 11:if("overlaysCanvasObject"!==a){s.next=22;break}s.t2=w.a.keys(t.outlineData.overlays);case 13:if((s.t3=s.t2()).done){s.next=20;break}return o=s.t3.value,s.next=17,ge({design:t,designLayers:t.outlineData.overlays[o][r],partName:o,currentShoe:r});case 17:c[o]=s.sent,s.next=13;break;case 20:s.next=31;break;case 22:if("baseColorCanvasObject"!==a){s.next=31;break}s.t4=w.a.keys(t.outlineData.parts);case 24:if((s.t5=s.t4()).done){s.next=31;break}return l=s.t5.value,s.next=28,pe({design:t,partName:l,currentShoe:r});case 28:c[l]=s.sent,s.next=24;break;case 31:e(c);case 32:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}})()()}))},Oe=function(e){var t=e.design,a=e.overlayCanvasObject,n=e.overlayCanvas,r=e.partName,s=e.graphicVisualCanvas,c=t.configData.canvasSize,i=n.getContext("2d"),o=s.getContext("2d");for(var l in o.clearRect(0,0,c,c),i.clearRect(0,0,c,c),a[r].layers){var u=a[r].layers[l];i.drawImage(u,0,0,c,c),o.drawImage(u,0,0,c,c)}},xe=function(e){var t=e.design,a=e.graphicVisualCanvas,n=e.partName,r=e.canvasObject,s=e.baseColorCanvasObject,c=t.configData.canvasSize,i=a.getContext("2d");if(i.clearRect(0,0,c,c),s[n]){var o=s[n];i.drawImage(o,0,0,c,c)}for(var l in r[n].layers){var u=r[n].layers[l];i.drawImage(u,0,0,c,c)}},ye=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.partName,n=t.layerIndex,r=t.layerObject,s=t.canvasObject,c=t.textureCanvas,i=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.baseColorCanvasObject,d=t.currentShoe,"color"!==r.type){e.next=7;break}return e.next=4,ve({design:l,layer:r,partName:a});case 4:v=e.sent,e.next=16;break;case 7:if("graphic"!==r.type){e.next=13;break}return e.next=10,be({design:l,layer:r,partName:a,currentShoe:d});case 10:v=e.sent,e.next=16;break;case 13:return e.next=15,je({design:l,layer:r,currentShoe:d});case 15:v=e.sent;case 16:s[a].layers[n]=v,we({textureCanvas:c,canvasObjectPart:s[a],partName:a,texture:i,graphicVisualCanvas:o,design:l,baseColorCanvasObject:u});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.canvasObject,n=t.graphicVisualCanvas,r=t.layerObject,s=t.partName,c=t.texture,i=t.textureCanvas,o=t.design,l=t.baseColorCanvasObject,u=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,ve({design:o,layer:r,partName:s});case 4:d=e.sent,a[s].layers.push(d),e.next=19;break;case 8:if("graphic"!==r.type){e.next=15;break}return e.next=11,be({design:o,layer:r,partName:s,currentShoe:u});case 11:v=e.sent,a[s].layers.push(v),e.next=19;break;case 15:return e.next=17,je({design:o,layer:r,currentShoe:u});case 17:b=e.sent,a[s].layers.push(b);case 19:we({textureCanvas:i,canvasObjectPart:a[s],partName:s,texture:c,graphicVisualCanvas:n,design:o,baseColorCanvasObject:l});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e){var t=e.canvasObject,a=e.partName,n=e.layerIndex,r=e.textureCanvas,s=e.texture,c=e.graphicVisualCanvas,i=e.design,o=e.baseColorCanvasObject;t[a].layers.splice(n,1),we({textureCanvas:r,canvasObjectPart:t[a],partName:a,texture:s,graphicVisualCanvas:c,design:i,baseColorCanvasObject:o})},Ne=function(e){var t=e.canvasObject,a=e.partName,n=e.layerIndex,r=e.direction,s=e.textureCanvas,c=e.texture,i=e.graphicVisualCanvas,o=e.design,l=e.baseColorCanvasObject,u=t[a].layers,d=u[n];u[n]=u[n+r],u[n+r]=d,t[a].layers=u,we({textureCanvas:s,canvasObjectPart:t[a],partName:a,texture:c,graphicVisualCanvas:i,design:o,baseColorCanvasObject:l})},we=function(e){var t=e.textureCanvas,a=e.canvasObjectPart,n=e.partName,r=e.texture,s=e.graphicVisualCanvas,c=e.design,i=e.baseColorCanvasObject,o=t.getContext("2d"),l=s.getContext("2d");l.clearRect(0,0,c.configData.canvasSize,c.configData.canvasSize);var u=c.configData.partsObject[n],d=u.x,v=u.y,b=u.width,j=u.height,h=c.configData.divider;for(var g in o.drawImage(i[n],d/h,v/h,b/h,j/h),l.drawImage(i[n],0,0,c.configData.canvasSize,c.configData.canvasSize),a.layers){var p=a.layers[g];o.drawImage(p,d/h,v/h,b/h,j/h),l.drawImage(p,0,0,c.configData.canvasSize,c.configData.canvasSize)}r.needsUpdate=!0},ke=function(e){var t=e.changeObject,a=e.design,n=e.setDesign,r=e.texture,s=e.textureCanvas,c=e.graphicVisualCanvas,i=e.canvasObject,o=e.overlayCanvas,l=e.overlayCanvasObject,u=e.baseColorCanvasObject,d=e.currentShoe,v=t.type,b=t.fileName,j=Object(ne.cloneDeep)(a);if("graphic-moved"===v){var h=t.partName,g=t.layerIndex,p=t.direction,f=t.distance,O=j.outlineData.overlays[h][d][g];"vert"===p?O.y+=f:"hor"===p?O.x+=f:"scale"===p?O.scale*=f:"rotate"===p?O.rotation+=f:"reset"===p&&(O.y=0,O.x=0,O.scale=1,O.rotation=0),n(j),De({partName:h,layerIndex:g,layerObject:O,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,canvasObject:i,textureCanvas:s,baseColorCanvasObject:u,currentShoe:d})}else if("color-changed"===v){var x=t.partName,y=t.layerIndex,m=t.newColor,C=j.outlineData.overlays[x][d][y];C.color=m,n(j),De({partName:x,layerIndex:y,layerObject:C,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,canvasObject:i,textureCanvas:s,baseColorCanvasObject:u,currentShoe:d})}else if("layer-added"===v){var N=t.partName,w=t.layerType;if(0===a.outlineData.overlays[N][d].length){var k=a.configData.overlayParts[N];for(var D in k){var S=k[D];j.outlineData.parts[S][d].push({type:"overlay",source:N})}}"Color"===w?j.outlineData.overlays[N][d].push({type:"color",color:"#777777"}):j.outlineData.overlays[N][d].push({type:"graphic",link:b,x:0,y:0,scale:1,rotation:0}),n(j),Se({overlayCanvasObject:l,partName:N,layerObject:j.outlineData.overlays[N][d].slice(-1)[0],overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,textureCanvas:s,canvasObject:i,tempDesign:j,baseColorCanvasObject:u,currentShoe:d})}else if("layer-moved"===v){var V=t.partName,L=t.layerIndex,I=t.direction,P=j.outlineData.overlays[V][d],T=P[L];P[L]=P[L+I],P[L+I]=T,j.outlineData.overlays[V][d]=P,n(j),Ve({overlayCanvasObject:l,partName:V,layerIndex:L,direction:I,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,textureCanvas:s,canvasObject:i,baseColorCanvasObject:u,currentShoe:d})}else if("layer-deleted"===v){var R=t.partName,M=t.layerIndex;if(j.outlineData.overlays[R][d].splice(M,1),0===j.outlineData.overlays[R][d].length){var E=a.configData.overlayParts[R];for(var B in E)for(var A=E[B],U=0;U<j.outlineData.parts[A][d].length;U++){var G=U;"overlay"===j.outlineData.parts[A][d][U].type&&j.outlineData.parts[A][d][U].source===R&&(j.outlineData.parts[A][d].splice(G,1),i[A].layers.splice(G,1))}}n(j),Le({overlayCanvasObject:l,partName:R,layerIndex:M,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,textureCanvas:s,canvasObject:i,tempDesign:j,baseColorCanvasObject:u,currentShoe:d})}},De=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,j,h,g,p,f,O,x;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.partName,n=t.layerIndex,r=t.layerObject,s=t.overlayCanvasObject,c=t.overlayCanvas,i=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.canvasObject,d=t.textureCanvas,v=t.baseColorCanvasObject,b=t.currentShoe,j=l.configData.overlayParts[a],"color"!==r.type){e.next=8;break}return e.next=5,ve({design:l,layer:r,partName:a});case 5:h=e.sent,e.next=11;break;case 8:return e.next=10,be({design:l,layer:r,partName:a,currentShoe:b});case 10:h=e.sent;case 11:s[a].layers[n]=h,Oe({design:l,overlayCanvasObject:s,overlayCanvas:c,partName:a,graphicVisualCanvas:o,currentShoe:b}),e.t0=w.a.keys(j);case 14:if((e.t1=e.t0()).done){e.next=32;break}g=e.t1.value,p=j[g],f=0;case 18:if(!(f<l.outlineData.parts[p][b].length)){e.next=30;break}if(O=f,"overlay"!==l.outlineData.parts[p][b][f].type){e.next=27;break}if(l.outlineData.parts[p][b][f].source!==a){e.next=27;break}return e.next=24,he({design:l,layer:l.outlineData.parts[p][b][f],partName:p,overlayCanvas:c});case 24:x=e.sent,u[p].layers[O]=x,Ie({textureCanvas:d,canvasObjectPart:u[p],partName:p,design:l,baseColorCanvasObject:v});case 27:f++,e.next=18;break;case 30:e.next=14;break;case 32:i.needsUpdate=!0;case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,j,h,g,p,f,O,x,y;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.overlayCanvasObject,n=t.partName,r=t.layerObject,s=t.overlayCanvas,c=t.texture,i=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,v=t.baseColorCanvasObject,b=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,ve({design:o,layer:r,partName:n});case 4:j=e.sent,a[n].layers.push(j),e.next=13;break;case 8:if("graphic"!==r.type){e.next=13;break}return e.next=11,be({design:o,layer:r,partName:n,currentShoe:b});case 11:h=e.sent,a[n].layers.push(h);case 13:Oe({design:o,overlayCanvasObject:a,overlayCanvas:s,partName:n,graphicVisualCanvas:i,currentShoe:b}),g=o.configData.overlayParts[n],e.t0=w.a.keys(g);case 16:if((e.t1=e.t0()).done){e.next=34;break}p=e.t1.value,f=g[p],O=0;case 20:if(!(O<d.outlineData.parts[f][b].length)){e.next=32;break}if(x=O,"overlay"!==d.outlineData.parts[f][b][O].type){e.next=29;break}if(d.outlineData.parts[f][b][O].source!==n){e.next=29;break}return e.next=26,he({design:o,layer:d.outlineData.parts[f][b][O],partName:f,overlayCanvas:s});case 26:y=e.sent,u[f].layers[x]=y,Ie({textureCanvas:l,canvasObjectPart:u[f],partName:f,design:o,baseColorCanvasObject:v});case 29:O++,e.next=20;break;case 32:e.next=16;break;case 34:c.needsUpdate=!0;case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,j,h,g,p,f,O,x,y;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.overlayCanvasObject,n=t.partName,r=t.layerIndex,s=t.direction,c=t.overlayCanvas,i=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.textureCanvas,d=t.canvasObject,v=t.baseColorCanvasObject,b=t.currentShoe,j=a[n].layers,h=j[r],j[r]=j[r+s],j[r+s]=h,a[n].layers=j,Oe({design:l,overlayCanvasObject:a,overlayCanvas:c,partName:n,graphicVisualCanvas:o,currentShoe:b}),g=l.configData.overlayParts[n],e.t0=w.a.keys(g);case 9:if((e.t1=e.t0()).done){e.next=27;break}p=e.t1.value,f=g[p],O=0;case 13:if(!(O<l.outlineData.parts[f][b].length)){e.next=25;break}if(x=O,"overlay"!==l.outlineData.parts[f][b][O].type){e.next=22;break}if(l.outlineData.parts[f][b][O].source!==n){e.next=22;break}return e.next=19,he({design:l,layer:l.outlineData.parts[f][b][O],partName:f,overlayCanvas:c});case 19:y=e.sent,d[f].layers[x]=y,Ie({textureCanvas:u,canvasObjectPart:d[f],partName:f,design:l,baseColorCanvasObject:v});case 22:O++,e.next=13;break;case 25:e.next=9;break;case 27:i.needsUpdate=!0;case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,j,h,g,p,f,O;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.overlayCanvasObject,n=t.partName,r=t.layerIndex,s=t.overlayCanvas,c=t.texture,i=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,v=t.baseColorCanvasObject,b=t.currentShoe,a[n].layers.splice(r,1),Oe({design:o,overlayCanvasObject:a,overlayCanvas:s,partName:n,graphicVisualCanvas:i,currentShoe:b}),j=o.configData.overlayParts[n],e.t0=w.a.keys(j);case 5:if((e.t1=e.t0()).done){e.next=22;break}h=e.t1.value,g=j[h],p=0;case 9:if(!(p<d.outlineData.parts[g][b].length)){e.next=19;break}if(f=p,"overlay"!==d.outlineData.parts[g][b][p].type||d.outlineData.parts[g][b][p].source!==n){e.next=16;break}return e.next=14,he({design:o,layer:o.outlineData.parts[g][b][p],partName:g,overlayCanvas:s});case 14:O=e.sent,u[g].layers[f]=O;case 16:p++,e.next=9;break;case 19:Ie({textureCanvas:l,canvasObjectPart:u[g],partName:g,design:o,baseColorCanvasObject:v}),e.next=5;break;case 22:c.needsUpdate=!0;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(e){var t=e.textureCanvas,a=e.canvasObjectPart,n=e.partName,r=e.design,s=e.baseColorCanvasObject,c=t.getContext("2d"),i=r.configData.partsObject[n],o=i.x,l=i.y,u=i.width,d=i.height,v=r.configData.divider;for(var b in c.drawImage(s[n],o/v,l/v,u/v,d/v),a.layers){var j=a.layers[b];c.drawImage(j,o/v,l/v,u/v,d/v)}},Pe=function(e){var t=e.design,a=e.canvasObject,n=e.baseColorCanvasObject;return new Promise((function(e,r){var s=document.createElement("canvas");s.width=t.configData.canvasSize,s.height=t.configData.canvasSize;var c=s.getContext("2d");!function r(){if("undefined"!==typeof c){for(var i in a){var o=t.configData.partsObject[i],l=o.x,u=o.y,d=o.width,v=o.height,b=t.configData.divider;for(var j in c.drawImage(n[i],l/b,u/b,d/b,v/b),a[i].layers){var h=a[i].layers[j];c.drawImage(h,l/b,u/b,d/b,v/b)}}e(s)}else setTimeout(r,100)}()}))};var Te=function(e){var t=e.userData,a=e.designSpec,r=e.graphicVisualCanvas,s=e.rightInnerOverlayCanvas,c=e.rightOuterOverlayCanvas,i=e.rightTexture,o=e.rightTextureCanvas,d=e.leftInnerOverlayCanvas,v=e.leftOuterOverlayCanvas,b=e.leftTexture,j=e.leftTextureCanvas,h=e.redMapCanvas,g=Object(n.useState)(a),p=Object(l.a)(g,2),f=p[0],O=p[1],x=Object(n.useState)(!1),y=Object(l.a)(x,2),m=y[0],C=y[1],N=Object(n.useState)(0),D=Object(l.a)(N,2),S=D[0],V=D[1],L=Object(n.useState)("right"),I=Object(l.a)(L,2),P=I[0],R=I[1],M=Object(n.useState)(-1),E=Object(l.a)(M,2),B=E[0],A=E[1],U=Object(n.useState)({right:!0,left:!0}),G=Object(l.a)(U,2),z=G[0],_=G[1],F=Object(n.useState)("DesignPreview"),W=Object(l.a)(F,2),Y=W[0],H=W[1],J=Object(n.useState)("LayerOverview"),X=Object(l.a)(J,2),q=X[0],Z=X[1],$=Object(n.useRef)(),K=Object(n.useRef)(),Q=Object(n.useRef)(),ee=Object(n.useRef)(),te=Object(n.useRef)(),ae=Object(n.useRef)(),re=Object(n.useState)(!0),se=Object(l.a)(re,2),oe=se[0],le=se[1],ue=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe({design:t,type:"baseColorCanvasObject",currentShoe:"right"});case 2:return $.current=e.sent,e.next=5,fe({design:t,type:"baseColorCanvasObject",currentShoe:"left"});case 5:return ee.current=e.sent,e.next=8,Pe({design:f,canvasObject:K.current,baseColorCanvasObject:$.current});case 8:return a=e.sent,e.next=11,Pe({design:f,canvasObject:te.current,baseColorCanvasObject:ee.current});case 11:n=e.sent,o.getContext("2d").drawImage(a,0,0),i.needsUpdate=!0,j.getContext("2d").drawImage(n,0,0),b.needsUpdate=!0;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){K.current&&te.current||ie({setTexturesLoaded:C,design:f,graphicVisualCanvas:r,rightBaseColorCanvasObjectRef:$,rightInnerOverlayCanvas:s,rightOuterOverlayCanvas:c,rightTexture:i,rightTextureCanvas:o,rightCanvasObjectRef:K,rightOverlaysCanvasObjectRef:Q,leftBaseColorCanvasObjectRef:ee,leftInnerOverlayCanvas:d,leftOuterOverlayCanvas:v,leftTexture:b,leftTextureCanvas:j,leftCanvasObjectRef:te,leftOverlaysCanvasObjectRef:ae})}),[f,r,s,c,i,o,d,v,b,j]),f?Object(u.jsxs)("div",{className:"designer-container",children:[Object(u.jsx)(T,{design:f,setView:H,setLayersView:Z,rightTexture:i,leftTexture:b,texturesLoaded:m,setCurrentPart:V,setCurrentShoe:R,setCurrentLayer:A,shoeVisibility:z,redMapCanvas:h,cameraReset:oe,setCameraReset:le}),Object(u.jsx)(ce,{design:f,setDesign:O,view:Y,setView:H,currentLayer:B,setCurrentLayer:A,layersView:q,setLayersView:Z,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:function(e){xe("outerOverlay"===e||"innerOverlay"===e?"right"===P?{design:f,graphicVisualCanvas:r,partName:e,canvasObject:Q.current,baseColorCanvasObject:$.current,currentShoe:P}:{design:f,graphicVisualCanvas:r,partName:e,canvasObject:ae.current,baseColorCanvasObject:ee.current,currentShoe:P}:"right"===P?{design:f,graphicVisualCanvas:r,partName:e,canvasObject:K.current,baseColorCanvasObject:$.current,currentShoe:P}:{design:f,graphicVisualCanvas:r,partName:e,canvasObject:te.current,baseColorCanvasObject:ee.current,currentShoe:P})},handleChangeManager:function(e){var t=e.partName;"outerOverlay"===t?ke({changeObject:e,design:f,setDesign:O,texture:"right"===P?i:b,textureCanvas:"right"===P?o:j,graphicVisualCanvas:r,canvasObject:"right"===P?K.current:te.current,overlayCanvas:"right"===P?c:v,overlayCanvasObject:"right"===P?Q.current:ae.current,baseColorCanvasObject:"right"===P?$.current:ee.current,currentShoe:P}):"innerOverlay"===t?ke({changeObject:e,design:f,setDesign:O,texture:"right"===P?i:b,textureCanvas:"right"===P?o:j,graphicVisualCanvas:r,canvasObject:"right"===P?K.current:te.current,overlayCanvas:"right"===P?s:d,overlayCanvasObject:"right"===P?Q.current:ae.current,baseColorCanvasObject:"right"===P?$.current:ee.current,currentShoe:P}):function(e){var t=e.changeObject,a=e.design,n=e.setDesign,r=e.texture,s=e.textureCanvas,c=e.graphicVisualCanvas,i=e.canvasObject,o=e.baseColorCanvasObject,l=e.currentShoe,u=t.type,d=t.fileName,v=Object(ne.cloneDeep)(a);if("graphic-moved"===u){var b=t.partName,j=t.layerIndex,h=t.direction,g=t.distance,p=v.outlineData.parts[b][l][j];"vert"===h?p.y+=g:"hor"===h?p.x+=g:"scale"===h?p.scale*=g:"rotate"===h?p.rotation+=g:"reset"===h&&(p.y=0,p.x=0,p.scale=1,p.rotation=0),n(v),ye({partName:b,layerIndex:j,layerObject:p,canvasObject:i,textureCanvas:s,texture:r,graphicVisualCanvas:c,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("color-changed"===u){var f,O=t.partName,x=t.layerIndex,y=t.newColor;(f="outerOverlay"===O||"innerOverlay"===O?v.outlineData.overlays[O].layers[x]:v.outlineData.parts[O][l][x]).color=y,n(v),ye({partName:O,layerIndex:x,layerObject:f,canvasObject:i,textureCanvas:s,texture:r,graphicVisualCanvas:c,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("layer-added"===u){var m=t.partName,C=t.layerType;if("Color"===C)v.outlineData.parts[m][l].push({type:"color",color:"#777777"});else if("Graphic"===C)v.outlineData.parts[m][l].push({type:"graphic",link:d,x:0,y:0,scale:1,rotation:0});else{var N=t.maskLink;v.outlineData.parts[m][l].push({type:"mask",link:N,color:"#000000"})}n(v);var w=v.outlineData.parts[m][l].slice(-1)[0];me({canvasObject:i,graphicVisualCanvas:c,layerObject:w,partName:m,texture:r,textureCanvas:s,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("layer-moved"===u){var k=t.partName,D=t.layerIndex,S=t.direction,V=v.outlineData.parts[k][l],L=V[D];V[D]=V[D+S],V[D+S]=L,v.outlineData.parts[k].layers=V,n(v),Ne({canvasObject:i,partName:k,layerIndex:D,direction:S,textureCanvas:s,texture:r,graphicVisualCanvas:c,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("layer-deleted"===u){var I=t.partName,P=t.layerIndex;v.outlineData.parts[I][l].splice(P,1),n(v),Ce({canvasObject:i,partName:I,layerIndex:P,textureCanvas:s,texture:r,graphicVisualCanvas:c,design:a,baseColorCanvasObject:o,currentShoe:l})}}({changeObject:e,design:f,setDesign:O,texture:"right"===P?i:b,textureCanvas:"right"===P?o:j,graphicVisualCanvas:r,canvasObject:"right"===P?K.current:te.current,baseColorCanvasObject:"right"===P?$.current:ee.current,currentShoe:P})},handleUpdateBaseColor:ue,userData:t,currentPart:S,setCurrentPart:V,currentShoe:P,setCurrentShoe:R,shoeVisibility:z,setShoeVisibility:_,setCameraReset:le})]}):Object(u.jsx)("div",{children:"hi"})};var Re=function(){var e=Object(o.g)().id,t=Object(n.useContext)(b.context),a=Object(n.useState)(null),r=Object(l.a)(a,2),s=r[0],c=r[1],i=Object(n.useState)(null),d=Object(l.a)(i,2),v=d[0],j=d[1],h=Object(n.useState)(null),g=Object(l.a)(h,2),p=g[0],f=g[1],O=Object(n.useState)(null),x=Object(l.a)(O,2),m=x[0],C=x[1],N=Object(n.useState)(null),D=Object(l.a)(N,2),S=D[0],V=D[1],L=Object(n.useState)(null),I=Object(l.a)(L,2),P=I[0],T=I[1],R=Object(n.useState)(null),M=Object(l.a)(R,2),E=M[0],B=M[1],A=Object(n.useState)(null),U=Object(l.a)(A,2),G=U[0],z=U[1],_=Object(n.useState)(null),F=Object(l.a)(_,2),W=F[0],Y=F[1],H=Object(n.useState)(null),J=Object(l.a)(H,2),X=J[0],q=J[1],Z=Object(n.useState)(null),$=Object(l.a)(Z,2),K=$[0],Q=$[1],ee=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,s,i,o,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(t),j(de({design:t})),e.next=4,le({design:t});case 4:return a=e.sent,f(a),e.next=8,le({design:t});case 8:return n=e.sent,C(n),e.next=12,le({design:t});case 12:return r=e.sent,V(r),e.next=16,le({design:t});case 16:return s=e.sent,B(s),e.next=20,le({design:t});case 20:return i=e.sent,z(i),e.next=24,le({design:t});case 24:return o=e.sent,Y(o),e.next=28,ue({design:t});case 28:l=e.sent,Q(l);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){e?y("/api/outlines/".concat(e),"GET").then((function(e){return e.json()})).then((function(e){ee(e)})):y("/api/outlines/newdesign","GET").then((function(e){return e.json()})).then((function(e){ee(e)}))}),[e]),Object(n.useEffect)((function(){S&&W&&(T(oe(S)),q(oe(W)))}),[S,W]),s&&v&&p&&m&&S&&P&&E&&G&&W&&X&&K?Object(u.jsx)("div",{className:"designer-root-container",children:Object(u.jsx)(Te,{userData:t,designSpec:s,graphicVisualCanvas:v,rightInnerOverlayCanvas:p,rightOuterOverlayCanvas:m,rightTexture:P,rightTextureCanvas:S,leftInnerOverlayCanvas:E,leftOuterOverlayCanvas:G,leftTexture:X,leftTextureCanvas:W,redMapCanvas:K})}):Object(u.jsx)("div",{})};a(347);var Me=function(){return Object(u.jsxs)("div",{className:"login-container",children:[Object(u.jsx)("div",{className:"login-google-button",children:Object(u.jsx)("button",{onClick:function(){window.open("http://solecomposer.com/auth/google","_self")},children:"Login With Google"})}),Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("div",{className:"basic-button",children:Object(u.jsx)("button",{children:"Back"})})})]})};a(348);var Ee=function(){var e=Object(n.useContext)(b.context);return Object(u.jsxs)("div",{className:"profile-container",children:[Object(u.jsx)("p",{className:"basic-paragraph",children:e.firstName}),Object(u.jsx)("p",{className:"basic-paragraph",children:e.email}),Object(u.jsx)("div",{className:"basic-button",children:Object(u.jsx)("button",{onClick:function(){window.open("http://solecomposer.com/auth/logout","_self")},children:"Log Out"})}),Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("div",{className:"basic-button",children:Object(u.jsx)("button",{children:"Back"})})})]})};a(349);var Be=function(){return Object(u.jsxs)("div",{className:"no-page-container",children:[Object(u.jsx)("p",{className:"basic-paragraph",children:"404 - PAGE NOT FOUND"}),Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("div",{className:"basic-button",children:Object(u.jsx)("button",{children:"Home"})})})]})};var Ae=function(){return Object(u.jsx)("div",{className:"app-container",children:Object(u.jsx)(i.a,{children:Object(u.jsx)(b,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:C}),Object(u.jsx)(o.a,{exact:!0,path:"/login",component:Me}),Object(u.jsx)(o.a,{exact:!0,path:"/profile",component:Ee}),Object(u.jsx)(o.a,{exact:!0,path:"/designer",component:Re}),Object(u.jsx)(o.a,{exact:!0,path:"/designer/:id",component:Re}),Object(u.jsx)(o.a,{path:"*",component:Be})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Ae,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[350,1,2]]]);
//# sourceMappingURL=main.3c5010a5.chunk.js.map