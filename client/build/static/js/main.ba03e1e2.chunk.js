(this["webpackJsonpsole-composer"]=this["webpackJsonpsole-composer"]||[]).push([[0],{152:function(e,t,n){},188:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(135),c=n.n(i),s=(n(152),n(23)),o=n(21),l=n(15),u=n(1),d=Object(a.createContext)(null),b=function(e){var t=e.children,n=Object(a.useState)(),r=Object(l.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){fetch("/auth/getsession",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.err||c(e)}))}),[]),Object(u.jsx)(d.Provider,{value:i,children:t})};b.context=d;var p,h,j,f,v,g,x,O,y,m,C,w,k=b,D=n(136),S=n.n(D),N=(n(187),n(188),function(e,t){return fetch(e,{method:t})}),V=function(e,t,n){return fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})},L=n(7),I=n(8),P=992,z={tablet:"@media (min-width: ".concat(601,"px)"),desktop:"@media (min-width: ".concat(P,"px)")},E=z.desktop,M=I.a.div(p||(p=Object(L.a)(["\n  background-color: #f9f9f9;\n  height: 100%;\n"]))),T=I.a.div(h||(h=Object(L.a)(["\n  z-index: 1;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 22px;\n  color: #f9f9f9;\n  background-color: #000000;\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n\n  a {\n    color: #ffffff;\n    text-decoration: none;\n  }\n"]))),R=I.a.p(j||(j=Object(L.a)(["\n  margin: 0;\n"]))),A=I.a.div(f||(f=Object(L.a)(["\n  width: 100%;\n  height: 42px;\n"]))),G=I.a.div(v||(v=Object(L.a)(["\n  width: 100%;\n  max-width: 700px;\n  margin: auto;\n  margin-top: 16px;\n\n  "," {\n    margin-bottom: 0;\n  }\n"])),E),U=I.a.div(g||(g=Object(L.a)(["\n  margin-bottom: 32px;\n  width: 100%;\n"]))),B=I.a.p(x||(x=Object(L.a)(["\n  font-family: 'Poppins', 'Roboto', 'Ariel';\n  margin: 0px;\n  margin-left: 16px;\n  margin-bottom: 8px;\n  font-size: 24px;\n  font-weight: bold;\n"]))),_=I.a.div(O||(O=Object(L.a)(["\n  margin-bottom: 60px;\n  text-align: center;\n"]))),F="#000000",Y=("0.1rem solid ".concat("#000000"),I.a.button(y||(y=Object(L.a)(["\n  box-shadow: none;\n  margin: 0;\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-radius: 5px;\n  width: 100%;\n\n  &:active {\n    box-shadow: none;\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),"#ffffff",F)),W=Object(I.a)(Y)(m||(m=Object(L.a)(["\n  height: 40px;\n  background-color: ",";\n  padding: 8px;\n  font-size: 16px;\n  text-transform: capitalize;\n  margin-top: 15px;\n"])),(function(e){return e.google?"#4285f4":F})),X=Object(I.a)(Y)(C||(C=Object(L.a)(["\n  height: 40px;\n  padding: 8px;\n  font-size: 16px;\n  text-transform: capitalize;\n  padding-left: 23px;\n  padding-right: 23px;\n  width: unset;\n"]))),H=Object(I.a)(Y)(w||(w=Object(L.a)(["\n  width: calc(100% - 32px);\n  background-color: #000000;\n  height: 50px;\n  font-size: 16px;\n  margin-bottom: 40px;\n  padding: 0;\n  margin-left: 16px;\n  margin-right: 16px;\n"])));var J,q,Z,$,K,Q=function(){var e=Object(o.f)();return Object(u.jsx)(H,{onClick:function(){e.push("/designer")},children:"N E W \xa0 D E S I G N"})},ee=I.a.div(J||(J=Object(L.a)(["\n  margin-left: 8px;\n  margin-right: 8px;\n  margin-top: 0px;\n  flex: 0 0 auto;\n"]))),te=I.a.div(q||(q=Object(L.a)(["\n  width: 100%;\n  background-color: #f0f0f0;\n  border-radius: 8px;\n\n  img {\n    width: 100%;\n  }\n"]))),ne=I.a.p(Z||(Z=Object(L.a)(["\n  color: #000000;\n  font-size: 22px;\n  margin-top: 9px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"]))),ae=I.a.p($||($=Object(L.a)(["\n  color: #000000;\n  font-size: 14px;\n  margin-top: 6px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"]))),re=I.a.p(K||(K=Object(L.a)(["\n  color: #777;\n  font-size: 14px;\n  margin-top: 6px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"])));var ie,ce=function(e){var t=e.props,n=t._id,a=t.title,r=t.configId,i=t.author,c=t.screenshot,s=Object(o.f)();return Object(u.jsxs)(ee,{onClick:function(){s.push("/designer/".concat(n))},children:[Object(u.jsx)(te,{children:Object(u.jsx)("img",{src:"api/assets/images/".concat(c),alt:"feature-design"})}),Object(u.jsx)(ne,{children:a}),Object(u.jsx)(ae,{children:r.modelName}),Object(u.jsx)(re,{children:i.firstName})]})},se=I.a.button(ie||(ie=Object(L.a)(["\n  border: none;\n  color: #ffffff;\n  border-radius: 5px;\n  background-color: #000000;\n  height: 44px;\n  font-size: 16px;\n  width: unset;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 25px;\n  padding-right: 25px;\n"])));var oe,le,ue,de,be,pe,he=function(){var e=Object(o.f)();return Object(u.jsx)(se,{onClick:function(){e.push("/designer")},children:"S T A R T \xa0 D E S I G N I N G"})},je=z.desktop,fe=I.a.div(oe||(oe=Object(L.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  height: unset;\n  margin-bottom: 35px;\n\n  "," {\n    height: 65vh;\n    margin-top: 15vh;\n    flex-direction: unset;\n    max-width: 1100px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n"])),je),ve=I.a.div(le||(le=Object(L.a)(["\n  margin-top: 0px;\n  margin-bottom: 30px;\n  padding-right: 0px;\n  text-align: center;\n  margin-left: 5%;\n  margin-right: 5%;\n  width: 90%;\n  height: 100%;\n\n  "," {\n    margin-top: unset;\n    margin-bottom: unset;\n    padding-right: unset;\n    text-align: unset;\n    width: 100%;\n  }\n"])),je),ge=I.a.p(ue||(ue=Object(L.a)(["\n  font-size: 30px;\n  margin-top: 30px;\n  font-weight: bold;\n  margin: 0;\n  margin-bottom: 25px;\n\n  "," {\n    font-size: 40px;\n    margin-top: 70px;\n  }\n"])),je),xe=I.a.p(de||(de=Object(L.a)(["\n  font-size: 17px;\n  line-height: 150%;\n  margin: 0;\n  margin-bottom: 30px;\n"]))),Oe=I.a.div(be||(be=Object(L.a)(["\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-top: 90px;\n  margin-bottom: 30px;\n  padding-left: 1px;\n  height: 100%;\n\n  "," {\n    width: 100%;\n    margin: unset;\n    margin-right: 5%;\n  }\n"])),je),ye=I.a.img(pe||(pe=Object(L.a)(["\n  max-width: 100%;\n  max-height: 100%;\n"])));var me,Ce,we,ke=function(){return Object(u.jsxs)(fe,{children:[Object(u.jsxs)(ve,{children:[Object(u.jsx)(ge,{children:"Create Something New"}),Object(u.jsx)(xe,{children:"Sole Composer gives you the ability to design and visualize one\u2011of\u2011a\u2011kind sneakers."}),Object(u.jsx)(he,{})]}),Object(u.jsx)(Oe,{children:Object(u.jsx)(ye,{src:"/sole-cover.png"})})]})},De=z.desktop,Se=I.a.div(me||(me=Object(L.a)(["\n  width: 100%;\n  margin-bottom: 16px;\n"]))),Ne=I.a.div(Ce||(Ce=Object(L.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 3px;\n  margin: 3px;\n\n  "," {\n    grid-template-columns: 1fr 1fr 1fr;\n    margin: 16px;\n  }\n"])),De),Ve=I.a.div(we||(we=Object(L.a)(["\n  width: 100%;\n  background-color: #f0f0f0;\n\n  img {\n    width: 100%;\n  }\n"])));var Le=function(e){var t=e.myDesigns;return Object(u.jsx)(Se,{children:Object(u.jsx)(Ne,{children:t.map((function(e,t){return Object(u.jsx)(s.b,{to:"/designer/".concat(e._id),className:"link-to-designer",children:Object(u.jsx)(Ve,{children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.screenshot),alt:"my-design-preview"})})},t)}))})})};var Ie=function(){var e=Object(a.useContext)(k.context),t=Object(a.useState)(),n=Object(l.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(),o=Object(l.a)(c,2),d=o[0],b=o[1];Object(a.useEffect)((function(){N("/api/featured","GET").then((function(e){return e.json()})).then((function(e){return i(e)})),e&&N("/api/outlines/mydesigns","GET").then((function(e){return e.json()})).then((function(e){return b(e)}))}),[e]);var p=r?r.featured.map((function(t,n){return Object(u.jsx)(ce,{props:t,userData:e},n)})):null;return Object(u.jsxs)(M,{children:[Object(u.jsxs)(T,{children:[Object(u.jsxs)(R,{children:[Object(u.jsx)("strong",{children:"Sole"})," Composer"]}),e?Object(u.jsx)(s.b,{to:"/profile",children:e.firstName}):Object(u.jsx)(s.b,{to:"/login",children:"Login"})]}),!e&&Object(u.jsx)(ke,{}),e&&Object(u.jsx)(A,{}),Object(u.jsxs)(G,{children:[r&&Object(u.jsxs)(U,{children:[Object(u.jsx)(B,{children:"FEATURED"}),Object(u.jsx)(S.a,{responsive:{0:{items:1.7},700:{items:3}},items:p})]}),e&&Object(u.jsx)(Q,{}),!e&&Object(u.jsx)(_,{children:Object(u.jsx)(s.b,{to:"/login",children:Object(u.jsx)(X,{children:"sign up"})})}),d&&Object(u.jsx)(B,{children:"MY DESIGNS"}),d&&Object(u.jsx)(Le,{myDesigns:d})]})]})},Pe=n(16),ze=n.n(Pe),Ee=n(19),Me=(n(195),n(27)),Te=n(337),Re=n(338),Ae=n(3);n(196);var Ge,Ue=function(){return Object(u.jsx)("div",{id:"loading-screen",children:Object(u.jsx)("div",{id:"loader"})})},Be=z.desktop,_e=I.a.div(Ge||(Ge=Object(L.a)(["\n  width: 100vw;\n  height: 100vw;\n  background-color: #f9f9f9;\n  color: #000;\n  flex: 0 0 auto;\n  overflow: hidden;\n\n  "," {\n    height: 100vh;\n    width: 100vh;\n    margin-left: 160px;\n  }\n"])),Be);function Fe(e){var t,n,r=e.design,i=e.texture,c=e.right,s=e.setCurrentPart,o=e.setCurrentShoe,l=e.alone,d=e.setLayersView,b=e.setCurrentLayer,p=e.setView,h=e.redMapCanvas,j=Object(a.useRef)(),f=Object(Te.a)("/api/assets/models/".concat(r.configData.source.model)).nodes,v=Object(Me.c)(Ae.TextureLoader,"/api/assets/designimages/".concat(r.configData.source[c?"aoMapRight":"aoMapLeft"]));v.flipY=!1;var g=function(e){if(e.delta<10){var t=Math.floor(1e3*e.uv.x),n=Math.floor(1e3*e.uv.y),a=function(e){switch(e){case 255:return 4;case 220:return 2;case 210:return 0;case 200:return 5;case 190:return 3;case 180:return 1;case 170:return 16;case 160:return 15;case 150:return 14;case 140:return 9;case 130:return 13;case 120:return 11;case 110:return 12;case 100:return 8;case 90:return 10;case 80:return 7;case 70:return 6;case 60:return 17}}(h.getContext("2d").getImageData(t,n,1,1).data[0]);(a||0===a)&&(d("LayersMain"),b(-1),p("Layers"),s(a),o(c?"right":"left"))}};return Object(u.jsx)("group",{ref:j,dispose:null,onPointerDown:function(e){return function(e){e.stopPropagation(),t=e.clientX,n=e.clientY}(e)},onPointerUp:function(e){return function(e){e.stopPropagation(),e.clientX>t-5&&e.clientX<t+5&&e.clientY>n-5&&e.clientY<n+5&&g(e)}(e)},children:Object(u.jsx)("mesh",{geometry:f.af1.geometry,rotation:[Math.PI/2,0,Math.PI/2],position:[0,-1,l?0:c?1.3:-1.3],scale:[c?.35:-.35,.35,.35],children:Object(u.jsx)("meshStandardMaterial",{aoMap:v,map:i})})})}var Ye,We,Xe,He,Je,qe=function(e){var t=e.design,n=e.rightTexture,r=e.leftTexture,i=e.texturesLoaded,c=e.setCurrentPart,s=e.setCurrentShoe,o=e.shoeVisibility,l=e.setLayersView,d=e.setCurrentLayer,b=e.setView,p=e.redMapCanvas,h=e.cameraReset,j=e.setCameraReset;function f(e){e.reset&&(Object(Me.d)().camera.position.set(5.5,1.5,5.5),j(!1));return null}return Object(u.jsxs)(_e,{id:"scene-container-id",children:[Object(u.jsxs)(Me.a,{camera:{fov:45},linear:!0,dpr:3,gl:{preserveDrawingBuffer:!0},children:[Object(u.jsx)(f,{reset:h}),Object(u.jsx)("ambientLight",{}),Object(u.jsxs)(a.Suspense,{fallback:null,children:[o.right&&Object(u.jsx)(Fe,{right:!0,design:t,texture:n,setCurrentPart:c,setCurrentShoe:s,alone:!o.left,setLayersView:l,setCurrentLayer:d,setView:b,redMapCanvas:p}),o.left&&Object(u.jsx)(Fe,{design:t,texture:r,setCurrentPart:c,setCurrentShoe:s,alone:!o.right,setLayersView:l,setCurrentLayer:d,setView:b,redMapCanvas:p})]}),Object(u.jsx)(Re.a,{minPolarAngle:Math.PI/4,maxPolarAngle:3*Math.PI/4,minDistance:4,maxDistance:12,enablePan:!1,enableDamping:!0})]}),!i&&Object(u.jsx)(Ue,{})]})},Ze=z.desktop,$e=I.a.div(Ye||(Ye=Object(L.a)(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  touch-action: none;\n  display: flex;\n  padding-bottom: 30px;\n\n  "," {\n    right: 0;\n    width: 375px;\n  }\n"])),Ze),Ke=I.a.div(We||(We=Object(L.a)(["\n  flex: 1 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  margin-left: 16px;\n"]))),Qe=I.a.div(Xe||(Xe=Object(L.a)(["\n  width: 70px;\n  flex: 0 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n"]))),et=n(18),tt=I.a.div(He||(He=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),nt=I.a.div(Je||(Je=Object(L.a)(["\n  width: 70px;\n  height: 70px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n\n  svg {\n    font-size: 26px;\n    background-color: ",";\n    color: ",";\n    padding: 8px;\n    border-radius: 5px;\n  }\n"])),(function(e){return e.selected?"#212121":"unset"}),(function(e){return e.selected?"#ffffff":"#212121"}));var at,rt,it,ct=function(e){var t=e.handleViewChange,n=e.view,a=function(e){t(n===e?"DesignInfo":e)};return Object(u.jsxs)(tt,{children:[Object(u.jsx)(nt,{selected:"Layers"===n,onClick:function(){return a("Layers")},children:Object(u.jsx)(et.n,{})}),Object(u.jsx)(nt,{selected:"ChangeBaseColor"===n,onClick:function(){return a("ChangeBaseColor")},children:Object(u.jsx)(et.o,{})}),Object(u.jsx)(nt,{selected:"DesignVisibility"===n,onClick:function(){return a("DesignVisibility")},children:Object(u.jsx)(et.m,{})}),Object(u.jsx)(nt,{selected:"DesignMenu"===n||"ChangeDesignName"===n,onClick:function(){return a("DesignMenu")},children:Object(u.jsx)(et.f,{})})]})},st=I.a.div(at||(at=Object(L.a)(["\n  padding-bottom: 10px;\n  padding-left: 20px;\n"]))),ot=I.a.p(rt||(rt=Object(L.a)(["\n  margin: 5px;\n  font-size: 26px;\n  color: #212121;\n"]))),lt=I.a.p(it||(it=Object(L.a)(["\n  margin: 5px;\n  font-size: 16px;\n  color: #212121;\n"])));var ut,dt,bt,pt,ht,jt,ft,vt,gt,xt,Ot,yt,mt,Ct=function(e){var t=e.design;return Object(u.jsxs)(st,{children:[Object(u.jsx)(ot,{children:t.title}),Object(u.jsx)(lt,{children:t.modelName})]})},wt=I.a.div(ut||(ut=Object(L.a)(["\n  background-color: #212121;\n  border-radius: 9px;\n"]))),kt=I.a.p(dt||(dt=Object(L.a)(["\n  font-size: 18px;\n  margin: 10px 14px;\n  color: #ffffff;\n"]))),Dt=I.a.div(bt||(bt=Object(L.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 6px;\n  row-gap: 6px;\n  margin: 6px;\n"]))),St=I.a.div(pt||(pt=Object(L.a)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  row-gap: 6px;\n  margin: 6px;\n"]))),Nt=I.a.div(ht||(ht=Object(L.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 6px;\n"]))),Vt=I.a.div(jt||(jt=Object(L.a)(["\n  height: 46px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),Lt=I.a.div(ft||(ft=Object(L.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),It=I.a.button(vt||(vt=Object(L.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 3px;\n  width: 100%;\n  height: 38px;\n  background-color: #212121;\n  color: ",";\n  padding: 0px;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#ffffff":"#bbbbbb"})),Pt=I.a.div(gt||(gt=Object(L.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n  margin-left: 6px;\n"]))),zt=I.a.button(xt||(xt=Object(L.a)(["\n  box-sizing: border-box;\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 3px;\n  width: 38px;\n  height: 38px;\n  background-color: ",";\n  padding: 0px;\n  font-size: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  svg {\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#343434":"#000000"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#ffffff":"#343434"})),Et=I.a.div(Ot||(Ot=Object(L.a)(["\n  margin: 6px;\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),Mt=I.a.p(yt||(yt=Object(L.a)(["\n  font-size: 16px;\n  margin: 0px;\n  padding: 0px;\n  color: #ffffff;\n"]))),Tt=I.a.button(mt||(mt=Object(L.a)(["\n  background-color: transparent;\n  border: none;\n  padding: 0px;\n\n  &:focus {\n    outline: none;\n  }\n\n  svg {\n    font-size: 16px;\n    color: #ffffff;\n  }\n"]))),Rt=function(e,t){var n=new FormData;return t?n.append("image",e,"newImage"):n.append("image",e),fetch("/api/assets/uploadimage",{method:"POST",body:n}).then((function(e){return e.json()}))},At=function(e){return new Promise((function(t){setTimeout((function(){var n=document.getElementById("scene-container-id").firstElementChild.firstElementChild,a=document.createElement("canvas");a.width=1024,a.height=1024,a.getContext("2d").drawImage(n,0,0,1024,1024);for(var r=a.toDataURL("image/png"),i=atob(r.split(",")[1]),c=[],s=0;s<i.length;s++)c.push(i.charCodeAt(s));var o=new Blob([new Uint8Array(c)],{type:"image/png"});o.name="theBlob",o.lastModifiedDate=new Date;var l=new File([o],e,{type:"image/png"});t(l)}),500)}))},Gt=function(e){var t=e.split("/");return t=t[t.length-1]};var Ut,Bt,_t,Ft=function(e){var t,n=e.handleViewChange,r=e.design,i=e.canSave,c=e.setCanSave,o=e.userData,d=e.setCameraReset,b=Object(a.useState)(!1),p=Object(l.a)(b,2),h=p[0],j=p[1];"object"===typeof o&&"_id"in o&&(t=o._id);var f=function(){var e=Object(Ee.a)(ze.a.mark((function e(){var t,n,a;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=26;break}if(c(!1),r.author){e.next=11;break}return j(!0),d(!0),e.next=7,At("newImage");case 7:t=e.sent,Rt(t,!0).then((function(e){var t=Gt(e.image),n={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};V("/api/outlines","POST",n).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))})),e.next=26;break;case 11:if(r.author!==o._id){e.next=20;break}return j(!0),d(!0),e.next=16,At(r.screenshot);case 16:n=e.sent,Rt(n,!1).then((function(e){var t=Gt(e.image),n={author:r.author,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};V("/api/outlines/".concat(r._id),"PUT",n),j(!1)})),e.next=26;break;case 20:return j(!0),d(!0),e.next=24,At(r.screenshot);case 24:a=e.sent,Rt(a,!0).then((function(e){var t=Gt(e.image),n={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};V("/api/outlines/","POST",n).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))}));case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h?Object(u.jsx)("div",{className:"design-preview-container",children:Object(u.jsx)("div",{id:"loading-small",children:Object(u.jsx)("div",{id:"loader"})})}):Object(u.jsxs)(wt,{children:[Object(u.jsxs)(Et,{children:[Object(u.jsx)(Mt,{children:r.title}),Object(u.jsx)(Tt,{onClick:function(){return n("ChangeDesignName")},children:Object(u.jsx)(et.p,{})})]}),Object(u.jsxs)(Dt,{children:[Object(u.jsx)(Lt,{onClick:function(){return d(!0)},children:Object(u.jsx)(It,{active:!0,children:"Reset Camera"})}),i&&o?Object(u.jsx)(Lt,{onClick:function(){f()},children:Object(u.jsx)(It,{active:!0,children:"Save"})}):Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{children:"Save"})}),o&&r.author===t?Object(u.jsx)(Lt,{onClick:function(){o&&o._id===r.author&&(fetch("/api/outlines/".concat(r._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}),window.location.href="/")},children:Object(u.jsx)(It,{active:!0,children:"Delete"})}):Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{children:"Delete"})}),Object(u.jsx)(Lt,{children:Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(It,{active:!0,children:"Exit"})})})]})]})},Yt=I.a.div(Ut||(Ut=Object(L.a)(["\n  width: 50%;\n  margin-left: auto;\n  background-color: #212121;\n  border-radius: 9px;\n"]))),Wt=n(13),Xt=I.a.div(Bt||(Bt=Object(L.a)(["\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),Ht=I.a.button(_t||(_t=Object(L.a)(["\n  border: ",";\n  border-radius: 4px;\n  width: 100%;\n  height: 38px;\n  background-color: ",";\n  color: ",";\n  padding: 0px;\n  width: 100%;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"1px solid #343434":"unset"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#ffffff":"#999999"}));var Jt=function(e){var t=e.setCurrentShoe,n=e.visibility,a=e.setVisibility,r=function(e){if("left"===e)if(n.left&&n.right){var r=Object(Wt.a)({},n);r.left=!1,a(r),t("right")}else if(n.left&&!n.right){var i=Object(Wt.a)({},n);i.left=!1,i.right=!0,a(i),t("right")}else{var c=Object(Wt.a)({},n);c.left=!0,a(c),t("left")}else if(n.left&&n.right){var s=Object(Wt.a)({},n);s.right=!1,a(s),t("left")}else if(!n.left&&n.right){var o=Object(Wt.a)({},n);o.right=!1,o.left=!0,a(o),t("left")}else{var l=Object(Wt.a)({},n);l.right=!0,a(l),t("right")}};return Object(u.jsxs)(St,{children:[Object(u.jsx)(Xt,{children:Object(u.jsx)(Ht,{active:n.left,onClick:function(){r("left")},children:"Left"})}),Object(u.jsx)(Xt,{children:Object(u.jsx)(Ht,{active:n.right,onClick:function(){r("right")},children:"Right"})})]})};var qt,Zt,$t,Kt=function(e){var t=e.currentShoe,n=e.setCurrentShoe,a=e.shoeVisibility,r=e.setShoeVisibility;return Object(u.jsx)(Yt,{children:Object(u.jsx)(wt,{children:Object(u.jsx)(Jt,{currentShoe:t,setCurrentShoe:n,visibility:a,setVisibility:r})})})},Qt=n(35),en=n(147),tn=I.a.div(qt||(qt=Object(L.a)(["\n  display: flex;\n  width: 260px;\n"]))),nn=I.a.div(Zt||(Zt=Object(L.a)(["\n  width: 100%;\n  display: flex;\n  flex: 0 1 auto;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),an=I.a.button($t||($t=Object(L.a)(["\n  width: 38px;\n  height: 38px;\n  margin-right: 3px;\n  border-radius: 4px;\n  flex: 0 0 auto;\n  background-color: ",";\n  border: none;\n\n  &:last-child {\n    margin-right: 0px;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.color}));var rn,cn,sn,on,ln,un,dn,bn,pn,hn=function(e){var t=e.colorsArray,n=e.handleColorChange;return Object(u.jsx)(Lt,{children:Object(u.jsx)(tn,{children:Object(u.jsx)(nn,{children:t.map((function(e,t){return Object(u.jsx)(an,{color:e,onClick:function(){return n(e)}},t)}))})})})},jn=n(77),fn=I.a.div(rn||(rn=Object(L.a)([""]))),vn=I.a.div(cn||(cn=Object(L.a)(["\n  height: 18px;\n  position: relative;\n  overflow: hidden;\n"]))),gn=I.a.div(sn||(sn=Object(L.a)(["\n  width: 100%;\n  height: 120px;\n  position: relative;\n  overflow: hidden;\n"]))),xn=I.a.div(on||(on=Object(L.a)(["\n  border-radius: 4px;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n\n  input {\n    box-sizing: border-box;\n    width: 86px;\n    height: 38px;\n    margin-right: 3px;\n    border: 1px solid #ffffff;\n    border-radius: 4px;\n    font-size: 14px;\n    padding-left: 8px;\n    padding-right: 0px;\n    box-shadow: none;\n    -webkit-appearance: none;\n    -webkit-border-radius: 4px;\n  }\n"]))),On=I.a.div(ln||(ln=Object(L.a)(["\n  width: 38px;\n  height: 38px;\n  box-sizing: border-box;\n  border-radius: 4px;\n  background-color: ",";\n"])),(function(e){return e.color})),yn=I.a.div(un||(un=Object(L.a)(["\n  box-sizing: border-box;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: #ffffff solid 2px;\n  transform: translate(-9px, -9px);\n"]))),mn=I.a.div(dn||(dn=Object(L.a)(["\n  box-sizing: border-box;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: #ffffff solid 2px;\n  transform: translate(-9px, 0px);\n"]))),Cn=Object(en.a)((function(e){var t=e.hex,n=e.hsl,a=e.hsv,r=e.onChange,i=e.handleColorChange,c=e.colorsArray;return Object(u.jsxs)(fn,{children:[Object(u.jsxs)(St,{children:[Object(u.jsx)(vn,{children:Object(u.jsx)(jn.Hue,{hsl:n,onChange:r,pointer:mn})}),Object(u.jsx)(gn,{children:Object(u.jsx)(jn.Saturation,{hsl:n,hsv:a,onChange:r,pointer:yn})}),Object(u.jsx)(hn,{colorsArray:c,handleColorChange:i})]}),Object(u.jsxs)(Dt,{children:[Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{active:!0,onClick:function(){return i("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random"})}),Object(u.jsx)(Lt,{children:Object(u.jsxs)(xn,{children:[Object(u.jsx)(jn.EditableInput,{value:t,onChange:r}),Object(u.jsx)(On,{color:t})]})})]})]})})),wn=I.a.div(bn||(bn=Object(L.a)(["\n  box-sizing: border-box;\n  background-color: #000000;\n  border-radius: 6px;\n  border: 1px solid #343434;\n  display: flex;\n  flex-direction: row;\n  padding: 3px;\n"]))),kn=I.a.button(pn||(pn=Object(L.a)(["\n  box-sizing: border-box;\n  font-size: 16px;\n  color: ",";\n  background-color: ",";\n  border: 1px solid;\n  border-radius: 3px;\n  border-color: ",";\n  width: 100%;\n  height: 38px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){return e.active?"#ffffff":"#999999"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#343434":"#000000"}));var Dn=function(e){var t=e.design,n=e.setDesign,r=e.setCanSave,i=e.handleUpdateBaseColor,c=e.currentShoe,s=e.setCurrentShoe,o=Object(a.useState)([]),d=Object(l.a)(o,2),b=d[0],p=d[1];Object(a.useEffect)((function(){p(function(){var e=[];for(var n in t.outlineData.parts){for(var a in t.outlineData.parts[n].right){var r=t.outlineData.parts[n].right[a].type;if("color"===r||"mask"===r){var i=t.outlineData.parts[n].right[a].color;e.includes(i)||e.push(i)}}for(var c in t.outlineData.parts[n].left){var s=t.outlineData.parts[n].left[c].type;if("color"===s||"mask"===s){var o=t.outlineData.parts[n].left[c].color;e.includes(o)||e.push(o)}}}for(var l in t.outlineData.overlays){for(var u in t.outlineData.overlays[l].right)if("color"===t.outlineData.overlays[l].right[u].type){var d=t.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var b in t.outlineData.overlays[l].left)if("color"===t.outlineData.overlays[l].left[b].type){var p=t.outlineData.overlays[l].left[b].color;e.includes(p)||e.push(p)}}var h=t.outlineData.baseColors.right;e.includes(h)||e.push(h);var j=t.outlineData.baseColors.left;return e.includes(j)||e.push(j),e}())}),[t,p]);var h=Object(a.useState)(t.outlineData.baseColors.left===t.outlineData.baseColors.right?"both":c),j=Object(l.a)(h,2),f=j[0],v=j[1],g=Object(a.useState)(t.outlineData.baseColors[c]),x=Object(l.a)(g,2),O=x[0],y=x[1],m=function(e){var t=e.hex||e;y(t)},C=function(e){v(e),"right"!==e&&"left"!==e||(s(e),y(t.outlineData.baseColors[e]))};return Object(u.jsxs)(wt,{children:[Object(u.jsxs)(Nt,{children:[Object(u.jsx)(Vt,{children:Object(u.jsx)(kt,{children:"Base Color"})}),Object(u.jsx)(Pt,{children:Object(u.jsx)(zt,{active:!0,onClick:function(){return function(){var e=Object(Qt.cloneDeep)(t);"left"===f?e.outlineData.baseColors.left=O:"right"===f?e.outlineData.baseColors.right=O:"both"===f&&(e.outlineData.baseColors.left=O,e.outlineData.baseColors.right=O),r(!0),n(e),i(e)}()},children:Object(u.jsx)(et.g,{})})})]}),Object(u.jsx)(St,{children:Object(u.jsxs)(wn,{children:[Object(u.jsx)(kn,{active:"left"===f,onClick:function(){C("left")},children:"Left"}),Object(u.jsx)(kn,{active:"both"===f,onClick:function(){C("both")},children:"Both"}),Object(u.jsx)(kn,{active:"right"===f,onClick:function(){C("right")},children:"Right"})]})}),Object(u.jsx)(Cn,{colorsArray:b,color:O,onChangeComplete:m,handleColorChange:m})]})};var Sn=function(e){var t=e.props,n=t.design,a=t.currentPartName,r=t.handleAddLayer,i=t.setLayersView;return Object(u.jsxs)(wt,{children:[Object(u.jsx)(kt,{children:"Select Layer Type"}),Object(u.jsxs)(St,{children:[n.configData.layerTypes[a].types.map((function(e,t){return Object(u.jsx)(Lt,{children:"Mask"===e?Object(u.jsx)(It,{active:!0,onClick:function(){i("MaskTypes")},children:e}):"Graphic"===e?Object(u.jsx)(It,{active:!0,onClick:function(){i("GraphicPicker")},children:e}):Object(u.jsx)(It,{active:!0,onClick:function(){r(e),i("LayersMain")},children:e})},t)})),Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{active:!0,onClick:function(){return i("LayersMain")},children:"Cancel"})})]})]})},Nn=function(e){var t=e.split(/(?=[A-Z])/).join(" ");return t.charAt(0).toUpperCase()+t.substr(1)};var Vn,Ln,In,Pn,zn=function(e){var t=e.props,n=t.currentLayer,r=t.currentPartName,i=t.design,c=t.handleChangeManager,s=t.setLayersView,o=t.setCanSave,d=t.currentShoe,b=Object(a.useState)("#ffffaa"),p=Object(l.a)(b,2),h=p[0],j=p[1],f=Object(a.useState)([]),v=Object(l.a)(f,2),g=v[0],x=v[1];Object(a.useEffect)((function(){x(function(){var e=[];for(var t in i.outlineData.parts){for(var n in i.outlineData.parts[t].right){var a=i.outlineData.parts[t].right[n].type;if("color"===a||"mask"===a){var r=i.outlineData.parts[t].right[n].color;e.includes(r)||e.push(r)}}for(var c in i.outlineData.parts[t].left){var s=i.outlineData.parts[t].left[c].type;if("color"===s||"mask"===s){var o=i.outlineData.parts[t].left[c].color;e.includes(o)||e.push(o)}}}for(var l in i.outlineData.overlays){for(var u in i.outlineData.overlays[l].right)if("color"===i.outlineData.overlays[l].right[u].type){var d=i.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var b in i.outlineData.overlays[l].left)if("color"===i.outlineData.overlays[l].left[b].type){var p=i.outlineData.overlays[l].left[b].color;e.includes(p)||e.push(p)}}var h=i.outlineData.baseColors.right;e.includes(h)||e.push(h);var j=i.outlineData.baseColors.left;return e.includes(j)||e.push(j),e}()),j("outerOverlay"===r||"innerOverlay"===r?i.outlineData.overlays[r][d][n].color:i.outlineData.parts[r][d][n].color)}),[i,r,n,x,d]);var O=function(e){o(!0);var t=e.hex||e;j(e),c({type:"color-changed",partName:r,layerIndex:n,newColor:t})};return Object(u.jsxs)(wt,{children:[Object(u.jsxs)(Nt,{children:[Object(u.jsx)(Vt,{children:Object(u.jsx)(kt,{children:Nn(r)})}),Object(u.jsx)(Pt,{children:Object(u.jsx)(zt,{active:!0,onClick:function(){return s("LayersMain")},children:Object(u.jsx)(et.g,{})})})]}),Object(u.jsx)(Cn,{color:h,colorsArray:g,onChangeComplete:O,handleColorChange:O})]})},En=(n(328),I.a.div(Vn||(Vn=Object(L.a)(["\n  height: 300px;\n  position: relative;\n  margin: 6px;\n"])))),Mn=I.a.div(Ln||(Ln=Object(L.a)(["\n  transform: ",";\n"])),(function(e){return e.mirror?"scaleX(-1)":"unset"})),Tn=I.a.button(In||(In=Object(L.a)(["\n  background-color: #00000077;\n  color: #ffffff;\n  width: 40px;\n  height: 40px;\n  border: none;\n  margin: auto;\n  border-radius: 50px;\n  padding: 0px;\n  font-size: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  &:focus {\n    outline: none;\n  }\n"]))),Rn=I.a.div(Pn||(Pn=Object(L.a)(["\n  position: absolute;\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: grid;\n  grid-template-columns: 1fr 3fr 1fr 3fr 1fr;\n  grid-template-rows: 1fr 3fr 1fr 3fr 1fr;\n  z-index: 1;\n  grid-template-areas:\n    'counter . up . clock'\n    '. . . . .'\n    'left . . . right'\n    '. . . . .'\n    'compress . down . expand';\n"])));var An=function(e){var t=e.props,n=t.currentLayer,r=t.currentPartName,i=t.graphicVisualCanvas,c=t.handleChangeManager,s=t.handleUpdateGraphicVisualCanvas,o=t.setLayersView,l=t.setCanSave,d=t.currentShoe,b=function(e,t){l(!0),c({type:"graphic-moved",partName:r,layerIndex:n,direction:e,distance:t})};return Object(a.useEffect)((function(){!function(){var e=document.getElementById("graphic-visual-container");e.innerHTML="",e.appendChild(i)}(),s(r)}),[]),Object(u.jsxs)(wt,{children:[Object(u.jsxs)(En,{children:[Object(u.jsxs)(Rn,{children:[Object(u.jsx)(Tn,{id:"up-button",onClick:function(){return b("vert",-30)},children:Object(u.jsx)(et.d,{})}),Object(u.jsx)(Tn,{id:"down-button",onClick:function(){return b("vert",30)},children:Object(u.jsx)(et.a,{})}),Object(u.jsx)(Tn,{id:"left-button",onClick:function(){return b("hor",-30)},children:Object(u.jsx)(et.b,{})}),Object(u.jsx)(Tn,{id:"right-button",onClick:function(){return b("hor",30)},children:Object(u.jsx)(et.c,{})}),Object(u.jsx)(Tn,{id:"scale-up-button",onClick:function(){return b("scale",1.1)},children:Object(u.jsx)(et.e,{})}),Object(u.jsx)(Tn,{id:"scale-down-button",onClick:function(){return b("scale",.9)},children:Object(u.jsx)(et.l,{})}),Object(u.jsx)(Tn,{id:"clockwise-button",onClick:function(){return b("rotate",5)},children:Object(u.jsx)(et.r,{})}),Object(u.jsx)(Tn,{id:"counterclockwise-button",onClick:function(){return b("rotate",-5)},children:Object(u.jsx)(et.t,{})})]}),Object(u.jsx)(Mn,{id:"graphic-visual-container",mirror:"left"===d})]}),Object(u.jsxs)(Dt,{children:[Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{onClick:function(){return b("reset",0)},children:"Reset"})}),Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{onClick:function(){return o("LayersMain")},children:"Done"})})]})]})};n(329);var Gn,Un,Bn,_n,Fn,Yn,Wn,Xn,Hn,Jn,qn,Zn,$n,Kn=function(e){var t=e.design,n=e.currentPart,a=e.setCurrentPart,r=e.setCurrentLayer,i=e.setLayersView,c=t.configData.partsArray.length,s=t.configData.partsArray,o=function(e){a(0===n&&e<0?c-1:n===c-1&&e>0?0:n+e)};return Object(u.jsx)("div",{className:"part-selector-container",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"change-part-button",onClick:function(){o(-1),r(-1)},children:Object(u.jsx)(et.i,{})}),Object(u.jsx)("button",{className:"partname-button",onClick:function(){i("PartList")},children:Nn(s[n])}),Object(u.jsx)("button",{className:"change-part-button",onClick:function(){o(1),r(-1)},children:Object(u.jsx)(et.j,{})})]})})},Qn=I.a.div(Gn||(Gn=Object(L.a)([""]))),ea=I.a.div(Un||(Un=Object(L.a)(["\n  height: 3px;\n  background-color: #000000;\n  border-top: 1px solid #343434;\n  border-bottom: 1px solid #343434;\n  border-right: none;\n  border-left: none;\n"]))),ta=I.a.div(Bn||(Bn=Object(L.a)(["\n  margin: 6px;\n  display: flex;\n  justify-content: space-between;\n"]))),na=I.a.div(_n||(_n=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),aa=I.a.p(Fn||(Fn=Object(L.a)(["\n  font-size: 16px;\n  color: #ffffff;\n  margin: 0px;\n  padding-left: 6px;\n"]))),ra=I.a.div(Yn||(Yn=Object(L.a)(["\n  display: flex;\n\n  svg {\n    color: #ffffff;\n  }\n"]))),ia=I.a.div(Wn||(Wn=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 140px;\n  margin: 6px;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),ca=I.a.div(Xn||(Xn=Object(L.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n"]))),sa=I.a.div(Hn||(Hn=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]))),oa=I.a.div(Jn||(Jn=Object(L.a)(["\n  height: 40px;\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 3px;\n  font-size: 16px;\n  text-transform: capitalize;\n  overflow: hidden;\n"]))),la=I.a.div(qn||(qn=Object(L.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  background-color: ",";\n  color: ",";\n  justify-content: center;\n  border: ",";\n  border-radius: 4px;\n"])),(function(e){return e.active?"#EEEEEE":"#212121"}),(function(e){return e.active?"#000000":"#EEEEEE"}),(function(e){return e.active?"1px solid #EEEEEE":"1px solid #343434"})),ua=I.a.p(Zn||(Zn=Object(L.a)(["\n  margin: 0px;\n  padding-left: 10px;\n"]))),da=I.a.div($n||($n=Object(L.a)(["\n  width: 40px;\n  margin-right: 3px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 4px;\n  background-color: #212121;\n"])));n(330);var ba=function(e){var t,n=e.props,a=n.allLayers,r=n.currentPart,i=n.design,c=n.currentLayer,s=n.numberOfLayers,o=n.setCurrentLayer,l=n.setCurrentPart,d=n.setLayersView,b=n.handleDeleteLayer,p=n.handleEditLayer,h=n.handleMoveLayer,j=function(e,t){-1!==e&&(-1===t?0!==e&&h(e,t):e!==s-1&&h(e,t))};return Object(u.jsxs)(Qn,{children:[Object(u.jsx)(Kn,{design:i,currentPart:r,setCurrentPart:l,setCurrentLayer:o,setLayersView:d}),Object(u.jsx)(ea,{}),Object(u.jsxs)(ta,{children:[Object(u.jsx)(na,{children:Object(u.jsx)(aa,{children:"Layers"})}),Object(u.jsxs)(ra,{children:[Object(u.jsx)(Pt,{children:Object(u.jsx)(zt,{active:-1!==c&&"overlay"!==(null===a||void 0===a||null===(t=a[c])||void 0===t?void 0:t.type),onClick:function(){var e;-1!==(e=c)&&"overlay"!==a[e].type&&b(e)},children:Object(u.jsx)(et.s,{})})}),Object(u.jsx)(Pt,{children:Object(u.jsx)(zt,{active:-1!==c&&s-1!==c,onClick:function(){return j(c,1)},children:Object(u.jsx)(et.k,{})})}),Object(u.jsx)(Pt,{children:Object(u.jsx)(zt,{active:-1!==c&&0!==c,onClick:function(){return j(c,-1)},children:Object(u.jsx)(et.h,{})})}),Object(u.jsx)(Pt,{children:Object(u.jsx)(zt,{active:!0,onClick:function(){return d("AddLayerType")},children:Object(u.jsx)(et.q,{})})})]})]}),Object(u.jsx)(ia,{id:"layers-box",onClick:function(e){return function(e){e.preventDefault(),"layers-box"===e.target.id&&o(-1)}(e)},children:Object(u.jsx)(sa,{children:Object(u.jsx)(ca,{children:a.map((function(e,t){return Object(u.jsxs)(oa,{onClick:function(){t===c?p(t,e):o(t)},children:["color"===e.type?Object(u.jsx)(da,{style:{backgroundColor:e.color}}):"graphic"===e.type?Object(u.jsx)(da,{children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):"mask"===e.type?Object(u.jsx)(da,{children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):Object(u.jsx)(da,{children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.source,"Mask.png"),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}),Object(u.jsx)(la,{active:t===c,children:Object(u.jsx)(ua,{children:"overlay"===e.type?Nn(e.source).toLowerCase():e.type})})]},t)}))})})})]})};var pa,ha,ja,fa,va=function(e){var t=e.props,n=t.design,a=t.currentPartName,r=t.handleAddMaskLayer,i=t.setLayersView;return Object(u.jsxs)(wt,{children:[Object(u.jsx)(kt,{children:"Select Mask Type"}),Object(u.jsxs)(St,{children:[n.configData.maskTypes[a].map((function(e,t){return Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{active:!0,onClick:function(){r(e[0],e[1]),i("LayersMain")},children:e[0]})},t)})),Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{active:!0,onClick:function(){return i("LayersMain")},children:"Cancel"})})]})]})},ga=I.a.div(pa||(pa=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 220px;\n  margin: 6px;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n"]))),xa=I.a.div(ha||(ha=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]))),Oa=I.a.div(ja||(ja=Object(L.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 6px;\n  row-gap: 6px;\n"]))),ya=I.a.button(fa||(fa=Object(L.a)(["\n  box-sizing: border-box;\n  color: ",";\n  background-color: ",";\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 4px;\n  margin: 3px;\n  height: 40px;\n  font-size: 16px;\n  text-transform: capitalize;\n  overflow: hidden;\n"])),(function(e){return e.active?"#ffffff":"#999999"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#343434":"#000000"}));var ma=function(e){var t=e.props,n=t.design,a=t.setCurrentPart,r=t.setLayersView,i=t.setCurrentLayer,c=t.currentPartName;return Object(u.jsxs)(wt,{children:[Object(u.jsx)(kt,{children:"Select Part"}),Object(u.jsx)(ga,{children:Object(u.jsx)(xa,{children:Object(u.jsx)(Oa,{children:n.configData.partsArray.map((function(e,t){return Object(u.jsx)(ya,{active:c===e,onClick:function(){i(-1),a(t),r("LayersMain")},children:e},t)}))})})}),Object(u.jsx)(St,{children:Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{active:!0,onClick:function(){return r("LayersMain")},children:"Back"})})})]})};n(331),n(332);var Ca=function(e){var t=e.graphicsArray,n=e.handleAddGraphicLayer;return Object(u.jsx)("div",{className:"current-graphics-container",children:t.map((function(e,t){return Object(u.jsx)("div",{className:"current-graphics-item",onClick:function(){return n(e)},children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e),alt:"used-already"})},t)}))})};var wa={AddLayerType:Sn,ColorPicker:zn,GraphicEditor:An,LayersMain:ba,MaskTypes:va,PartList:ma,GraphicPicker:function(e){var t=e.props,n=t.setLayersView,r=t.handleAddLayer,i=t.design,c=Object(a.useState)(!1),s=Object(l.a)(c,2),o=s[0],d=s[1],b=Object(a.useState)(!1),p=Object(l.a)(b,2),h=p[0],j=p[1],f=Object(a.useState)(),v=Object(l.a)(f,2),g=v[0],x=v[1];Object(a.useEffect)((function(){x(function(){var e=["red-apple.png"];for(var t in i.outlineData.parts){for(var n in i.outlineData.parts[t].right)if("graphic"===i.outlineData.parts[t].right[n].type){var a=i.outlineData.parts[t].right[n].link;e.includes(a)||e.push(a)}for(var r in i.outlineData.parts[t].left)if("graphic"===i.outlineData.parts[t].left[r].type){var c=i.outlineData.parts[t].left[r].link;e.includes(c)||e.push(c)}}for(var s in i.outlineData.overlays){for(var o in i.outlineData.overlays[s].right)if("graphic"===i.outlineData.overlays[s].right[o].type){var l=i.outlineData.overlays[s].right[o].link;e.includes(l)||e.push(l)}for(var u in i.outlineData.overlays[s].left)if("graphic"===i.outlineData.overlays[s].left[u].type){var d=i.outlineData.overlays[s].left[u].link;e.includes(d)||e.push(d)}}return e[0]?e:null}())}),[i]);var O=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t.target.files[0].size/1024/1024).toFixed(4)<2)){e.next=8;break}return j(!0),n=t.target.files[0],e.next=6,Rt(n,!0).then((function(e){var t=Gt(e.image);y(t)}));case 6:e.next=9;break;case 8:d(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){r("Graphic",e),n("LayersMain")};return h?Object(u.jsx)("div",{className:"upload-image-container",children:Object(u.jsx)("div",{id:"loading-small",children:Object(u.jsx)("div",{id:"loader"})})}):Object(u.jsxs)(wt,{children:[Object(u.jsx)(kt,{children:"Graphics"}),g&&Object(u.jsx)("div",{className:"used-graphics",children:Object(u.jsx)(Ca,{graphicsArray:g,handleAddGraphicLayer:y})}),Object(u.jsx)("div",{className:"upload-image-input",children:Object(u.jsxs)("label",{htmlFor:"image-input-id",className:"upload-image-label",children:[Object(u.jsx)("input",{onChange:function(e){return O(e)},id:"image-input-id",type:"file",name:"myImage",accept:"image/png, image/jpeg, .png, .jpg"}),"Upload"]})}),o&&Object(u.jsx)("div",{className:"file-size-warning",children:Object(u.jsx)("p",{children:"file must be less that 2MB."})}),Object(u.jsx)(St,{children:Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{active:!0,onClick:function(){return n("LayersMain")},children:"Cancel"})})})]})}};n(333);var ka,Da,Sa=function(e){var t=e.layersView,n=e.setLayersView,a=e.currentLayer,r=e.currentPart,i=e.design,c=e.graphicVisualCanvas,s=e.handleChangeManager,o=e.handleUpdateGraphicVisualCanvas,l=e.handleViewChange,d=e.setCurrentLayer,b=e.setCurrentPart,p=e.setCanSave,h=e.currentShoe,j=Object.keys(i.configData.partsObject)[r],f="parts";"outerOverlay"!==j&&"innerOverlay"!==j||(f="overlays");var v=i.outlineData[f][j][h].length,g=i.outlineData[f][j][h],x=wa[t],O={allLayers:g,currentPart:r,currentLayer:a,currentPartName:j,design:i,graphicVisualCanvas:c,handleAddLayer:function(e,t){p(!0),s(Object(Wt.a)({type:"layer-added",partName:j,layerType:e},t&&{fileName:t})),d(v)},handleAddMaskLayer:function(e,t){p(!0),s({type:"layer-added",partName:j,layerType:"Mask",maskType:e,maskLink:t}),d(v)},handleMoveLayer:function(e,t){p(!0),s({type:"layer-moved",partName:j,layerIndex:e,direction:t}),d(a+t)},handleEditLayer:function(e,t){"color"===t.type?(d(e),n("ColorPicker")):"graphic"===t.type?(d(e),n("GraphicEditor")):"mask"===t.type?(d(e),n("ColorPicker")):"overlay"===t.type&&(b(i.configData.partsArray.indexOf(t.source)),d(-1))},handleDeleteLayer:function(e){p(!0),s({type:"layer-deleted",partName:j,layerIndex:e}),d(-1)},handleChangeManager:s,handleUpdateGraphicVisualCanvas:o,handleViewChange:l,setCurrentLayer:d,setCurrentPart:b,setLayersView:n,numberOfLayers:v,setCanSave:p,currentShoe:h,layersView:t};return Object(u.jsx)(wt,{children:Object(u.jsx)(x,{props:O})})},Na=I.a.p(ka||(ka=Object(L.a)(["\n  color: #ffffff;\n  margin: 16px;\n"]))),Va=I.a.input(Da||(Da=Object(L.a)(["\n  display: block;\n  font-size: 18px;\n  outline: none;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: none;\n  border-radius: 3px;\n  height: 38px;\n  padding-left: 10px;\n"])));var La=function(e){var t=e.handleViewChange,n=e.design,a=e.setDesign,r=e.setCanSave;return Object(u.jsxs)(wt,{children:[Object(u.jsx)(Na,{children:"Design Name"}),Object(u.jsxs)(St,{children:[Object(u.jsx)(Lt,{children:Object(u.jsx)(Va,{type:"text",id:"design-name-input",defaultValue:n.title})}),Object(u.jsx)(Lt,{children:Object(u.jsx)(It,{active:!0,onClick:function(){return function(){var e=Object(Qt.cloneDeep)(n),i=Object(Qt.startCase)(document.getElementById("design-name-input").value);e.title=i,r(!0),a(e),t("DesignMenu")}()},children:"Done"})})]})]})};var Ia=function(e){var t,n=e.design,r=e.setDesign,i=e.graphicVisualCanvas,c=e.handleUpdateGraphicVisualCanvas,s=e.handleChangeManager,o=e.handleUpdateBaseColor,d=e.userData,b=e.currentPart,p=e.setCurrentPart,h=e.currentShoe,j=e.setCurrentShoe,f=e.shoeVisibility,v=e.setShoeVisibility,g=e.view,x=e.setView,O=e.layersView,y=e.setLayersView,m=e.currentLayer,C=e.setCurrentLayer,w=e.setCameraReset,k=Object(a.useState)(!1),D=Object(l.a)(k,2),S=D[0],N=D[1],V=function(e){x(e)};return"DesignMenu"===g?t=Object(u.jsx)(Ft,{handleViewChange:V,design:n,setDesign:r,canSave:S,setCanSave:N,userData:d,currentShoe:h,setCurrentShoe:j,shoeVisibility:f,setShoeVisibility:v,setCameraReset:w}):"Layers"===g?t=Object(u.jsx)(Sa,{layersView:O,setLayersView:y,handleViewChange:V,design:n,setDesign:r,currentShoe:h,currentPart:b,setCurrentPart:p,currentLayer:m,setCurrentLayer:C,graphicVisualCanvas:i,handleUpdateGraphicVisualCanvas:c,handleChangeManager:s,setCanSave:N}):"ChangeDesignName"===g?t=Object(u.jsx)(La,{handleViewChange:V,design:n,setDesign:r,setCanSave:N}):"ChangeBaseColor"===g?t=Object(u.jsx)(Dn,{handleViewChange:V,design:n,setDesign:r,setCanSave:N,handleUpdateBaseColor:o,currentShoe:h,setCurrentShoe:j}):"DesignInfo"===g?t=Object(u.jsx)(Ct,{design:n}):"DesignVisibility"===g&&(t=Object(u.jsx)(Kt,{currentShoe:h,setCurrentShoe:j,shoeVisibility:f,setShoeVisibility:v})),Object(u.jsxs)($e,{children:[Object(u.jsx)(Ke,{children:t}),Object(u.jsx)(Qe,{children:Object(u.jsx)(ct,{handleViewChange:V,view:g})})]})},Pa=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,v,g,x,O;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.setTexturesLoaded,a=t.design,r=t.graphicVisualCanvas,i=t.rightInnerOverlayCanvas,c=t.rightOuterOverlayCanvas,s=t.rightTexture,o=t.rightTextureCanvas,l=t.leftInnerOverlayCanvas,u=t.leftOuterOverlayCanvas,d=t.leftTexture,b=t.leftTextureCanvas,p=t.rightCanvasObjectRef,h=t.rightOverlaysCanvasObjectRef,j=t.rightBaseColorCanvasObjectRef,f=t.leftBaseColorCanvasObjectRef,v=t.leftCanvasObjectRef,g=t.leftOverlaysCanvasObjectRef,e.next=3,Fa({design:a,type:"overlaysCanvasObject",currentShoe:"right"});case 3:return h.current=e.sent,e.next=6,Fa({design:a,type:"overlaysCanvasObject",currentShoe:"left"});case 6:return g.current=e.sent,Ya({design:a,overlayCanvasObject:h.current,overlayCanvas:c,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),Ya({design:a,overlayCanvasObject:g.current,overlayCanvas:u,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),Ya({design:a,overlayCanvasObject:h.current,overlayCanvas:i,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),Ya({design:a,overlayCanvasObject:g.current,overlayCanvas:l,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),e.next=13,Fa({design:a,type:"partsCanvasObject",overlays:[c,i],currentShoe:"right"});case 13:return p.current=e.sent,e.next=16,Fa({design:a,type:"partsCanvasObject",overlays:[u,l],currentShoe:"left"});case 16:return v.current=e.sent,e.next=19,Fa({design:a,type:"baseColorCanvasObject",currentShoe:"right"});case 19:return j.current=e.sent,e.next=22,Fa({design:a,type:"baseColorCanvasObject",currentShoe:"left"});case 22:return f.current=e.sent,e.next=25,ar({design:a,canvasObject:p.current,baseColorCanvasObject:j.current});case 25:return x=e.sent,e.next=28,ar({design:a,canvasObject:v.current,baseColorCanvasObject:f.current});case 28:O=e.sent,o.getContext("2d").drawImage(x,0,0),s.needsUpdate=!0,b.getContext("2d").drawImage(O,0,0),d.needsUpdate=!0,n(!0);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),za=function(e){var t=new Ae.CanvasTexture(e);return t.flipY=!1,t},Ea=function(e){var t=e.design;return new Promise((function(e){var n=t.configData.canvasSize,a=document.createElement("canvas");a.width=n,a.height=n;var r=a.getContext("2d");!function t(){null!==r&&"object"===typeof a?(r.fillStyle="#ffffff",r.fillRect(0,0,n,n),e(a)):setTimeout(t,100)}()}))},Ma=function(e){var t=e.design;return new Promise((function(e){var n=t.configData.canvasSize,a=document.createElement("canvas");a.width=n,a.height=n;var r=a.getContext("2d"),i=new Image;i.src="/api/assets/designimages/".concat(t.configData.source.redMap),i.onload=function(){!function t(){null!==r&&"object"===typeof a?(r.drawImage(i,0,0,1e3,1e3),e(a)):setTimeout(t,100)}()}}))},Ta=function(e){var t=e.design.configData.canvasSize,n=document.createElement("canvas");return n.id="graphic-visual-canvas",n.width=t,n.height=t,n},Ra=function(e){var t=e.design,n=e.layer,a=e.partName;return new Promise((function(e){var r=t.configData.partsObject[a].mask,i=n.color,c=t.configData.canvasSize,s=document.createElement("canvas");s.width=c,s.height=c;var o=s.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof s?(o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=i,o.fillRect(0,0,c,c),e(s)):setTimeout(t,100)}()}}))},Aa=function(e){var t=e.design,n=e.layer,a=e.partName,r=e.currentShoe;return new Promise((function(e){var i=t.configData.partsObject[a].mask,c=n.link,s=n.x,o=n.y,l=n.scale,u=n.rotation,d=t.configData.canvasSize,b=document.createElement("canvas");b.width=d,b.height=d;var p=b.getContext("2d"),h=new Image;h.src="/api/assets/images/".concat(c),h.onload=function(){var t=h.width,n=h.height,a=Math.round(Math.sqrt(t*t+n*n)),c=document.createElement("canvas");c.id="pythagorean-canvas",c.width=a,c.height=a;var j=c.getContext("2d");!function t(){if(null!==j&&"object"===typeof c&&null!==p&&"object"===typeof b){j.translate(c.width/2,c.height/2),j.rotate(u*Math.PI/180),j.drawImage(h,h.width/-2,h.height/-2,h.width,h.height);var n=new Image;n.src="/api/assets/designimages/".concat(i),n.onload=function(){p.drawImage(n,0,0,d,d),p.globalCompositeOperation="source-in";var t=s+(d-d*l)/2,a=o+(d-d*l)/2,i=d*l;"left"===r&&(p.scale(-1,1),p.translate(-d,0)),p.drawImage(c,t,a,i,i),e(b)}}else setTimeout(t,100)}()}}))},Ga=function(e){var t=e.design,n=e.layer,a=e.currentShoe;return new Promise((function(e){var r=n.link,i=n.color,c=t.configData.canvasSize,s=document.createElement("canvas");s.width=c,s.height=c;var o=s.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof s?("left"===a&&"heelWingLogoMask.png"===r&&(o.scale(-1,1),o.translate(-c,0)),o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=i,o.fillRect(0,0,c,c),e(s)):setTimeout(t,100)}()}}))},Ua=function(e){var t=e.design,n=e.layer,a=e.partName,r=e.overlayCanvas;return new Promise((function(e){var i=t.configData.partsObject[a].mask,c=n.source,s=t.configData.translations[c][a],o=s.x,l=s.y,u=s.scale,d=s.rotation,b=t.configData.canvasSize,p=document.createElement("canvas");p.width=b,p.height=b;var h=p.getContext("2d"),j=new Image;j.src="/api/assets/designimages/".concat(i),j.onload=function(){!function t(){null!==h&&"object"===typeof p?(h.drawImage(j,0,0,b,b),h.globalCompositeOperation="source-in",h.translate(b*o,b*l),h.rotate(d),h.drawImage(r,0,0,b*u,b*u),e(p)):setTimeout(t,100)}()}}))},Ba=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i,c,s,o,l;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.design,a=t.designLayers,r=t.partName,i=t.overlays,c=t.currentShoe,s=[],e.t0=ze.a.keys(a);case 3:if((e.t1=e.t0()).done){e.next=44;break}if(o=e.t1.value,"color"!==a[o].type){e.next=12;break}return e.next=8,Ra({design:n,layer:a[o],partName:r});case 8:l=e.sent,s.push(l),e.next=42;break;case 12:if("graphic"!==a[o].type){e.next=20;break}return e.t2=s,e.next=16,Aa({design:n,layer:a[o],partName:r,currentShoe:c});case 16:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=42;break;case 20:if("mask"!==a[o].type){e.next=28;break}return e.t4=s,e.next=24,Ga({design:n,layer:a[o],currentShoe:c});case 24:e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.next=42;break;case 28:if("overlay"!==a[o].type){e.next=42;break}if("outerOverlay"!==a[o].source){e.next=37;break}return e.t6=s,e.next=33,Ua({design:n,layer:a[o],partName:r,overlayCanvas:i[0]});case 33:e.t7=e.sent,e.t6.push.call(e.t6,e.t7),e.next=42;break;case 37:return e.t8=s,e.next=40,Ua({design:n,layer:a[o],partName:r,overlayCanvas:i[1]});case 40:e.t9=e.sent,e.t8.push.call(e.t8,e.t9);case 42:e.next=3;break;case 44:return e.abrupt("return",{layers:s});case 45:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_a=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.design,a=t.partName,r=t.currentShoe,e.next=3,Ra({design:n,layer:{color:n.outlineData.baseColors[r]},partName:a});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fa=function(e){var t=e.design,n=e.type,a=e.overlays,r=e.currentShoe;return new Promise((function(e,i){var c={};(function(){var i=Object(Ee.a)(ze.a.mark((function i(){var s,o,l;return ze.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("partsCanvasObject"!==n){i.next=11;break}i.t0=ze.a.keys(t.outlineData.parts);case 2:if((i.t1=i.t0()).done){i.next=9;break}return s=i.t1.value,i.next=6,Ba({design:t,designLayers:t.outlineData.parts[s][r],partName:s,overlays:a,currentShoe:r});case 6:c[s]=i.sent,i.next=2;break;case 9:i.next=31;break;case 11:if("overlaysCanvasObject"!==n){i.next=22;break}i.t2=ze.a.keys(t.outlineData.overlays);case 13:if((i.t3=i.t2()).done){i.next=20;break}return o=i.t3.value,i.next=17,Ba({design:t,designLayers:t.outlineData.overlays[o][r],partName:o,currentShoe:r});case 17:c[o]=i.sent,i.next=13;break;case 20:i.next=31;break;case 22:if("baseColorCanvasObject"!==n){i.next=31;break}i.t4=ze.a.keys(t.outlineData.parts);case 24:if((i.t5=i.t4()).done){i.next=31;break}return l=i.t5.value,i.next=28,_a({design:t,partName:l,currentShoe:r});case 28:c[l]=i.sent,i.next=24;break;case 31:e(c);case 32:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}})()()}))},Ya=function(e){var t=e.design,n=e.overlayCanvasObject,a=e.overlayCanvas,r=e.partName,i=e.graphicVisualCanvas,c=t.configData.canvasSize,s=a.getContext("2d"),o=i.getContext("2d");for(var l in o.clearRect(0,0,c,c),s.clearRect(0,0,c,c),n[r].layers){var u=n[r].layers[l];s.drawImage(u,0,0,c,c),o.drawImage(u,0,0,c,c)}},Wa=function(e){var t=e.design,n=e.graphicVisualCanvas,a=e.partName,r=e.canvasObject,i=e.baseColorCanvasObject,c=t.configData.canvasSize,s=n.getContext("2d");if(s.clearRect(0,0,c,c),i[a]){var o=i[a];s.drawImage(o,0,0,c,c)}for(var l in r[a].layers){var u=r[a].layers[l];s.drawImage(u,0,0,c,c)}},Xa=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.partName,a=t.layerIndex,r=t.layerObject,i=t.canvasObject,c=t.textureCanvas,s=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.baseColorCanvasObject,d=t.currentShoe,"color"!==r.type){e.next=7;break}return e.next=4,Ra({design:l,layer:r,partName:n});case 4:b=e.sent,e.next=16;break;case 7:if("graphic"!==r.type){e.next=13;break}return e.next=10,Aa({design:l,layer:r,partName:n,currentShoe:d});case 10:b=e.sent,e.next=16;break;case 13:return e.next=15,Ga({design:l,layer:r,currentShoe:d});case 15:b=e.sent;case 16:i[n].layers[a]=b,Za({textureCanvas:c,canvasObjectPart:i[n],partName:n,texture:s,graphicVisualCanvas:o,design:l,baseColorCanvasObject:u});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ha=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.canvasObject,a=t.graphicVisualCanvas,r=t.layerObject,i=t.partName,c=t.texture,s=t.textureCanvas,o=t.design,l=t.baseColorCanvasObject,u=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Ra({design:o,layer:r,partName:i});case 4:d=e.sent,n[i].layers.push(d),e.next=19;break;case 8:if("graphic"!==r.type){e.next=15;break}return e.next=11,Aa({design:o,layer:r,partName:i,currentShoe:u});case 11:b=e.sent,n[i].layers.push(b),e.next=19;break;case 15:return e.next=17,Ga({design:o,layer:r,currentShoe:u});case 17:p=e.sent,n[i].layers.push(p);case 19:Za({textureCanvas:s,canvasObjectPart:n[i],partName:i,texture:c,graphicVisualCanvas:a,design:o,baseColorCanvasObject:l});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ja=function(e){var t=e.canvasObject,n=e.partName,a=e.layerIndex,r=e.textureCanvas,i=e.texture,c=e.graphicVisualCanvas,s=e.design,o=e.baseColorCanvasObject;t[n].layers.splice(a,1),Za({textureCanvas:r,canvasObjectPart:t[n],partName:n,texture:i,graphicVisualCanvas:c,design:s,baseColorCanvasObject:o})},qa=function(e){var t=e.canvasObject,n=e.partName,a=e.layerIndex,r=e.direction,i=e.textureCanvas,c=e.texture,s=e.graphicVisualCanvas,o=e.design,l=e.baseColorCanvasObject,u=t[n].layers,d=u[a];u[a]=u[a+r],u[a+r]=d,t[n].layers=u,Za({textureCanvas:i,canvasObjectPart:t[n],partName:n,texture:c,graphicVisualCanvas:s,design:o,baseColorCanvasObject:l})},Za=function(e){var t=e.textureCanvas,n=e.canvasObjectPart,a=e.partName,r=e.texture,i=e.graphicVisualCanvas,c=e.design,s=e.baseColorCanvasObject,o=t.getContext("2d"),l=i.getContext("2d");l.clearRect(0,0,c.configData.canvasSize,c.configData.canvasSize);var u=c.configData.partsObject[a],d=u.x,b=u.y,p=u.width,h=u.height,j=c.configData.divider;for(var f in o.drawImage(s[a],d/j,b/j,p/j,h/j),l.drawImage(s[a],0,0,c.configData.canvasSize,c.configData.canvasSize),n.layers){var v=n.layers[f];o.drawImage(v,d/j,b/j,p/j,h/j),l.drawImage(v,0,0,c.configData.canvasSize,c.configData.canvasSize)}r.needsUpdate=!0},$a=function(e){var t=e.changeObject,n=e.design,a=e.setDesign,r=e.texture,i=e.textureCanvas,c=e.graphicVisualCanvas,s=e.canvasObject,o=e.overlayCanvas,l=e.overlayCanvasObject,u=e.baseColorCanvasObject,d=e.currentShoe,b=t.type,p=t.fileName,h=Object(Qt.cloneDeep)(n);if("graphic-moved"===b){var j=t.partName,f=t.layerIndex,v=t.direction,g=t.distance,x=h.outlineData.overlays[j][d][f];"vert"===v?x.y+=g:"hor"===v?x.x+=g:"scale"===v?x.scale*=g:"rotate"===v?x.rotation+=g:"reset"===v&&(x.y=0,x.x=0,x.scale=1,x.rotation=0),a(h),Ka({partName:j,layerIndex:f,layerObject:x,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,canvasObject:s,textureCanvas:i,baseColorCanvasObject:u,currentShoe:d})}else if("color-changed"===b){var O=t.partName,y=t.layerIndex,m=t.newColor,C=h.outlineData.overlays[O][d][y];C.color=m,a(h),Ka({partName:O,layerIndex:y,layerObject:C,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,canvasObject:s,textureCanvas:i,baseColorCanvasObject:u,currentShoe:d})}else if("layer-added"===b){var w=t.partName,k=t.layerType;if(0===n.outlineData.overlays[w][d].length){var D=n.configData.overlayParts[w];for(var S in D){var N=D[S];h.outlineData.parts[N][d].push({type:"overlay",source:w})}}"Color"===k?h.outlineData.overlays[w][d].push({type:"color",color:"#777777"}):h.outlineData.overlays[w][d].push({type:"graphic",link:p,x:0,y:0,scale:1,rotation:0}),a(h),Qa({overlayCanvasObject:l,partName:w,layerObject:h.outlineData.overlays[w][d].slice(-1)[0],overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,textureCanvas:i,canvasObject:s,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}else if("layer-moved"===b){var V=t.partName,L=t.layerIndex,I=t.direction,P=h.outlineData.overlays[V][d],z=P[L];P[L]=P[L+I],P[L+I]=z,h.outlineData.overlays[V][d]=P,a(h),er({overlayCanvasObject:l,partName:V,layerIndex:L,direction:I,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,textureCanvas:i,canvasObject:s,baseColorCanvasObject:u,currentShoe:d})}else if("layer-deleted"===b){var E=t.partName,M=t.layerIndex;if(h.outlineData.overlays[E][d].splice(M,1),0===h.outlineData.overlays[E][d].length){var T=n.configData.overlayParts[E];for(var R in T)for(var A=T[R],G=0;G<h.outlineData.parts[A][d].length;G++){var U=G;"overlay"===h.outlineData.parts[A][d][G].type&&h.outlineData.parts[A][d][G].source===E&&(h.outlineData.parts[A][d].splice(U,1),s[A].layers.splice(U,1))}}a(h),tr({overlayCanvasObject:l,partName:E,layerIndex:M,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,textureCanvas:i,canvasObject:s,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}},Ka=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,v,g,x,O;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.partName,a=t.layerIndex,r=t.layerObject,i=t.overlayCanvasObject,c=t.overlayCanvas,s=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.canvasObject,d=t.textureCanvas,b=t.baseColorCanvasObject,p=t.currentShoe,h=l.configData.overlayParts[n],"color"!==r.type){e.next=8;break}return e.next=5,Ra({design:l,layer:r,partName:n});case 5:j=e.sent,e.next=11;break;case 8:return e.next=10,Aa({design:l,layer:r,partName:n,currentShoe:p});case 10:j=e.sent;case 11:i[n].layers[a]=j,Ya({design:l,overlayCanvasObject:i,overlayCanvas:c,partName:n,graphicVisualCanvas:o,currentShoe:p}),e.t0=ze.a.keys(h);case 14:if((e.t1=e.t0()).done){e.next=32;break}f=e.t1.value,v=h[f],g=0;case 18:if(!(g<l.outlineData.parts[v][p].length)){e.next=30;break}if(x=g,"overlay"!==l.outlineData.parts[v][p][g].type){e.next=27;break}if(l.outlineData.parts[v][p][g].source!==n){e.next=27;break}return e.next=24,Ua({design:l,layer:l.outlineData.parts[v][p][g],partName:v,overlayCanvas:c});case 24:O=e.sent,u[v].layers[x]=O,nr({textureCanvas:d,canvasObjectPart:u[v],partName:v,design:l,baseColorCanvasObject:b});case 27:g++,e.next=18;break;case 30:e.next=14;break;case 32:s.needsUpdate=!0;case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qa=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,v,g,x,O,y;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.overlayCanvasObject,a=t.partName,r=t.layerObject,i=t.overlayCanvas,c=t.texture,s=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,b=t.baseColorCanvasObject,p=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Ra({design:o,layer:r,partName:a});case 4:h=e.sent,n[a].layers.push(h),e.next=13;break;case 8:if("graphic"!==r.type){e.next=13;break}return e.next=11,Aa({design:o,layer:r,partName:a,currentShoe:p});case 11:j=e.sent,n[a].layers.push(j);case 13:Ya({design:o,overlayCanvasObject:n,overlayCanvas:i,partName:a,graphicVisualCanvas:s,currentShoe:p}),f=o.configData.overlayParts[a],e.t0=ze.a.keys(f);case 16:if((e.t1=e.t0()).done){e.next=34;break}v=e.t1.value,g=f[v],x=0;case 20:if(!(x<d.outlineData.parts[g][p].length)){e.next=32;break}if(O=x,"overlay"!==d.outlineData.parts[g][p][x].type){e.next=29;break}if(d.outlineData.parts[g][p][x].source!==a){e.next=29;break}return e.next=26,Ua({design:o,layer:d.outlineData.parts[g][p][x],partName:g,overlayCanvas:i});case 26:y=e.sent,u[g].layers[O]=y,nr({textureCanvas:l,canvasObjectPart:u[g],partName:g,design:o,baseColorCanvasObject:b});case 29:x++,e.next=20;break;case 32:e.next=16;break;case 34:c.needsUpdate=!0;case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),er=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,v,g,x,O,y;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.overlayCanvasObject,a=t.partName,r=t.layerIndex,i=t.direction,c=t.overlayCanvas,s=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.textureCanvas,d=t.canvasObject,b=t.baseColorCanvasObject,p=t.currentShoe,h=n[a].layers,j=h[r],h[r]=h[r+i],h[r+i]=j,n[a].layers=h,Ya({design:l,overlayCanvasObject:n,overlayCanvas:c,partName:a,graphicVisualCanvas:o,currentShoe:p}),f=l.configData.overlayParts[a],e.t0=ze.a.keys(f);case 9:if((e.t1=e.t0()).done){e.next=27;break}v=e.t1.value,g=f[v],x=0;case 13:if(!(x<l.outlineData.parts[g][p].length)){e.next=25;break}if(O=x,"overlay"!==l.outlineData.parts[g][p][x].type){e.next=22;break}if(l.outlineData.parts[g][p][x].source!==a){e.next=22;break}return e.next=19,Ua({design:l,layer:l.outlineData.parts[g][p][x],partName:g,overlayCanvas:c});case 19:y=e.sent,d[g].layers[O]=y,nr({textureCanvas:u,canvasObjectPart:d[g],partName:g,design:l,baseColorCanvasObject:b});case 22:x++,e.next=13;break;case 25:e.next=9;break;case 27:s.needsUpdate=!0;case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tr=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,v,g,x;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.overlayCanvasObject,a=t.partName,r=t.layerIndex,i=t.overlayCanvas,c=t.texture,s=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,b=t.baseColorCanvasObject,p=t.currentShoe,n[a].layers.splice(r,1),Ya({design:o,overlayCanvasObject:n,overlayCanvas:i,partName:a,graphicVisualCanvas:s,currentShoe:p}),h=o.configData.overlayParts[a],e.t0=ze.a.keys(h);case 5:if((e.t1=e.t0()).done){e.next=22;break}j=e.t1.value,f=h[j],v=0;case 9:if(!(v<d.outlineData.parts[f][p].length)){e.next=19;break}if(g=v,"overlay"!==d.outlineData.parts[f][p][v].type||d.outlineData.parts[f][p][v].source!==a){e.next=16;break}return e.next=14,Ua({design:o,layer:o.outlineData.parts[f][p][v],partName:f,overlayCanvas:i});case 14:x=e.sent,u[f].layers[g]=x;case 16:v++,e.next=9;break;case 19:nr({textureCanvas:l,canvasObjectPart:u[f],partName:f,design:o,baseColorCanvasObject:b}),e.next=5;break;case 22:c.needsUpdate=!0;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nr=function(e){var t=e.textureCanvas,n=e.canvasObjectPart,a=e.partName,r=e.design,i=e.baseColorCanvasObject,c=t.getContext("2d"),s=r.configData.partsObject[a],o=s.x,l=s.y,u=s.width,d=s.height,b=r.configData.divider;for(var p in c.drawImage(i[a],o/b,l/b,u/b,d/b),n.layers){var h=n.layers[p];c.drawImage(h,o/b,l/b,u/b,d/b)}},ar=function(e){var t=e.design,n=e.canvasObject,a=e.baseColorCanvasObject;return new Promise((function(e,r){var i=document.createElement("canvas");i.width=t.configData.canvasSize,i.height=t.configData.canvasSize;var c=i.getContext("2d");!function r(){if("undefined"!==typeof c){for(var s in n){var o=t.configData.partsObject[s],l=o.x,u=o.y,d=o.width,b=o.height,p=t.configData.divider;for(var h in c.drawImage(a[s],l/p,u/p,d/p,b/p),n[s].layers){var j=n[s].layers[h];c.drawImage(j,l/p,u/p,d/p,b/p)}}e(i)}else setTimeout(r,100)}()}))};var rr=function(e){var t=e.userData,n=e.designSpec,r=e.graphicVisualCanvas,i=e.rightInnerOverlayCanvas,c=e.rightOuterOverlayCanvas,s=e.rightTexture,o=e.rightTextureCanvas,d=e.leftInnerOverlayCanvas,b=e.leftOuterOverlayCanvas,p=e.leftTexture,h=e.leftTextureCanvas,j=e.redMapCanvas,f=Object(a.useState)(n),v=Object(l.a)(f,2),g=v[0],x=v[1],O=Object(a.useState)(!1),y=Object(l.a)(O,2),m=y[0],C=y[1],w=Object(a.useState)(0),k=Object(l.a)(w,2),D=k[0],S=k[1],N=Object(a.useState)("right"),V=Object(l.a)(N,2),L=V[0],I=V[1],P=Object(a.useState)(-1),z=Object(l.a)(P,2),E=z[0],M=z[1],T=Object(a.useState)({right:!0,left:!0}),R=Object(l.a)(T,2),A=R[0],G=R[1],U=Object(a.useState)("DesignInfo"),B=Object(l.a)(U,2),_=B[0],F=B[1],Y=Object(a.useState)("LayersMain"),W=Object(l.a)(Y,2),X=W[0],H=W[1],J=Object(a.useRef)(),q=Object(a.useRef)(),Z=Object(a.useRef)(),$=Object(a.useRef)(),K=Object(a.useRef)(),Q=Object(a.useRef)(),ee=Object(a.useState)(!0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],re=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fa({design:t,type:"baseColorCanvasObject",currentShoe:"right"});case 2:return J.current=e.sent,e.next=5,Fa({design:t,type:"baseColorCanvasObject",currentShoe:"left"});case 5:return $.current=e.sent,e.next=8,ar({design:g,canvasObject:q.current,baseColorCanvasObject:J.current});case 8:return n=e.sent,e.next=11,ar({design:g,canvasObject:K.current,baseColorCanvasObject:$.current});case 11:a=e.sent,o.getContext("2d").drawImage(n,0,0),s.needsUpdate=!0,h.getContext("2d").drawImage(a,0,0),p.needsUpdate=!0;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){q.current&&K.current||Pa({setTexturesLoaded:C,design:g,graphicVisualCanvas:r,rightBaseColorCanvasObjectRef:J,rightInnerOverlayCanvas:i,rightOuterOverlayCanvas:c,rightTexture:s,rightTextureCanvas:o,rightCanvasObjectRef:q,rightOverlaysCanvasObjectRef:Z,leftBaseColorCanvasObjectRef:$,leftInnerOverlayCanvas:d,leftOuterOverlayCanvas:b,leftTexture:p,leftTextureCanvas:h,leftCanvasObjectRef:K,leftOverlaysCanvasObjectRef:Q})}),[g,r,i,c,s,o,d,b,p,h]),g?Object(u.jsxs)("div",{className:"designer-container",children:[Object(u.jsx)(qe,{design:g,setView:F,setLayersView:H,rightTexture:s,leftTexture:p,texturesLoaded:m,setCurrentPart:S,setCurrentShoe:I,setCurrentLayer:M,shoeVisibility:A,redMapCanvas:j,cameraReset:ne,setCameraReset:ae}),Object(u.jsx)(Ia,{design:g,setDesign:x,view:_,setView:F,currentLayer:E,setCurrentLayer:M,layersView:X,setLayersView:H,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:function(e){Wa("outerOverlay"===e||"innerOverlay"===e?"right"===L?{design:g,graphicVisualCanvas:r,partName:e,canvasObject:Z.current,baseColorCanvasObject:J.current,currentShoe:L}:{design:g,graphicVisualCanvas:r,partName:e,canvasObject:Q.current,baseColorCanvasObject:$.current,currentShoe:L}:"right"===L?{design:g,graphicVisualCanvas:r,partName:e,canvasObject:q.current,baseColorCanvasObject:J.current,currentShoe:L}:{design:g,graphicVisualCanvas:r,partName:e,canvasObject:K.current,baseColorCanvasObject:$.current,currentShoe:L})},handleChangeManager:function(e){var t=e.partName;"outerOverlay"===t?$a({changeObject:e,design:g,setDesign:x,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,overlayCanvas:"right"===L?c:b,overlayCanvasObject:"right"===L?Z.current:Q.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L}):"innerOverlay"===t?$a({changeObject:e,design:g,setDesign:x,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,overlayCanvas:"right"===L?i:d,overlayCanvasObject:"right"===L?Z.current:Q.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L}):function(e){var t=e.changeObject,n=e.design,a=e.setDesign,r=e.texture,i=e.textureCanvas,c=e.graphicVisualCanvas,s=e.canvasObject,o=e.baseColorCanvasObject,l=e.currentShoe,u=t.type,d=t.fileName,b=Object(Qt.cloneDeep)(n);if("graphic-moved"===u){var p=t.partName,h=t.layerIndex,j=t.direction,f=t.distance,v=b.outlineData.parts[p][l][h];"vert"===j?v.y+=f:"hor"===j?v.x+=f:"scale"===j?v.scale*=f:"rotate"===j?v.rotation+=f:"reset"===j&&(v.y=0,v.x=0,v.scale=1,v.rotation=0),a(b),Xa({partName:p,layerIndex:h,layerObject:v,canvasObject:s,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:n,baseColorCanvasObject:o,currentShoe:l})}else if("color-changed"===u){var g,x=t.partName,O=t.layerIndex,y=t.newColor;(g="outerOverlay"===x||"innerOverlay"===x?b.outlineData.overlays[x].layers[O]:b.outlineData.parts[x][l][O]).color=y,a(b),Xa({partName:x,layerIndex:O,layerObject:g,canvasObject:s,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:n,baseColorCanvasObject:o,currentShoe:l})}else if("layer-added"===u){var m=t.partName,C=t.layerType;if("Color"===C)b.outlineData.parts[m][l].push({type:"color",color:"#777777"});else if("Graphic"===C)b.outlineData.parts[m][l].push({type:"graphic",link:d,x:0,y:0,scale:1,rotation:0});else{var w=t.maskLink;b.outlineData.parts[m][l].push({type:"mask",link:w,color:"#000000"})}a(b);var k=b.outlineData.parts[m][l].slice(-1)[0];Ha({canvasObject:s,graphicVisualCanvas:c,layerObject:k,partName:m,texture:r,textureCanvas:i,design:n,baseColorCanvasObject:o,currentShoe:l})}else if("layer-moved"===u){var D=t.partName,S=t.layerIndex,N=t.direction,V=b.outlineData.parts[D][l],L=V[S];V[S]=V[S+N],V[S+N]=L,b.outlineData.parts[D].layers=V,a(b),qa({canvasObject:s,partName:D,layerIndex:S,direction:N,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:n,baseColorCanvasObject:o,currentShoe:l})}else if("layer-deleted"===u){var I=t.partName,P=t.layerIndex;b.outlineData.parts[I][l].splice(P,1),a(b),Ja({canvasObject:s,partName:I,layerIndex:P,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:n,baseColorCanvasObject:o,currentShoe:l})}}({changeObject:e,design:g,setDesign:x,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L})},handleUpdateBaseColor:re,userData:t,currentPart:D,setCurrentPart:S,currentShoe:L,setCurrentShoe:I,shoeVisibility:A,setShoeVisibility:G,setCameraReset:ae})]}):Object(u.jsx)("div",{children:"hi"})};var ir,cr=function(){var e=Object(o.g)().id,t=Object(a.useContext)(k.context),n=Object(a.useState)(null),r=Object(l.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(null),d=Object(l.a)(s,2),b=d[0],p=d[1],h=Object(a.useState)(null),j=Object(l.a)(h,2),f=j[0],v=j[1],g=Object(a.useState)(null),x=Object(l.a)(g,2),O=x[0],y=x[1],m=Object(a.useState)(null),C=Object(l.a)(m,2),w=C[0],D=C[1],S=Object(a.useState)(null),V=Object(l.a)(S,2),L=V[0],I=V[1],P=Object(a.useState)(null),z=Object(l.a)(P,2),E=z[0],M=z[1],T=Object(a.useState)(null),R=Object(l.a)(T,2),A=R[0],G=R[1],U=Object(a.useState)(null),B=Object(l.a)(U,2),_=B[0],F=B[1],Y=Object(a.useState)(null),W=Object(l.a)(Y,2),X=W[0],H=W[1],J=Object(a.useState)(null),q=Object(l.a)(J,2),Z=q[0],$=q[1],K=function(){var e=Object(Ee.a)(ze.a.mark((function e(t){var n,a,r,i,s,o,l;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(t),p(Ta({design:t})),e.next=4,Ea({design:t});case 4:return n=e.sent,v(n),e.next=8,Ea({design:t});case 8:return a=e.sent,y(a),e.next=12,Ea({design:t});case 12:return r=e.sent,D(r),e.next=16,Ea({design:t});case 16:return i=e.sent,M(i),e.next=20,Ea({design:t});case 20:return s=e.sent,G(s),e.next=24,Ea({design:t});case 24:return o=e.sent,F(o),e.next=28,Ma({design:t});case 28:l=e.sent,$(l);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){e?N("/api/outlines/".concat(e),"GET").then((function(e){return e.json()})).then((function(e){K(e)})):N("/api/outlines/newdesign","GET").then((function(e){return e.json()})).then((function(e){K(e)}))}),[e]),Object(a.useEffect)((function(){w&&_&&(I(za(w)),H(za(_)))}),[w,_]),i&&b&&f&&O&&w&&L&&E&&A&&_&&X&&Z?Object(u.jsx)(rr,{userData:t,designSpec:i,graphicVisualCanvas:b,rightInnerOverlayCanvas:f,rightOuterOverlayCanvas:O,rightTexture:L,rightTextureCanvas:w,leftInnerOverlayCanvas:E,leftOuterOverlayCanvas:A,leftTexture:X,leftTextureCanvas:_,redMapCanvas:Z}):Object(u.jsx)("div",{})},sr=I.a.div(ir||(ir=Object(L.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  justify-content: center;\n  padding: 16px;\n"])));var or,lr,ur=function(){return Object(u.jsxs)(sr,{children:[Object(u.jsx)(W,{google:!0,onClick:function(){window.open("http://solecomposer.com/auth/google","_self")},children:"Login With Google"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(W,{children:"Back"})})]})},dr=I.a.div(or||(or=Object(L.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n"]))),br=I.a.p(lr||(lr=Object(L.a)(["\n  padding: 0;\n  text-align: center;\n  margin: 0;\n  margin-top: 15px;\n"])));var pr,hr=function(){var e=Object(a.useContext)(k.context);return Object(u.jsxs)(dr,{children:[Object(u.jsx)(br,{children:e.firstName}),Object(u.jsx)(br,{children:e.email}),Object(u.jsx)(W,{onClick:function(){window.open("http://solecomposer.com/auth/logout","_self")},children:"Log Out"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(W,{children:"Back"})})]})},jr=I.a.div(pr||(pr=Object(L.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n"])));var fr,vr=function(){return Object(u.jsxs)(jr,{children:[Object(u.jsx)(br,{children:"404 - PAGE NOT FOUND"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(W,{children:"Home"})})]})},gr=I.a.div(fr||(fr=Object(L.a)([""])));var xr=function(){return Object(u.jsx)(gr,{children:Object(u.jsx)(s.a,{children:Object(u.jsx)(k,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:Ie}),Object(u.jsx)(o.a,{exact:!0,path:"/login",component:ur}),Object(u.jsx)(o.a,{exact:!0,path:"/profile",component:hr}),Object(u.jsx)(o.a,{exact:!0,path:"/designer",component:cr}),Object(u.jsx)(o.a,{exact:!0,path:"/designer/:id",component:cr}),Object(u.jsx)(o.a,{path:"*",component:vr})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(xr,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[334,1,2]]]);
//# sourceMappingURL=main.ba03e1e2.chunk.js.map