(this["webpackJsonpsole-composer"]=this["webpackJsonpsole-composer"]||[]).push([[0],{187:function(e,n,t){},325:function(e,n,t){},326:function(e,n,t){},327:function(e,n,t){},328:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(135),c=t.n(i),s=t(23),o=t(21),l=t(15),u=t(1),d=Object(a.createContext)(null),b=function(e){var n=e.children,t=Object(a.useState)(),r=Object(l.a)(t,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){fetch("/auth/getsession",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.err||c(e)}))}),[]),Object(u.jsx)(d.Provider,{value:i,children:n})};b.context=d;var p,h,f,j,x,g,v,O,y,m,C,w,k=b,D=t(136),S=t.n(D),N=(t(186),t(187),function(e,n){return fetch(e,{method:n})}),V=function(e,n,t){return fetch(e,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},L=t(7),I=t(8),P=992,z={tablet:"@media (min-width: ".concat(601,"px)"),desktop:"@media (min-width: ".concat(P,"px)")},E=z.desktop,M=I.a.div(p||(p=Object(L.a)(["\n  font-family: 'Roboto';\n  height: 100%;\n"]))),T=I.a.div(h||(h=Object(L.a)(["\n  z-index: 1;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 22px;\n  color: #f9f9f9;\n  background-color: #000000;\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n\n  a {\n    color: #ffffff;\n    text-decoration: none;\n  }\n"]))),R=I.a.p(f||(f=Object(L.a)(["\n  margin: 0;\n"]))),A=I.a.div(j||(j=Object(L.a)(["\n  width: 100%;\n  height: 42px;\n"]))),G=I.a.div(x||(x=Object(L.a)(["\n  width: 100%;\n  max-width: 700px;\n  margin: auto;\n  margin-top: 16px;\n\n  "," {\n    margin-bottom: 0;\n  }\n"])),E),U=I.a.div(g||(g=Object(L.a)(["\n  margin-bottom: 32px;\n  width: 100%;\n"]))),B=I.a.p(v||(v=Object(L.a)(["\n  font-family: 'Poppins', 'Roboto', 'Ariel';\n  margin: 0px;\n  margin-left: 16px;\n  margin-bottom: 8px;\n  font-size: 24px;\n  font-weight: bold;\n"]))),_=I.a.div(O||(O=Object(L.a)(["\n  margin-bottom: 60px;\n  text-align: center;\n"]))),F="#000000",Y=("0.1rem solid ".concat("#000000"),I.a.button(y||(y=Object(L.a)(["\n  box-shadow: none;\n  margin: 0;\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-radius: 5px;\n  width: 100%;\n\n  &:active {\n    box-shadow: none;\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),"#ffffff",F)),W=Object(I.a)(Y)(m||(m=Object(L.a)(["\n  height: 40px;\n  background-color: ",";\n  padding: 8px;\n  font-size: 16px;\n  text-transform: capitalize;\n  margin-top: 15px;\n"])),(function(e){return e.google?"#4285f4":F})),X=Object(I.a)(Y)(C||(C=Object(L.a)(["\n  height: 40px;\n  padding: 8px;\n  font-size: 16px;\n  text-transform: capitalize;\n  padding-left: 23px;\n  padding-right: 23px;\n  width: unset;\n"]))),H=Object(I.a)(Y)(w||(w=Object(L.a)(["\n  width: calc(100% - 32px);\n  background-color: #000000;\n  height: 50px;\n  font-size: 16px;\n  margin-bottom: 40px;\n  padding: 0;\n  margin-left: 16px;\n  margin-right: 16px;\n"])));var J,q=function(){var e=Object(o.f)();return Object(u.jsx)(H,{onClick:function(){e.push("/designer")},children:"N E W \xa0 D E S I G N"})},Z=I.a.button(J||(J=Object(L.a)(["\n  border: none;\n  color: #ffffff;\n  border-radius: 5px;\n  background-color: #000000;\n  height: 44px;\n  font-size: 16px;\n  width: unset;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 25px;\n  padding-right: 25px;\n"])));var $,K,Q,ee,ne,te=function(){var e=Object(o.f)();return Object(u.jsx)(Z,{onClick:function(){e.push("/designer")},children:"S T A R T \xa0 D E S I G N I N G"})},ae=I.a.div($||($=Object(L.a)(["\n  margin-left: 8px;\n  margin-right: 8px;\n  margin-top: 0px;\n  flex: 0 0 auto;\n"]))),re=I.a.div(K||(K=Object(L.a)(["\n  width: 100%;\n  background-color: #f0f0f0;\n  border-radius: 8px;\n\n  img {\n    width: 100%;\n  }\n"]))),ie=I.a.p(Q||(Q=Object(L.a)(["\n  color: #000000;\n  font-size: 22px;\n  margin-top: 9px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"]))),ce=I.a.p(ee||(ee=Object(L.a)(["\n  color: #000000;\n  font-size: 14px;\n  margin-top: 6px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"]))),se=I.a.p(ne||(ne=Object(L.a)(["\n  color: #777;\n  font-size: 14px;\n  margin-top: 6px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"])));var oe,le,ue,de,be,pe,he=function(e){var n=e.props,t=n._id,a=n.title,r=n.configId,i=n.author,c=n.screenshot,s=Object(o.f)();return Object(u.jsxs)(ae,{onClick:function(){s.push("/designer/".concat(t))},children:[Object(u.jsx)(re,{children:Object(u.jsx)("img",{src:"api/assets/images/".concat(c),alt:"feature-design"})}),Object(u.jsx)(ie,{children:a}),Object(u.jsx)(ce,{children:r.modelName}),Object(u.jsx)(se,{children:i.firstName})]})},fe=z.desktop,je=I.a.div(oe||(oe=Object(L.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  height: unset;\n  margin-bottom: 35px;\n\n  "," {\n    height: 65vh;\n    margin-top: 15vh;\n    flex-direction: unset;\n    max-width: 1100px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n"])),fe),xe=I.a.div(le||(le=Object(L.a)(["\n  margin-top: 0px;\n  margin-bottom: 30px;\n  padding-right: 0px;\n  text-align: center;\n  margin-left: 5%;\n  margin-right: 5%;\n  width: 90%;\n  height: 100%;\n\n  "," {\n    margin-top: unset;\n    margin-bottom: unset;\n    padding-right: unset;\n    text-align: unset;\n    width: 100%;\n  }\n"])),fe),ge=I.a.p(ue||(ue=Object(L.a)(["\n  font-size: 30px;\n  margin-top: 30px;\n  font-weight: bold;\n  margin: 0;\n  margin-bottom: 25px;\n\n  "," {\n    font-size: 40px;\n    margin-top: 70px;\n  }\n"])),fe),ve=I.a.p(de||(de=Object(L.a)(["\n  font-size: 17px;\n  line-height: 150%;\n  margin: 0;\n  margin-bottom: 30px;\n"]))),Oe=I.a.div(be||(be=Object(L.a)(["\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-top: 90px;\n  margin-bottom: 30px;\n  padding-left: 1px;\n  height: 100%;\n\n  "," {\n    width: 100%;\n    margin: unset;\n    margin-right: 5%;\n  }\n"])),fe),ye=I.a.img(pe||(pe=Object(L.a)(["\n  max-width: 100%;\n  max-height: 100%;\n"])));var me,Ce,we,ke=function(){return Object(u.jsxs)(je,{children:[Object(u.jsxs)(xe,{children:[Object(u.jsx)(ge,{children:"Create Something New"}),Object(u.jsx)(ve,{children:"Sole Composer gives you the ability to design and visualize one\u2011of\u2011a\u2011kind sneakers."}),Object(u.jsx)(te,{})]}),Object(u.jsx)(Oe,{children:Object(u.jsx)(ye,{src:"/sole-cover.png"})})]})},De=z.desktop,Se=I.a.div(me||(me=Object(L.a)(["\n  width: 100%;\n  margin-bottom: 16px;\n"]))),Ne=I.a.div(Ce||(Ce=Object(L.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 3px;\n  margin: 3px;\n\n  "," {\n    grid-template-columns: 1fr 1fr 1fr;\n    margin: 16px;\n  }\n"])),De),Ve=I.a.div(we||(we=Object(L.a)(["\n  width: 100%;\n  background-color: #f0f0f0;\n\n  img {\n    width: 100%;\n  }\n"])));var Le=function(e){var n=e.myDesigns;return Object(u.jsx)(Se,{children:Object(u.jsx)(Ne,{children:n.map((function(e,n){return Object(u.jsx)(s.b,{to:"/designer/".concat(e._id),className:"link-to-designer",children:Object(u.jsx)(Ve,{children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.screenshot),alt:"my-design-preview"})})},n)}))})})};var Ie,Pe,ze,Ee,Me,Te,Re,Ae,Ge,Ue,Be,_e,Fe=function(){var e=Object(a.useContext)(k.context),n=Object(a.useState)(),t=Object(l.a)(n,2),r=t[0],i=t[1],c=Object(a.useState)(),o=Object(l.a)(c,2),d=o[0],b=o[1];Object(a.useEffect)((function(){N("/api/featured","GET").then((function(e){return e.json()})).then((function(e){return i(e)})),e&&N("/api/outlines/mydesigns","GET").then((function(e){return e.json()})).then((function(e){return b(e)}))}),[e]);var p=r?r.featured.map((function(n,t){return Object(u.jsx)(he,{props:n,userData:e},t)})):null;return Object(u.jsxs)(M,{children:[Object(u.jsxs)(T,{children:[Object(u.jsxs)(R,{children:[Object(u.jsx)("strong",{children:"Sole"})," Composer"]}),e?Object(u.jsx)(s.b,{to:"/profile",children:e.firstName}):Object(u.jsx)(s.b,{to:"/login",children:"Login"})]}),!e&&Object(u.jsx)(ke,{}),e&&Object(u.jsx)(A,{}),Object(u.jsxs)(G,{children:[r&&Object(u.jsxs)(U,{children:[Object(u.jsx)(B,{children:"FEATURED"}),Object(u.jsx)(S.a,{responsive:{0:{items:1.7},700:{items:3}},items:p})]}),e&&Object(u.jsx)(q,{}),!e&&Object(u.jsx)(_,{children:Object(u.jsx)(s.b,{to:"/login",children:Object(u.jsx)(X,{children:"sign up"})})}),d&&Object(u.jsx)(B,{children:"MY DESIGNS"}),d&&Object(u.jsx)(Le,{myDesigns:d})]})]})},Ye=t(16),We=t.n(Ye),Xe=t(19),He=t(27),Je=t(331),qe=t(332),Ze=t(3),$e=I.a.div(Ie||(Ie=Object(L.a)(["\n  background-color: #212121;\n  border-radius: 9px;\n"]))),Ke=I.a.p(Pe||(Pe=Object(L.a)(["\n  font-size: 18px;\n  margin: 10px 14px;\n  color: #ffffff;\n"]))),Qe=I.a.div(ze||(ze=Object(L.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 6px;\n  row-gap: 6px;\n  margin: 6px;\n"]))),en=I.a.div(Ee||(Ee=Object(L.a)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  row-gap: 6px;\n  margin: 6px;\n"]))),nn=I.a.div(Me||(Me=Object(L.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 6px;\n"]))),tn=I.a.div(Te||(Te=Object(L.a)(["\n  height: 46px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),an=I.a.div(Re||(Re=Object(L.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),rn=I.a.button(Ae||(Ae=Object(L.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 3px;\n  width: 100%;\n  height: 38px;\n  background-color: #212121;\n  color: ",";\n  padding: 0px;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#ffffff":"#bbbbbb"})),cn=I.a.div(Ge||(Ge=Object(L.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n  margin-left: 6px;\n"]))),sn=I.a.button(Ue||(Ue=Object(L.a)(["\n  box-sizing: border-box;\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 3px;\n  width: 38px;\n  height: 38px;\n  background-color: ",";\n  padding: 0px;\n  font-size: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  svg {\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#343434":"#000000"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#ffffff":"#343434"})),on=I.a.div(Be||(Be=Object(L.a)(["\n  background-color: #f9f9f9;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 1;\n"]))),ln=I.a.div(_e||(_e=Object(L.a)(["\n  display: block;\n  position: relative;\n  left: 50%;\n  top: 50%;\n  width: 150px;\n  height: 150px;\n  margin: -75px 0 0 -75px;\n  border: 16px solid #e9e9e9;\n  border-top: 16px solid #333;\n  border-radius: 50%;\n  width: 120px;\n  height: 120px;\n  animation: spin 2s linear infinite;\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"])));var un,dn,bn,pn=function(){return Object(u.jsx)(on,{children:Object(u.jsx)(ln,{})})},hn=t(147),fn=I.a.div(un||(un=Object(L.a)(["\n  display: flex;\n  width: 260px;\n"]))),jn=I.a.div(dn||(dn=Object(L.a)(["\n  width: 100%;\n  display: flex;\n  flex: 0 1 auto;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),xn=I.a.button(bn||(bn=Object(L.a)(["\n  width: 38px;\n  height: 38px;\n  margin-right: 3px;\n  border-radius: 4px;\n  flex: 0 0 auto;\n  background-color: ",";\n  border: none;\n\n  &:last-child {\n    margin-right: 0px;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.color}));var gn,vn,On,yn,mn,Cn,wn,kn,Dn=function(e){var n=e.colorsArray,t=e.handleColorChange;return Object(u.jsx)(an,{children:Object(u.jsx)(fn,{children:Object(u.jsx)(jn,{children:n.map((function(e,n){return Object(u.jsx)(xn,{color:e,onClick:function(){return t(e)}},n)}))})})})},Sn=t(77),Nn=I.a.div(gn||(gn=Object(L.a)([""]))),Vn=I.a.div(vn||(vn=Object(L.a)(["\n  height: 18px;\n  position: relative;\n  overflow: hidden;\n"]))),Ln=I.a.div(On||(On=Object(L.a)(["\n  width: 100%;\n  height: 120px;\n  position: relative;\n  overflow: hidden;\n"]))),In=I.a.div(yn||(yn=Object(L.a)(["\n  border-radius: 4px;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n\n  input {\n    box-sizing: border-box;\n    width: 86px;\n    height: 38px;\n    margin-right: 3px;\n    border: 1px solid #ffffff;\n    border-radius: 4px;\n    font-size: 14px;\n    padding-left: 8px;\n    padding-right: 0px;\n    box-shadow: none;\n    -webkit-appearance: none;\n    -webkit-border-radius: 4px;\n  }\n"]))),Pn=I.a.div(mn||(mn=Object(L.a)(["\n  width: 38px;\n  height: 38px;\n  box-sizing: border-box;\n  border-radius: 4px;\n  background-color: ",";\n"])),(function(e){return e.color})),zn=I.a.div(Cn||(Cn=Object(L.a)(["\n  box-sizing: border-box;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: #ffffff solid 2px;\n  transform: translate(-9px, -9px);\n"]))),En=I.a.div(wn||(wn=Object(L.a)(["\n  box-sizing: border-box;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: #ffffff solid 2px;\n  transform: translate(-9px, 0px);\n"]))),Mn=Object(hn.a)((function(e){var n=e.hex,t=e.hsl,a=e.hsv,r=e.onChange,i=e.handleColorChange,c=e.colorsArray;return Object(u.jsxs)(Nn,{children:[Object(u.jsxs)(en,{children:[Object(u.jsx)(Vn,{children:Object(u.jsx)(Sn.Hue,{hsl:t,onChange:r,pointer:En})}),Object(u.jsx)(Ln,{children:Object(u.jsx)(Sn.Saturation,{hsl:t,hsv:a,onChange:r,pointer:zn})}),Object(u.jsx)(Dn,{colorsArray:c,handleColorChange:i})]}),Object(u.jsxs)(Qe,{children:[Object(u.jsx)(an,{children:Object(u.jsx)(rn,{active:!0,onClick:function(){return i("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random"})}),Object(u.jsx)(an,{children:Object(u.jsxs)(In,{children:[Object(u.jsx)(Sn.EditableInput,{value:n,onChange:r}),Object(u.jsx)(Pn,{color:n})]})})]})]})})),Tn=z.desktop,Rn=I.a.div(kn||(kn=Object(L.a)(["\n  width: 100vw;\n  height: 100vw;\n  color: #000;\n  flex: 0 0 auto;\n  overflow: hidden;\n\n  "," {\n    height: 100vh;\n    width: 100vh;\n    margin-left: 160px;\n  }\n"])),Tn);function An(e){var n,t,r=e.design,i=e.texture,c=e.right,s=e.setCurrentPart,o=e.setCurrentShoe,l=e.alone,d=e.setLayersView,b=e.setCurrentLayer,p=e.setView,h=e.redMapCanvas,f=Object(a.useRef)(),j=Object(Je.a)("/api/assets/models/".concat(r.configData.source.model)).nodes,x=Object(He.c)(Ze.TextureLoader,"/api/assets/designimages/".concat(r.configData.source[c?"aoMapRight":"aoMapLeft"]));x.flipY=!1;var g=function(e){if(e.delta<10){var n=Math.floor(1e3*e.uv.x),t=Math.floor(1e3*e.uv.y),a=function(e){switch(e){case 255:return 4;case 220:return 2;case 210:return 0;case 200:return 5;case 190:return 3;case 180:return 1;case 170:return 16;case 160:return 15;case 150:return 14;case 140:return 9;case 130:return 13;case 120:return 11;case 110:return 12;case 100:return 8;case 90:return 10;case 80:return 7;case 70:return 6;case 60:return 17}}(h.getContext("2d").getImageData(n,t,1,1).data[0]);(a||0===a)&&(d("LayersMain"),b(-1),p("Layers"),s(a),o(c?"right":"left"))}};return Object(u.jsx)("group",{ref:f,dispose:null,onPointerDown:function(e){return function(e){e.stopPropagation(),n=e.clientX,t=e.clientY}(e)},onPointerUp:function(e){return function(e){e.stopPropagation(),e.clientX>n-5&&e.clientX<n+5&&e.clientY>t-5&&e.clientY<t+5&&g(e)}(e)},children:Object(u.jsx)("mesh",{geometry:j.af1.geometry,rotation:[Math.PI/2,0,Math.PI/2],position:[0,-1,l?0:c?1.3:-1.3],scale:[c?.35:-.35,.35,.35],children:Object(u.jsx)("meshStandardMaterial",{aoMap:x,map:i})})})}var Gn,Un,Bn,_n,Fn,Yn=function(e){var n=e.design,t=e.rightTexture,r=e.leftTexture,i=e.texturesLoaded,c=e.setCurrentPart,s=e.setCurrentShoe,o=e.shoeVisibility,l=e.setLayersView,d=e.setCurrentLayer,b=e.setView,p=e.redMapCanvas,h=e.cameraReset,f=e.setCameraReset;function j(e){e.reset&&(Object(He.d)().camera.position.set(5.5,1.5,5.5),f(!1));return null}return Object(u.jsxs)(Rn,{id:"scene-container-id",children:[Object(u.jsxs)(He.a,{camera:{fov:45},linear:!0,dpr:3,gl:{preserveDrawingBuffer:!0},children:[Object(u.jsx)(j,{reset:h}),Object(u.jsx)("ambientLight",{}),Object(u.jsxs)(a.Suspense,{fallback:null,children:[o.right&&Object(u.jsx)(An,{right:!0,design:n,texture:t,setCurrentPart:c,setCurrentShoe:s,alone:!o.left,setLayersView:l,setCurrentLayer:d,setView:b,redMapCanvas:p}),o.left&&Object(u.jsx)(An,{design:n,texture:r,setCurrentPart:c,setCurrentShoe:s,alone:!o.right,setLayersView:l,setCurrentLayer:d,setView:b,redMapCanvas:p})]}),Object(u.jsx)(qe.a,{minPolarAngle:Math.PI/4,maxPolarAngle:3*Math.PI/4,minDistance:4,maxDistance:12,enablePan:!1,enableDamping:!0})]}),!i&&Object(u.jsx)(pn,{})]})},Wn=z.desktop,Xn=I.a.div(Gn||(Gn=Object(L.a)(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  touch-action: none;\n  display: flex;\n  padding-bottom: 30px;\n\n  "," {\n    right: 0;\n    width: 375px;\n  }\n"])),Wn),Hn=I.a.div(Un||(Un=Object(L.a)(["\n  flex: 1 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  margin-left: 16px;\n"]))),Jn=I.a.div(Bn||(Bn=Object(L.a)(["\n  width: 70px;\n  flex: 0 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n"]))),qn=t(18),Zn=I.a.div(_n||(_n=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),$n=I.a.div(Fn||(Fn=Object(L.a)(["\n  width: 70px;\n  height: 70px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n\n  svg {\n    font-size: 26px;\n    background-color: ",";\n    color: ",";\n    padding: 8px;\n    border-radius: 5px;\n  }\n"])),(function(e){return e.selected?"#212121":"unset"}),(function(e){return e.selected?"#ffffff":"#212121"}));var Kn,Qn,et,nt=function(e){var n=e.handleViewChange,t=e.view,a=function(e){n(t===e?"DesignInfo":e)};return Object(u.jsxs)(Zn,{children:[Object(u.jsx)($n,{selected:"Layers"===t,onClick:function(){return a("Layers")},children:Object(u.jsx)(qn.n,{})}),Object(u.jsx)($n,{selected:"ChangeBaseColor"===t,onClick:function(){return a("ChangeBaseColor")},children:Object(u.jsx)(qn.o,{})}),Object(u.jsx)($n,{selected:"DesignVisibility"===t,onClick:function(){return a("DesignVisibility")},children:Object(u.jsx)(qn.m,{})}),Object(u.jsx)($n,{selected:"DesignMenu"===t||"ChangeDesignName"===t,onClick:function(){return a("DesignMenu")},children:Object(u.jsx)(qn.f,{})})]})},tt=I.a.div(Kn||(Kn=Object(L.a)(["\n  padding-bottom: 10px;\n  padding-left: 20px;\n"]))),at=I.a.p(Qn||(Qn=Object(L.a)(["\n  margin: 5px;\n  font-size: 26px;\n  color: #212121;\n"]))),rt=I.a.p(et||(et=Object(L.a)(["\n  margin: 5px;\n  font-size: 16px;\n  color: #212121;\n"])));var it,ct,st,ot=function(e){var n=e.design;return Object(u.jsxs)(tt,{children:[Object(u.jsx)(at,{children:n.title}),Object(u.jsx)(rt,{children:n.modelName})]})},lt=I.a.div(it||(it=Object(L.a)(["\n  margin: 6px;\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),ut=I.a.p(ct||(ct=Object(L.a)(["\n  font-size: 16px;\n  margin: 0px;\n  padding: 0px;\n  color: #ffffff;\n"]))),dt=I.a.button(st||(st=Object(L.a)(["\n  background-color: transparent;\n  border: none;\n  padding: 0px;\n\n  &:focus {\n    outline: none;\n  }\n\n  svg {\n    font-size: 16px;\n    color: #ffffff;\n  }\n"]))),bt=function(e,n){var t=new FormData;return n?t.append("image",e,"newImage"):t.append("image",e),fetch("/api/assets/uploadimage",{method:"POST",body:t}).then((function(e){return e.json()}))},pt=function(e){return new Promise((function(n){setTimeout((function(){var t=document.getElementById("scene-container-id").firstElementChild.firstElementChild,a=document.createElement("canvas");a.width=1024,a.height=1024,a.getContext("2d").drawImage(t,0,0,1024,1024);for(var r=a.toDataURL("image/png"),i=atob(r.split(",")[1]),c=[],s=0;s<i.length;s++)c.push(i.charCodeAt(s));var o=new Blob([new Uint8Array(c)],{type:"image/png"});o.name="theBlob",o.lastModifiedDate=new Date;var l=new File([o],e,{type:"image/png"});n(l)}),500)}))},ht=function(e){var n=e.split("/");return n=n[n.length-1]};var ft,jt,xt,gt=function(e){var n,t=e.handleViewChange,r=e.design,i=e.canSave,c=e.setCanSave,o=e.userData,d=e.setCameraReset,b=Object(a.useState)(!1),p=Object(l.a)(b,2),h=p[0],f=p[1];"object"===typeof o&&"_id"in o&&(n=o._id);var j=function(){var e=Object(Xe.a)(We.a.mark((function e(){var n,t,a;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=26;break}if(c(!1),r.author){e.next=11;break}return f(!0),d(!0),e.next=7,pt("newImage");case 7:n=e.sent,bt(n,!0).then((function(e){var n=ht(e.image),t={author:o._id,title:r.title,screenshot:n,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};V("/api/outlines","POST",t).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))})),e.next=26;break;case 11:if(r.author!==o._id){e.next=20;break}return f(!0),d(!0),e.next=16,pt(r.screenshot);case 16:t=e.sent,bt(t,!1).then((function(e){var n=ht(e.image),t={author:r.author,title:r.title,screenshot:n,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};V("/api/outlines/".concat(r._id),"PUT",t),f(!1)})),e.next=26;break;case 20:return f(!0),d(!0),e.next=24,pt(r.screenshot);case 24:a=e.sent,bt(a,!0).then((function(e){var n=ht(e.image),t={author:o._id,title:r.title,screenshot:n,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};V("/api/outlines/","POST",t).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))}));case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h?Object(u.jsx)($e,{children:Object(u.jsx)(pn,{})}):Object(u.jsxs)($e,{children:[Object(u.jsxs)(lt,{children:[Object(u.jsx)(ut,{children:r.title}),Object(u.jsx)(dt,{onClick:function(){return t("ChangeDesignName")},children:Object(u.jsx)(qn.p,{})})]}),Object(u.jsxs)(Qe,{children:[Object(u.jsx)(an,{onClick:function(){return d(!0)},children:Object(u.jsx)(rn,{active:!0,children:"Reset Camera"})}),i&&o?Object(u.jsx)(an,{onClick:function(){j()},children:Object(u.jsx)(rn,{active:!0,children:"Save"})}):Object(u.jsx)(an,{children:Object(u.jsx)(rn,{children:"Save"})}),o&&r.author===n?Object(u.jsx)(an,{onClick:function(){o&&o._id===r.author&&(fetch("/api/outlines/".concat(r._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}),window.location.href="/")},children:Object(u.jsx)(rn,{active:!0,children:"Delete"})}):Object(u.jsx)(an,{children:Object(u.jsx)(rn,{children:"Delete"})}),Object(u.jsx)(an,{children:Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(rn,{active:!0,children:"Exit"})})})]})]})},vt=I.a.div(ft||(ft=Object(L.a)(["\n  width: 50%;\n  margin-left: auto;\n  background-color: #212121;\n  border-radius: 9px;\n"]))),Ot=t(13),yt=I.a.div(jt||(jt=Object(L.a)(["\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),mt=I.a.button(xt||(xt=Object(L.a)(["\n  border: ",";\n  border-radius: 4px;\n  width: 100%;\n  height: 38px;\n  background-color: ",";\n  color: ",";\n  padding: 0px;\n  width: 100%;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"1px solid #343434":"unset"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#ffffff":"#999999"}));var Ct=function(e){var n=e.setCurrentShoe,t=e.visibility,a=e.setVisibility,r=function(e){if("left"===e)if(t.left&&t.right){var r=Object(Ot.a)({},t);r.left=!1,a(r),n("right")}else if(t.left&&!t.right){var i=Object(Ot.a)({},t);i.left=!1,i.right=!0,a(i),n("right")}else{var c=Object(Ot.a)({},t);c.left=!0,a(c),n("left")}else if(t.left&&t.right){var s=Object(Ot.a)({},t);s.right=!1,a(s),n("left")}else if(!t.left&&t.right){var o=Object(Ot.a)({},t);o.right=!1,o.left=!0,a(o),n("left")}else{var l=Object(Ot.a)({},t);l.right=!0,a(l),n("right")}};return Object(u.jsxs)(en,{children:[Object(u.jsx)(yt,{children:Object(u.jsx)(mt,{active:t.left,onClick:function(){r("left")},children:"Left"})}),Object(u.jsx)(yt,{children:Object(u.jsx)(mt,{active:t.right,onClick:function(){r("right")},children:"Right"})})]})};var wt,kt,Dt=function(e){var n=e.currentShoe,t=e.setCurrentShoe,a=e.shoeVisibility,r=e.setShoeVisibility;return Object(u.jsx)(vt,{children:Object(u.jsx)($e,{children:Object(u.jsx)(Ct,{currentShoe:n,setCurrentShoe:t,visibility:a,setVisibility:r})})})},St=t(35),Nt=I.a.div(wt||(wt=Object(L.a)(["\n  box-sizing: border-box;\n  background-color: #000000;\n  border-radius: 6px;\n  border: 1px solid #343434;\n  display: flex;\n  flex-direction: row;\n  padding: 3px;\n"]))),Vt=I.a.button(kt||(kt=Object(L.a)(["\n  box-sizing: border-box;\n  font-size: 16px;\n  color: ",";\n  background-color: ",";\n  border: 1px solid;\n  border-radius: 3px;\n  border-color: ",";\n  width: 100%;\n  height: 38px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){return e.active?"#ffffff":"#999999"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#343434":"#000000"}));var Lt,It,Pt,zt=function(e){var n=e.design,t=e.setDesign,r=e.setCanSave,i=e.handleUpdateBaseColor,c=e.currentShoe,s=e.setCurrentShoe,o=Object(a.useState)([]),d=Object(l.a)(o,2),b=d[0],p=d[1];Object(a.useEffect)((function(){p(function(){var e=[];for(var t in n.outlineData.parts){for(var a in n.outlineData.parts[t].right){var r=n.outlineData.parts[t].right[a].type;if("color"===r||"mask"===r){var i=n.outlineData.parts[t].right[a].color;e.includes(i)||e.push(i)}}for(var c in n.outlineData.parts[t].left){var s=n.outlineData.parts[t].left[c].type;if("color"===s||"mask"===s){var o=n.outlineData.parts[t].left[c].color;e.includes(o)||e.push(o)}}}for(var l in n.outlineData.overlays){for(var u in n.outlineData.overlays[l].right)if("color"===n.outlineData.overlays[l].right[u].type){var d=n.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var b in n.outlineData.overlays[l].left)if("color"===n.outlineData.overlays[l].left[b].type){var p=n.outlineData.overlays[l].left[b].color;e.includes(p)||e.push(p)}}var h=n.outlineData.baseColors.right;e.includes(h)||e.push(h);var f=n.outlineData.baseColors.left;return e.includes(f)||e.push(f),e}())}),[n,p]);var h=Object(a.useState)(n.outlineData.baseColors.left===n.outlineData.baseColors.right?"both":c),f=Object(l.a)(h,2),j=f[0],x=f[1],g=Object(a.useState)(n.outlineData.baseColors[c]),v=Object(l.a)(g,2),O=v[0],y=v[1],m=function(e){var n=e.hex||e;y(n)},C=function(e){x(e),"right"!==e&&"left"!==e||(s(e),y(n.outlineData.baseColors[e]))};return Object(u.jsxs)($e,{children:[Object(u.jsxs)(nn,{children:[Object(u.jsx)(tn,{children:Object(u.jsx)(Ke,{children:"Base Color"})}),Object(u.jsx)(cn,{children:Object(u.jsx)(sn,{active:!0,onClick:function(){return function(){var e=Object(St.cloneDeep)(n);"left"===j?e.outlineData.baseColors.left=O:"right"===j?e.outlineData.baseColors.right=O:"both"===j&&(e.outlineData.baseColors.left=O,e.outlineData.baseColors.right=O),r(!0),t(e),i(e)}()},children:Object(u.jsx)(qn.g,{})})})]}),Object(u.jsx)(en,{children:Object(u.jsxs)(Nt,{children:[Object(u.jsx)(Vt,{active:"left"===j,onClick:function(){C("left")},children:"Left"}),Object(u.jsx)(Vt,{active:"both"===j,onClick:function(){C("both")},children:"Both"}),Object(u.jsx)(Vt,{active:"right"===j,onClick:function(){C("right")},children:"Right"})]})}),Object(u.jsx)(Mn,{colorsArray:b,color:O,onChangeComplete:m,handleColorChange:m})]})},Et=function(e){var n=e.split(/(?=[A-Z])/).join(" ");return n.charAt(0).toUpperCase()+n.substr(1)},Mt=I.a.div(Lt||(Lt=Object(L.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n"]))),Tt=I.a.button(It||(It=Object(L.a)(["\n  margin: auto;\n  padding: 12px;\n  border: none;\n  background-color: transparent;\n  color: #ffffff;\n  font-size: 18px;\n\n  &:focus {\n    outline: none;\n  }\n"]))),Rt=I.a.button(Pt||(Pt=Object(L.a)(["\n  font-weight: bold;\n  color: #ffffff;\n  background-color: transparent;\n  border: none;\n  font-size: 1rem;\n  padding-left: 15px;\n  padding-right: 15px;\n\n  &:focus {\n    outline: none;\n  }\n"])));var At,Gt,Ut,Bt,_t,Ft,Yt,Wt,Xt,Ht,Jt,qt,Zt,$t=function(e){var n=e.design,t=e.currentPart,a=e.setCurrentPart,r=e.setCurrentLayer,i=e.setLayersView,c=n.configData.partsArray.length,s=n.configData.partsArray,o=function(e){a(0===t&&e<0?c-1:t===c-1&&e>0?0:t+e)};return Object(u.jsxs)(Mt,{children:[Object(u.jsx)(Rt,{onClick:function(){o(-1),r(-1)},children:Object(u.jsx)(qn.i,{})}),Object(u.jsx)(Tt,{className:"partname-button",onClick:function(){i("PartList")},children:Et(s[t])}),Object(u.jsx)(Rt,{onClick:function(){o(1),r(-1)},children:Object(u.jsx)(qn.j,{})})]})},Kt=I.a.div(At||(At=Object(L.a)([""]))),Qt=I.a.div(Gt||(Gt=Object(L.a)(["\n  height: 3px;\n  background-color: #000000;\n  border-top: 1px solid #343434;\n  border-bottom: 1px solid #343434;\n  border-right: none;\n  border-left: none;\n"]))),ea=I.a.div(Ut||(Ut=Object(L.a)(["\n  margin: 6px;\n  display: flex;\n  justify-content: space-between;\n"]))),na=I.a.div(Bt||(Bt=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),ta=I.a.p(_t||(_t=Object(L.a)(["\n  font-size: 16px;\n  color: #ffffff;\n  margin: 0px;\n  padding-left: 6px;\n"]))),aa=I.a.div(Ft||(Ft=Object(L.a)(["\n  display: flex;\n\n  svg {\n    color: #ffffff;\n  }\n"]))),ra=I.a.div(Yt||(Yt=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 140px;\n  margin: 6px;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),ia=I.a.div(Wt||(Wt=Object(L.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n"]))),ca=I.a.div(Xt||(Xt=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]))),sa=I.a.div(Ht||(Ht=Object(L.a)(["\n  height: 40px;\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 3px;\n  font-size: 16px;\n  text-transform: capitalize;\n  overflow: hidden;\n"]))),oa=I.a.div(Jt||(Jt=Object(L.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  background-color: ",";\n  color: ",";\n  justify-content: center;\n  border: ",";\n  border-radius: 4px;\n"])),(function(e){return e.active?"#EEEEEE":"#212121"}),(function(e){return e.active?"#000000":"#EEEEEE"}),(function(e){return e.active?"1px solid #EEEEEE":"1px solid #343434"})),la=I.a.p(qt||(qt=Object(L.a)(["\n  margin: 0px;\n  padding-left: 10px;\n"]))),ua=I.a.div(Zt||(Zt=Object(L.a)(["\n  width: 40px;\n  margin-right: 3px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 4px;\n  background-color: #212121;\n"])));var da,ba,pa,ha,fa=function(e){var n,t=e.props,a=t.allLayers,r=t.currentPart,i=t.design,c=t.currentLayer,s=t.numberOfLayers,o=t.setCurrentLayer,l=t.setCurrentPart,d=t.setLayersView,b=t.handleDeleteLayer,p=t.handleEditLayer,h=t.handleMoveLayer,f=function(e,n){-1!==e&&(-1===n?0!==e&&h(e,n):e!==s-1&&h(e,n))};return Object(u.jsxs)(Kt,{children:[Object(u.jsx)($t,{design:i,currentPart:r,setCurrentPart:l,setCurrentLayer:o,setLayersView:d}),Object(u.jsx)(Qt,{}),Object(u.jsxs)(ea,{children:[Object(u.jsx)(na,{children:Object(u.jsx)(ta,{children:"Layers"})}),Object(u.jsxs)(aa,{children:[Object(u.jsx)(cn,{children:Object(u.jsx)(sn,{active:-1!==c&&"overlay"!==(null===a||void 0===a||null===(n=a[c])||void 0===n?void 0:n.type),onClick:function(){var e;-1!==(e=c)&&"overlay"!==a[e].type&&b(e)},children:Object(u.jsx)(qn.s,{})})}),Object(u.jsx)(cn,{children:Object(u.jsx)(sn,{active:-1!==c&&s-1!==c,onClick:function(){return f(c,1)},children:Object(u.jsx)(qn.k,{})})}),Object(u.jsx)(cn,{children:Object(u.jsx)(sn,{active:-1!==c&&0!==c,onClick:function(){return f(c,-1)},children:Object(u.jsx)(qn.h,{})})}),Object(u.jsx)(cn,{children:Object(u.jsx)(sn,{active:!0,onClick:function(){return d("AddLayerType")},children:Object(u.jsx)(qn.q,{})})})]})]}),Object(u.jsx)(ra,{id:"layers-box",onClick:function(e){return function(e){e.preventDefault(),"layers-box"===e.target.id&&o(-1)}(e)},children:Object(u.jsx)(ca,{children:Object(u.jsx)(ia,{children:a.map((function(e,n){return Object(u.jsxs)(sa,{onClick:function(){n===c?p(n,e):o(n)},children:["color"===e.type?Object(u.jsx)(ua,{style:{backgroundColor:e.color}}):"graphic"===e.type?Object(u.jsx)(ua,{children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):"mask"===e.type?Object(u.jsx)(ua,{children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):Object(u.jsx)(ua,{children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.source,"Mask.png"),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}),Object(u.jsx)(oa,{active:n===c,children:Object(u.jsx)(la,{children:"overlay"===e.type?Et(e.source).toLowerCase():e.type})})]},n)}))})})})]})},ja=I.a.div(da||(da=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 220px;\n  margin: 6px;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n"]))),xa=I.a.div(ba||(ba=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]))),ga=I.a.div(pa||(pa=Object(L.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 6px;\n  row-gap: 6px;\n"]))),va=I.a.button(ha||(ha=Object(L.a)(["\n  box-sizing: border-box;\n  color: ",";\n  background-color: ",";\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 4px;\n  margin: 3px;\n  height: 40px;\n  font-size: 16px;\n  text-transform: capitalize;\n  overflow: hidden;\n"])),(function(e){return e.active?"#ffffff":"#999999"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#343434":"#000000"}));var Oa=function(e){var n=e.props,t=n.design,a=n.setCurrentPart,r=n.setLayersView,i=n.setCurrentLayer,c=n.currentPartName;return Object(u.jsxs)($e,{children:[Object(u.jsx)(Ke,{children:"Select Part"}),Object(u.jsx)(ja,{children:Object(u.jsx)(xa,{children:Object(u.jsx)(ga,{children:t.configData.partsArray.map((function(e,n){return Object(u.jsx)(va,{active:c===e,onClick:function(){i(-1),a(n),r("LayersMain")},children:e},n)}))})})}),Object(u.jsx)(en,{children:Object(u.jsx)(an,{children:Object(u.jsx)(rn,{active:!0,onClick:function(){return r("LayersMain")},children:"Back"})})})]})};var ya=function(e){var n=e.props,t=n.design,a=n.currentPartName,r=n.handleAddLayer,i=n.setLayersView;return Object(u.jsxs)($e,{children:[Object(u.jsx)(Ke,{children:"Select Layer Type"}),Object(u.jsxs)(en,{children:[t.configData.layerTypes[a].types.map((function(e,n){return Object(u.jsx)(an,{children:"Mask"===e?Object(u.jsx)(rn,{active:!0,onClick:function(){i("MaskTypes")},children:e}):"Graphic"===e?Object(u.jsx)(rn,{active:!0,onClick:function(){i("GraphicPicker")},children:e}):Object(u.jsx)(rn,{active:!0,onClick:function(){r(e),i("LayersMain")},children:e})},n)})),Object(u.jsx)(an,{children:Object(u.jsx)(rn,{active:!0,onClick:function(){return i("LayersMain")},children:"Cancel"})})]})]})};var ma=function(e){var n=e.props,t=n.design,a=n.currentPartName,r=n.handleAddMaskLayer,i=n.setLayersView;return Object(u.jsxs)($e,{children:[Object(u.jsx)(Ke,{children:"Select Mask Type"}),Object(u.jsxs)(en,{children:[t.configData.maskTypes[a].map((function(e,n){return Object(u.jsx)(an,{children:Object(u.jsx)(rn,{active:!0,onClick:function(){r(e[0],e[1]),i("LayersMain")},children:e[0]})},n)})),Object(u.jsx)(an,{children:Object(u.jsx)(rn,{active:!0,onClick:function(){return i("LayersMain")},children:"Cancel"})})]})]})};var Ca,wa,ka,Da,Sa=function(e){var n=e.props,t=n.currentLayer,r=n.currentPartName,i=n.design,c=n.handleChangeManager,s=n.setLayersView,o=n.setCanSave,d=n.currentShoe,b=Object(a.useState)("#ffffaa"),p=Object(l.a)(b,2),h=p[0],f=p[1],j=Object(a.useState)([]),x=Object(l.a)(j,2),g=x[0],v=x[1];Object(a.useEffect)((function(){v(function(){var e=[];for(var n in i.outlineData.parts){for(var t in i.outlineData.parts[n].right){var a=i.outlineData.parts[n].right[t].type;if("color"===a||"mask"===a){var r=i.outlineData.parts[n].right[t].color;e.includes(r)||e.push(r)}}for(var c in i.outlineData.parts[n].left){var s=i.outlineData.parts[n].left[c].type;if("color"===s||"mask"===s){var o=i.outlineData.parts[n].left[c].color;e.includes(o)||e.push(o)}}}for(var l in i.outlineData.overlays){for(var u in i.outlineData.overlays[l].right)if("color"===i.outlineData.overlays[l].right[u].type){var d=i.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var b in i.outlineData.overlays[l].left)if("color"===i.outlineData.overlays[l].left[b].type){var p=i.outlineData.overlays[l].left[b].color;e.includes(p)||e.push(p)}}var h=i.outlineData.baseColors.right;e.includes(h)||e.push(h);var f=i.outlineData.baseColors.left;return e.includes(f)||e.push(f),e}()),f("outerOverlay"===r||"innerOverlay"===r?i.outlineData.overlays[r][d][t].color:i.outlineData.parts[r][d][t].color)}),[i,r,t,v,d]);var O=function(e){o(!0);var n=e.hex||e;f(e),c({type:"color-changed",partName:r,layerIndex:t,newColor:n})};return Object(u.jsxs)($e,{children:[Object(u.jsxs)(nn,{children:[Object(u.jsx)(tn,{children:Object(u.jsx)(Ke,{children:Et(r)})}),Object(u.jsx)(cn,{children:Object(u.jsx)(sn,{active:!0,onClick:function(){return s("LayersMain")},children:Object(u.jsx)(qn.g,{})})})]}),Object(u.jsx)(Mn,{color:h,colorsArray:g,onChangeComplete:O,handleColorChange:O})]})},Na=(t(325),I.a.div(Ca||(Ca=Object(L.a)(["\n  height: 300px;\n  position: relative;\n  margin: 6px;\n"])))),Va=I.a.div(wa||(wa=Object(L.a)(["\n  transform: ",";\n"])),(function(e){return e.mirror?"scaleX(-1)":"unset"})),La=I.a.button(ka||(ka=Object(L.a)(["\n  background-color: #00000077;\n  color: #ffffff;\n  width: 40px;\n  height: 40px;\n  border: none;\n  margin: auto;\n  border-radius: 50px;\n  padding: 0px;\n  font-size: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  &:focus {\n    outline: none;\n  }\n"]))),Ia=I.a.div(Da||(Da=Object(L.a)(["\n  position: absolute;\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: grid;\n  grid-template-columns: 1fr 3fr 1fr 3fr 1fr;\n  grid-template-rows: 1fr 3fr 1fr 3fr 1fr;\n  z-index: 1;\n  grid-template-areas:\n    'counter . up . clock'\n    '. . . . .'\n    'left . . . right'\n    '. . . . .'\n    'compress . down . expand';\n"])));var Pa=function(e){var n=e.props,t=n.currentLayer,r=n.currentPartName,i=n.graphicVisualCanvas,c=n.handleChangeManager,s=n.handleUpdateGraphicVisualCanvas,o=n.setLayersView,l=n.setCanSave,d=n.currentShoe,b=function(e,n){l(!0),c({type:"graphic-moved",partName:r,layerIndex:t,direction:e,distance:n})};return Object(a.useEffect)((function(){!function(){var e=document.getElementById("graphic-visual-container");e.innerHTML="",e.appendChild(i)}(),s(r)}),[]),Object(u.jsxs)($e,{children:[Object(u.jsxs)(Na,{children:[Object(u.jsxs)(Ia,{children:[Object(u.jsx)(La,{id:"up-button",onClick:function(){return b("vert",-30)},children:Object(u.jsx)(qn.d,{})}),Object(u.jsx)(La,{id:"down-button",onClick:function(){return b("vert",30)},children:Object(u.jsx)(qn.a,{})}),Object(u.jsx)(La,{id:"left-button",onClick:function(){return b("hor",-30)},children:Object(u.jsx)(qn.b,{})}),Object(u.jsx)(La,{id:"right-button",onClick:function(){return b("hor",30)},children:Object(u.jsx)(qn.c,{})}),Object(u.jsx)(La,{id:"scale-up-button",onClick:function(){return b("scale",1.1)},children:Object(u.jsx)(qn.e,{})}),Object(u.jsx)(La,{id:"scale-down-button",onClick:function(){return b("scale",.9)},children:Object(u.jsx)(qn.l,{})}),Object(u.jsx)(La,{id:"clockwise-button",onClick:function(){return b("rotate",5)},children:Object(u.jsx)(qn.r,{})}),Object(u.jsx)(La,{id:"counterclockwise-button",onClick:function(){return b("rotate",-5)},children:Object(u.jsx)(qn.t,{})})]}),Object(u.jsx)(Va,{id:"graphic-visual-container",mirror:"left"===d})]}),Object(u.jsxs)(Qe,{children:[Object(u.jsx)(an,{children:Object(u.jsx)(rn,{onClick:function(){return b("reset",0)},children:"Reset"})}),Object(u.jsx)(an,{children:Object(u.jsx)(rn,{onClick:function(){return o("LayersMain")},children:"Done"})})]})]})};t(326),t(327);var za=function(e){var n=e.graphicsArray,t=e.handleAddGraphicLayer;return Object(u.jsx)("div",{className:"current-graphics-container",children:n.map((function(e,n){return Object(u.jsx)("div",{className:"current-graphics-item",onClick:function(){return t(e)},children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e),alt:"used-already"})},n)}))})};var Ea={LayersMain:fa,PartList:Oa,AddLayerType:ya,MaskTypes:ma,ColorEditor:Sa,GraphicEditor:Pa,GraphicPicker:function(e){var n=e.props,t=n.setLayersView,r=n.handleAddLayer,i=n.design,c=Object(a.useState)(!1),s=Object(l.a)(c,2),o=s[0],d=s[1],b=Object(a.useState)(!1),p=Object(l.a)(b,2),h=p[0],f=p[1],j=Object(a.useState)(),x=Object(l.a)(j,2),g=x[0],v=x[1];Object(a.useEffect)((function(){v(function(){var e=["red-apple.png"];for(var n in i.outlineData.parts){for(var t in i.outlineData.parts[n].right)if("graphic"===i.outlineData.parts[n].right[t].type){var a=i.outlineData.parts[n].right[t].link;e.includes(a)||e.push(a)}for(var r in i.outlineData.parts[n].left)if("graphic"===i.outlineData.parts[n].left[r].type){var c=i.outlineData.parts[n].left[r].link;e.includes(c)||e.push(c)}}for(var s in i.outlineData.overlays){for(var o in i.outlineData.overlays[s].right)if("graphic"===i.outlineData.overlays[s].right[o].type){var l=i.outlineData.overlays[s].right[o].link;e.includes(l)||e.push(l)}for(var u in i.outlineData.overlays[s].left)if("graphic"===i.outlineData.overlays[s].left[u].type){var d=i.outlineData.overlays[s].left[u].link;e.includes(d)||e.push(d)}}return e[0]?e:null}())}),[i]);var O=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n.target.files[0].size/1024/1024).toFixed(4)<2)){e.next=8;break}return f(!0),t=n.target.files[0],e.next=6,bt(t,!0).then((function(e){var n=ht(e.image);y(n)}));case 6:e.next=9;break;case 8:d(!0);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(e){r("Graphic",e),t("LayersMain")};return h?Object(u.jsx)($e,{children:Object(u.jsx)(pn,{})}):Object(u.jsxs)($e,{children:[Object(u.jsx)(Ke,{children:"Graphics"}),g&&Object(u.jsx)("div",{className:"used-graphics",children:Object(u.jsx)(za,{graphicsArray:g,handleAddGraphicLayer:y})}),Object(u.jsx)("div",{className:"upload-image-input",children:Object(u.jsxs)("label",{htmlFor:"image-input-id",className:"upload-image-label",children:[Object(u.jsx)("input",{onChange:function(e){return O(e)},id:"image-input-id",type:"file",name:"myImage",accept:"image/png, image/jpeg, .png, .jpg"}),"Upload"]})}),o&&Object(u.jsx)("div",{className:"file-size-warning",children:Object(u.jsx)("p",{children:"file must be less that 2MB."})}),Object(u.jsx)(en,{children:Object(u.jsx)(an,{children:Object(u.jsx)(rn,{active:!0,onClick:function(){return t("LayersMain")},children:"Cancel"})})})]})}};var Ma,Ta,Ra=function(e){var n=e.layersView,t=e.setLayersView,a=e.currentLayer,r=e.currentPart,i=e.design,c=e.graphicVisualCanvas,s=e.handleChangeManager,o=e.handleUpdateGraphicVisualCanvas,l=e.handleViewChange,d=e.setCurrentLayer,b=e.setCurrentPart,p=e.setCanSave,h=e.currentShoe,f=Object.keys(i.configData.partsObject)[r],j="parts";"outerOverlay"!==f&&"innerOverlay"!==f||(j="overlays");var x=i.outlineData[j][f][h].length,g=i.outlineData[j][f][h],v=Ea[n],O={allLayers:g,currentPart:r,currentLayer:a,currentPartName:f,design:i,graphicVisualCanvas:c,handleAddLayer:function(e,n){p(!0),s(Object(Ot.a)({type:"layer-added",partName:f,layerType:e},n&&{fileName:n})),d(x)},handleAddMaskLayer:function(e,n){p(!0),s({type:"layer-added",partName:f,layerType:"Mask",maskType:e,maskLink:n}),d(x)},handleMoveLayer:function(e,n){p(!0),s({type:"layer-moved",partName:f,layerIndex:e,direction:n}),d(a+n)},handleEditLayer:function(e,n){"color"===n.type?(d(e),t("ColorEditor")):"graphic"===n.type?(d(e),t("GraphicEditor")):"mask"===n.type?(d(e),t("ColorEditor")):"overlay"===n.type&&(b(i.configData.partsArray.indexOf(n.source)),d(-1))},handleDeleteLayer:function(e){p(!0),s({type:"layer-deleted",partName:f,layerIndex:e}),d(-1)},handleChangeManager:s,handleUpdateGraphicVisualCanvas:o,handleViewChange:l,setCurrentLayer:d,setCurrentPart:b,setLayersView:t,numberOfLayers:x,setCanSave:p,currentShoe:h,layersView:n};return Object(u.jsx)($e,{children:Object(u.jsx)(v,{props:O})})},Aa=I.a.p(Ma||(Ma=Object(L.a)(["\n  color: #ffffff;\n  margin: 16px;\n"]))),Ga=I.a.input(Ta||(Ta=Object(L.a)(["\n  display: block;\n  font-size: 18px;\n  outline: none;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: none;\n  border-radius: 3px;\n  height: 38px;\n  padding-left: 10px;\n"])));var Ua=function(e){var n=e.handleViewChange,t=e.design,a=e.setDesign,r=e.setCanSave;return Object(u.jsxs)($e,{children:[Object(u.jsx)(Aa,{children:"Design Name"}),Object(u.jsxs)(en,{children:[Object(u.jsx)(an,{children:Object(u.jsx)(Ga,{type:"text",id:"design-name-input",defaultValue:t.title})}),Object(u.jsx)(an,{children:Object(u.jsx)(rn,{active:!0,onClick:function(){return function(){var e=Object(St.cloneDeep)(t),i=Object(St.startCase)(document.getElementById("design-name-input").value);e.title=i,r(!0),a(e),n("DesignMenu")}()},children:"Done"})})]})]})};var Ba,_a=function(e){var n,t=e.design,r=e.setDesign,i=e.graphicVisualCanvas,c=e.handleUpdateGraphicVisualCanvas,s=e.handleChangeManager,o=e.handleUpdateBaseColor,d=e.userData,b=e.currentPart,p=e.setCurrentPart,h=e.currentShoe,f=e.setCurrentShoe,j=e.shoeVisibility,x=e.setShoeVisibility,g=e.view,v=e.setView,O=e.layersView,y=e.setLayersView,m=e.currentLayer,C=e.setCurrentLayer,w=e.setCameraReset,k=Object(a.useState)(!1),D=Object(l.a)(k,2),S=D[0],N=D[1],V=function(e){v(e)};return"DesignMenu"===g?n=Object(u.jsx)(gt,{handleViewChange:V,design:t,setDesign:r,canSave:S,setCanSave:N,userData:d,currentShoe:h,setCurrentShoe:f,shoeVisibility:j,setShoeVisibility:x,setCameraReset:w}):"Layers"===g?n=Object(u.jsx)(Ra,{layersView:O,setLayersView:y,handleViewChange:V,design:t,setDesign:r,currentShoe:h,currentPart:b,setCurrentPart:p,currentLayer:m,setCurrentLayer:C,graphicVisualCanvas:i,handleUpdateGraphicVisualCanvas:c,handleChangeManager:s,setCanSave:N}):"ChangeDesignName"===g?n=Object(u.jsx)(Ua,{handleViewChange:V,design:t,setDesign:r,setCanSave:N}):"ChangeBaseColor"===g?n=Object(u.jsx)(zt,{handleViewChange:V,design:t,setDesign:r,setCanSave:N,handleUpdateBaseColor:o,currentShoe:h,setCurrentShoe:f}):"DesignInfo"===g?n=Object(u.jsx)(ot,{design:t}):"DesignVisibility"===g&&(n=Object(u.jsx)(Dt,{currentShoe:h,setCurrentShoe:f,shoeVisibility:j,setShoeVisibility:x})),Object(u.jsxs)(Xn,{children:[Object(u.jsx)(Hn,{children:n}),Object(u.jsx)(Jn,{children:Object(u.jsx)(nt,{handleViewChange:V,view:g})})]})},Fa=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,f,j,x,g,v,O;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.setTexturesLoaded,a=n.design,r=n.graphicVisualCanvas,i=n.rightInnerOverlayCanvas,c=n.rightOuterOverlayCanvas,s=n.rightTexture,o=n.rightTextureCanvas,l=n.leftInnerOverlayCanvas,u=n.leftOuterOverlayCanvas,d=n.leftTexture,b=n.leftTextureCanvas,p=n.rightCanvasObjectRef,h=n.rightOverlaysCanvasObjectRef,f=n.rightBaseColorCanvasObjectRef,j=n.leftBaseColorCanvasObjectRef,x=n.leftCanvasObjectRef,g=n.leftOverlaysCanvasObjectRef,e.next=3,er({design:a,type:"overlaysCanvasObject",currentShoe:"right"});case 3:return h.current=e.sent,e.next=6,er({design:a,type:"overlaysCanvasObject",currentShoe:"left"});case 6:return g.current=e.sent,nr({design:a,overlayCanvasObject:h.current,overlayCanvas:c,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),nr({design:a,overlayCanvasObject:g.current,overlayCanvas:u,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),nr({design:a,overlayCanvasObject:h.current,overlayCanvas:i,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),nr({design:a,overlayCanvasObject:g.current,overlayCanvas:l,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),e.next=13,er({design:a,type:"partsCanvasObject",overlays:[c,i],currentShoe:"right"});case 13:return p.current=e.sent,e.next=16,er({design:a,type:"partsCanvasObject",overlays:[u,l],currentShoe:"left"});case 16:return x.current=e.sent,e.next=19,er({design:a,type:"baseColorCanvasObject",currentShoe:"right"});case 19:return f.current=e.sent,e.next=22,er({design:a,type:"baseColorCanvasObject",currentShoe:"left"});case 22:return j.current=e.sent,e.next=25,hr({design:a,canvasObject:p.current,baseColorCanvasObject:f.current});case 25:return v=e.sent,e.next=28,hr({design:a,canvasObject:x.current,baseColorCanvasObject:j.current});case 28:O=e.sent,o.getContext("2d").drawImage(v,0,0),s.needsUpdate=!0,b.getContext("2d").drawImage(O,0,0),d.needsUpdate=!0,t(!0);case 34:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ya=function(e){var n=new Ze.CanvasTexture(e);return n.flipY=!1,n},Wa=function(e){var n=e.design;return new Promise((function(e){var t=n.configData.canvasSize,a=document.createElement("canvas");a.width=t,a.height=t;var r=a.getContext("2d");!function n(){null!==r&&"object"===typeof a?(r.fillStyle="#ffffff",r.fillRect(0,0,t,t),e(a)):setTimeout(n,100)}()}))},Xa=function(e){var n=e.design;return new Promise((function(e){var t=n.configData.canvasSize,a=document.createElement("canvas");a.width=t,a.height=t;var r=a.getContext("2d"),i=new Image;i.src="/api/assets/designimages/".concat(n.configData.source.redMap),i.onload=function(){!function n(){null!==r&&"object"===typeof a?(r.drawImage(i,0,0,1e3,1e3),e(a)):setTimeout(n,100)}()}}))},Ha=function(e){var n=e.design.configData.canvasSize,t=document.createElement("canvas");return t.id="graphic-visual-canvas",t.width=n,t.height=n,t},Ja=function(e){var n=e.design,t=e.layer,a=e.partName;return new Promise((function(e){var r=n.configData.partsObject[a].mask,i=t.color,c=n.configData.canvasSize,s=document.createElement("canvas");s.width=c,s.height=c;var o=s.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function n(){null!==o&&"object"===typeof s?(o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=i,o.fillRect(0,0,c,c),e(s)):setTimeout(n,100)}()}}))},qa=function(e){var n=e.design,t=e.layer,a=e.partName,r=e.currentShoe;return new Promise((function(e){var i=n.configData.partsObject[a].mask,c=t.link,s=t.x,o=t.y,l=t.scale,u=t.rotation,d=n.configData.canvasSize,b=document.createElement("canvas");b.width=d,b.height=d;var p=b.getContext("2d"),h=new Image;h.src="/api/assets/images/".concat(c),h.onload=function(){var n=h.width,t=h.height,a=Math.round(Math.sqrt(n*n+t*t)),c=document.createElement("canvas");c.id="pythagorean-canvas",c.width=a,c.height=a;var f=c.getContext("2d");!function n(){if(null!==f&&"object"===typeof c&&null!==p&&"object"===typeof b){f.translate(c.width/2,c.height/2),f.rotate(u*Math.PI/180),f.drawImage(h,h.width/-2,h.height/-2,h.width,h.height);var t=new Image;t.src="/api/assets/designimages/".concat(i),t.onload=function(){p.drawImage(t,0,0,d,d),p.globalCompositeOperation="source-in";var n=s+(d-d*l)/2,a=o+(d-d*l)/2,i=d*l;"left"===r&&(p.scale(-1,1),p.translate(-d,0)),p.drawImage(c,n,a,i,i),e(b)}}else setTimeout(n,100)}()}}))},Za=function(e){var n=e.design,t=e.layer,a=e.currentShoe;return new Promise((function(e){var r=t.link,i=t.color,c=n.configData.canvasSize,s=document.createElement("canvas");s.width=c,s.height=c;var o=s.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function n(){null!==o&&"object"===typeof s?("left"===a&&"heelWingLogoMask.png"===r&&(o.scale(-1,1),o.translate(-c,0)),o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=i,o.fillRect(0,0,c,c),e(s)):setTimeout(n,100)}()}}))},$a=function(e){var n=e.design,t=e.layer,a=e.partName,r=e.overlayCanvas;return new Promise((function(e){var i=n.configData.partsObject[a].mask,c=t.source,s=n.configData.translations[c][a],o=s.x,l=s.y,u=s.scale,d=s.rotation,b=n.configData.canvasSize,p=document.createElement("canvas");p.width=b,p.height=b;var h=p.getContext("2d"),f=new Image;f.src="/api/assets/designimages/".concat(i),f.onload=function(){!function n(){null!==h&&"object"===typeof p?(h.drawImage(f,0,0,b,b),h.globalCompositeOperation="source-in",h.translate(b*o,b*l),h.rotate(d),h.drawImage(r,0,0,b*u,b*u),e(p)):setTimeout(n,100)}()}}))},Ka=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i,c,s,o,l;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.design,a=n.designLayers,r=n.partName,i=n.overlays,c=n.currentShoe,s=[],e.t0=We.a.keys(a);case 3:if((e.t1=e.t0()).done){e.next=44;break}if(o=e.t1.value,"color"!==a[o].type){e.next=12;break}return e.next=8,Ja({design:t,layer:a[o],partName:r});case 8:l=e.sent,s.push(l),e.next=42;break;case 12:if("graphic"!==a[o].type){e.next=20;break}return e.t2=s,e.next=16,qa({design:t,layer:a[o],partName:r,currentShoe:c});case 16:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=42;break;case 20:if("mask"!==a[o].type){e.next=28;break}return e.t4=s,e.next=24,Za({design:t,layer:a[o],currentShoe:c});case 24:e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.next=42;break;case 28:if("overlay"!==a[o].type){e.next=42;break}if("outerOverlay"!==a[o].source){e.next=37;break}return e.t6=s,e.next=33,$a({design:t,layer:a[o],partName:r,overlayCanvas:i[0]});case 33:e.t7=e.sent,e.t6.push.call(e.t6,e.t7),e.next=42;break;case 37:return e.t8=s,e.next=40,$a({design:t,layer:a[o],partName:r,overlayCanvas:i[1]});case 40:e.t9=e.sent,e.t8.push.call(e.t8,e.t9);case 42:e.next=3;break;case 44:return e.abrupt("return",{layers:s});case 45:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Qa=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.design,a=n.partName,r=n.currentShoe,e.next=3,Ja({design:t,layer:{color:t.outlineData.baseColors[r]},partName:a});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),er=function(e){var n=e.design,t=e.type,a=e.overlays,r=e.currentShoe;return new Promise((function(e,i){var c={};(function(){var i=Object(Xe.a)(We.a.mark((function i(){var s,o,l;return We.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("partsCanvasObject"!==t){i.next=11;break}i.t0=We.a.keys(n.outlineData.parts);case 2:if((i.t1=i.t0()).done){i.next=9;break}return s=i.t1.value,i.next=6,Ka({design:n,designLayers:n.outlineData.parts[s][r],partName:s,overlays:a,currentShoe:r});case 6:c[s]=i.sent,i.next=2;break;case 9:i.next=31;break;case 11:if("overlaysCanvasObject"!==t){i.next=22;break}i.t2=We.a.keys(n.outlineData.overlays);case 13:if((i.t3=i.t2()).done){i.next=20;break}return o=i.t3.value,i.next=17,Ka({design:n,designLayers:n.outlineData.overlays[o][r],partName:o,currentShoe:r});case 17:c[o]=i.sent,i.next=13;break;case 20:i.next=31;break;case 22:if("baseColorCanvasObject"!==t){i.next=31;break}i.t4=We.a.keys(n.outlineData.parts);case 24:if((i.t5=i.t4()).done){i.next=31;break}return l=i.t5.value,i.next=28,Qa({design:n,partName:l,currentShoe:r});case 28:c[l]=i.sent,i.next=24;break;case 31:e(c);case 32:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}})()()}))},nr=function(e){var n=e.design,t=e.overlayCanvasObject,a=e.overlayCanvas,r=e.partName,i=e.graphicVisualCanvas,c=n.configData.canvasSize,s=a.getContext("2d"),o=i.getContext("2d");for(var l in o.clearRect(0,0,c,c),s.clearRect(0,0,c,c),t[r].layers){var u=t[r].layers[l];s.drawImage(u,0,0,c,c),o.drawImage(u,0,0,c,c)}},tr=function(e){var n=e.design,t=e.graphicVisualCanvas,a=e.partName,r=e.canvasObject,i=e.baseColorCanvasObject,c=n.configData.canvasSize,s=t.getContext("2d");if(s.clearRect(0,0,c,c),i[a]){var o=i[a];s.drawImage(o,0,0,c,c)}for(var l in r[a].layers){var u=r[a].layers[l];s.drawImage(u,0,0,c,c)}},ar=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.partName,a=n.layerIndex,r=n.layerObject,i=n.canvasObject,c=n.textureCanvas,s=n.texture,o=n.graphicVisualCanvas,l=n.design,u=n.baseColorCanvasObject,d=n.currentShoe,"color"!==r.type){e.next=7;break}return e.next=4,Ja({design:l,layer:r,partName:t});case 4:b=e.sent,e.next=16;break;case 7:if("graphic"!==r.type){e.next=13;break}return e.next=10,qa({design:l,layer:r,partName:t,currentShoe:d});case 10:b=e.sent,e.next=16;break;case 13:return e.next=15,Za({design:l,layer:r,currentShoe:d});case 15:b=e.sent;case 16:i[t].layers[a]=b,sr({textureCanvas:c,canvasObjectPart:i[t],partName:t,texture:s,graphicVisualCanvas:o,design:l,baseColorCanvasObject:u});case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),rr=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.canvasObject,a=n.graphicVisualCanvas,r=n.layerObject,i=n.partName,c=n.texture,s=n.textureCanvas,o=n.design,l=n.baseColorCanvasObject,u=n.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Ja({design:o,layer:r,partName:i});case 4:d=e.sent,t[i].layers.push(d),e.next=19;break;case 8:if("graphic"!==r.type){e.next=15;break}return e.next=11,qa({design:o,layer:r,partName:i,currentShoe:u});case 11:b=e.sent,t[i].layers.push(b),e.next=19;break;case 15:return e.next=17,Za({design:o,layer:r,currentShoe:u});case 17:p=e.sent,t[i].layers.push(p);case 19:sr({textureCanvas:s,canvasObjectPart:t[i],partName:i,texture:c,graphicVisualCanvas:a,design:o,baseColorCanvasObject:l});case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ir=function(e){var n=e.canvasObject,t=e.partName,a=e.layerIndex,r=e.textureCanvas,i=e.texture,c=e.graphicVisualCanvas,s=e.design,o=e.baseColorCanvasObject;n[t].layers.splice(a,1),sr({textureCanvas:r,canvasObjectPart:n[t],partName:t,texture:i,graphicVisualCanvas:c,design:s,baseColorCanvasObject:o})},cr=function(e){var n=e.canvasObject,t=e.partName,a=e.layerIndex,r=e.direction,i=e.textureCanvas,c=e.texture,s=e.graphicVisualCanvas,o=e.design,l=e.baseColorCanvasObject,u=n[t].layers,d=u[a];u[a]=u[a+r],u[a+r]=d,n[t].layers=u,sr({textureCanvas:i,canvasObjectPart:n[t],partName:t,texture:c,graphicVisualCanvas:s,design:o,baseColorCanvasObject:l})},sr=function(e){var n=e.textureCanvas,t=e.canvasObjectPart,a=e.partName,r=e.texture,i=e.graphicVisualCanvas,c=e.design,s=e.baseColorCanvasObject,o=n.getContext("2d"),l=i.getContext("2d");l.clearRect(0,0,c.configData.canvasSize,c.configData.canvasSize);var u=c.configData.partsObject[a],d=u.x,b=u.y,p=u.width,h=u.height,f=c.configData.divider;for(var j in o.drawImage(s[a],d/f,b/f,p/f,h/f),l.drawImage(s[a],0,0,c.configData.canvasSize,c.configData.canvasSize),t.layers){var x=t.layers[j];o.drawImage(x,d/f,b/f,p/f,h/f),l.drawImage(x,0,0,c.configData.canvasSize,c.configData.canvasSize)}r.needsUpdate=!0},or=function(e){var n=e.changeObject,t=e.design,a=e.setDesign,r=e.texture,i=e.textureCanvas,c=e.graphicVisualCanvas,s=e.canvasObject,o=e.overlayCanvas,l=e.overlayCanvasObject,u=e.baseColorCanvasObject,d=e.currentShoe,b=n.type,p=n.fileName,h=Object(St.cloneDeep)(t);if("graphic-moved"===b){var f=n.partName,j=n.layerIndex,x=n.direction,g=n.distance,v=h.outlineData.overlays[f][d][j];"vert"===x?v.y+=g:"hor"===x?v.x+=g:"scale"===x?v.scale*=g:"rotate"===x?v.rotation+=g:"reset"===x&&(v.y=0,v.x=0,v.scale=1,v.rotation=0),a(h),lr({partName:f,layerIndex:j,layerObject:v,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,canvasObject:s,textureCanvas:i,baseColorCanvasObject:u,currentShoe:d})}else if("color-changed"===b){var O=n.partName,y=n.layerIndex,m=n.newColor,C=h.outlineData.overlays[O][d][y];C.color=m,a(h),lr({partName:O,layerIndex:y,layerObject:C,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,canvasObject:s,textureCanvas:i,baseColorCanvasObject:u,currentShoe:d})}else if("layer-added"===b){var w=n.partName,k=n.layerType;if(0===t.outlineData.overlays[w][d].length){var D=t.configData.overlayParts[w];for(var S in D){var N=D[S];h.outlineData.parts[N][d].push({type:"overlay",source:w})}}"Color"===k?h.outlineData.overlays[w][d].push({type:"color",color:"#777777"}):h.outlineData.overlays[w][d].push({type:"graphic",link:p,x:0,y:0,scale:1,rotation:0}),a(h),ur({overlayCanvasObject:l,partName:w,layerObject:h.outlineData.overlays[w][d].slice(-1)[0],overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,textureCanvas:i,canvasObject:s,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}else if("layer-moved"===b){var V=n.partName,L=n.layerIndex,I=n.direction,P=h.outlineData.overlays[V][d],z=P[L];P[L]=P[L+I],P[L+I]=z,h.outlineData.overlays[V][d]=P,a(h),dr({overlayCanvasObject:l,partName:V,layerIndex:L,direction:I,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,textureCanvas:i,canvasObject:s,baseColorCanvasObject:u,currentShoe:d})}else if("layer-deleted"===b){var E=n.partName,M=n.layerIndex;if(h.outlineData.overlays[E][d].splice(M,1),0===h.outlineData.overlays[E][d].length){var T=t.configData.overlayParts[E];for(var R in T)for(var A=T[R],G=0;G<h.outlineData.parts[A][d].length;G++){var U=G;"overlay"===h.outlineData.parts[A][d][G].type&&h.outlineData.parts[A][d][G].source===E&&(h.outlineData.parts[A][d].splice(U,1),s[A].layers.splice(U,1))}}a(h),br({overlayCanvasObject:l,partName:E,layerIndex:M,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:t,textureCanvas:i,canvasObject:s,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}},lr=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,f,j,x,g,v,O;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.partName,a=n.layerIndex,r=n.layerObject,i=n.overlayCanvasObject,c=n.overlayCanvas,s=n.texture,o=n.graphicVisualCanvas,l=n.design,u=n.canvasObject,d=n.textureCanvas,b=n.baseColorCanvasObject,p=n.currentShoe,h=l.configData.overlayParts[t],"color"!==r.type){e.next=8;break}return e.next=5,Ja({design:l,layer:r,partName:t});case 5:f=e.sent,e.next=11;break;case 8:return e.next=10,qa({design:l,layer:r,partName:t,currentShoe:p});case 10:f=e.sent;case 11:i[t].layers[a]=f,nr({design:l,overlayCanvasObject:i,overlayCanvas:c,partName:t,graphicVisualCanvas:o,currentShoe:p}),e.t0=We.a.keys(h);case 14:if((e.t1=e.t0()).done){e.next=32;break}j=e.t1.value,x=h[j],g=0;case 18:if(!(g<l.outlineData.parts[x][p].length)){e.next=30;break}if(v=g,"overlay"!==l.outlineData.parts[x][p][g].type){e.next=27;break}if(l.outlineData.parts[x][p][g].source!==t){e.next=27;break}return e.next=24,$a({design:l,layer:l.outlineData.parts[x][p][g],partName:x,overlayCanvas:c});case 24:O=e.sent,u[x].layers[v]=O,pr({textureCanvas:d,canvasObjectPart:u[x],partName:x,design:l,baseColorCanvasObject:b});case 27:g++,e.next=18;break;case 30:e.next=14;break;case 32:s.needsUpdate=!0;case 33:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ur=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,f,j,x,g,v,O,y;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.overlayCanvasObject,a=n.partName,r=n.layerObject,i=n.overlayCanvas,c=n.texture,s=n.graphicVisualCanvas,o=n.design,l=n.textureCanvas,u=n.canvasObject,d=n.tempDesign,b=n.baseColorCanvasObject,p=n.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Ja({design:o,layer:r,partName:a});case 4:h=e.sent,t[a].layers.push(h),e.next=13;break;case 8:if("graphic"!==r.type){e.next=13;break}return e.next=11,qa({design:o,layer:r,partName:a,currentShoe:p});case 11:f=e.sent,t[a].layers.push(f);case 13:nr({design:o,overlayCanvasObject:t,overlayCanvas:i,partName:a,graphicVisualCanvas:s,currentShoe:p}),j=o.configData.overlayParts[a],e.t0=We.a.keys(j);case 16:if((e.t1=e.t0()).done){e.next=34;break}x=e.t1.value,g=j[x],v=0;case 20:if(!(v<d.outlineData.parts[g][p].length)){e.next=32;break}if(O=v,"overlay"!==d.outlineData.parts[g][p][v].type){e.next=29;break}if(d.outlineData.parts[g][p][v].source!==a){e.next=29;break}return e.next=26,$a({design:o,layer:d.outlineData.parts[g][p][v],partName:g,overlayCanvas:i});case 26:y=e.sent,u[g].layers[O]=y,pr({textureCanvas:l,canvasObjectPart:u[g],partName:g,design:o,baseColorCanvasObject:b});case 29:v++,e.next=20;break;case 32:e.next=16;break;case 34:c.needsUpdate=!0;case 35:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),dr=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,f,j,x,g,v,O,y;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.overlayCanvasObject,a=n.partName,r=n.layerIndex,i=n.direction,c=n.overlayCanvas,s=n.texture,o=n.graphicVisualCanvas,l=n.design,u=n.textureCanvas,d=n.canvasObject,b=n.baseColorCanvasObject,p=n.currentShoe,h=t[a].layers,f=h[r],h[r]=h[r+i],h[r+i]=f,t[a].layers=h,nr({design:l,overlayCanvasObject:t,overlayCanvas:c,partName:a,graphicVisualCanvas:o,currentShoe:p}),j=l.configData.overlayParts[a],e.t0=We.a.keys(j);case 9:if((e.t1=e.t0()).done){e.next=27;break}x=e.t1.value,g=j[x],v=0;case 13:if(!(v<l.outlineData.parts[g][p].length)){e.next=25;break}if(O=v,"overlay"!==l.outlineData.parts[g][p][v].type){e.next=22;break}if(l.outlineData.parts[g][p][v].source!==a){e.next=22;break}return e.next=19,$a({design:l,layer:l.outlineData.parts[g][p][v],partName:g,overlayCanvas:c});case 19:y=e.sent,d[g].layers[O]=y,pr({textureCanvas:u,canvasObjectPart:d[g],partName:g,design:l,baseColorCanvasObject:b});case 22:v++,e.next=13;break;case 25:e.next=9;break;case 27:s.needsUpdate=!0;case 28:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),br=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i,c,s,o,l,u,d,b,p,h,f,j,x,g,v;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.overlayCanvasObject,a=n.partName,r=n.layerIndex,i=n.overlayCanvas,c=n.texture,s=n.graphicVisualCanvas,o=n.design,l=n.textureCanvas,u=n.canvasObject,d=n.tempDesign,b=n.baseColorCanvasObject,p=n.currentShoe,t[a].layers.splice(r,1),nr({design:o,overlayCanvasObject:t,overlayCanvas:i,partName:a,graphicVisualCanvas:s,currentShoe:p}),h=o.configData.overlayParts[a],e.t0=We.a.keys(h);case 5:if((e.t1=e.t0()).done){e.next=22;break}f=e.t1.value,j=h[f],x=0;case 9:if(!(x<d.outlineData.parts[j][p].length)){e.next=19;break}if(g=x,"overlay"!==d.outlineData.parts[j][p][x].type||d.outlineData.parts[j][p][x].source!==a){e.next=16;break}return e.next=14,$a({design:o,layer:o.outlineData.parts[j][p][x],partName:j,overlayCanvas:i});case 14:v=e.sent,u[j].layers[g]=v;case 16:x++,e.next=9;break;case 19:pr({textureCanvas:l,canvasObjectPart:u[j],partName:j,design:o,baseColorCanvasObject:b}),e.next=5;break;case 22:c.needsUpdate=!0;case 23:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),pr=function(e){var n=e.textureCanvas,t=e.canvasObjectPart,a=e.partName,r=e.design,i=e.baseColorCanvasObject,c=n.getContext("2d"),s=r.configData.partsObject[a],o=s.x,l=s.y,u=s.width,d=s.height,b=r.configData.divider;for(var p in c.drawImage(i[a],o/b,l/b,u/b,d/b),t.layers){var h=t.layers[p];c.drawImage(h,o/b,l/b,u/b,d/b)}},hr=function(e){var n=e.design,t=e.canvasObject,a=e.baseColorCanvasObject;return new Promise((function(e,r){var i=document.createElement("canvas");i.width=n.configData.canvasSize,i.height=n.configData.canvasSize;var c=i.getContext("2d");!function r(){if("undefined"!==typeof c){for(var s in t){var o=n.configData.partsObject[s],l=o.x,u=o.y,d=o.width,b=o.height,p=n.configData.divider;for(var h in c.drawImage(a[s],l/p,u/p,d/p,b/p),t[s].layers){var f=t[s].layers[h];c.drawImage(f,l/p,u/p,d/p,b/p)}}e(i)}else setTimeout(r,100)}()}))},fr=I.a.div(Ba||(Ba=Object(L.a)(["\n  height: 100vh;\n  width: 100vw;\n  background-color: #f9f9f9;\n  font-family: 'Roboto';\n"])));var jr=function(e){var n=e.userData,t=e.designSpec,r=e.graphicVisualCanvas,i=e.rightInnerOverlayCanvas,c=e.rightOuterOverlayCanvas,s=e.rightTexture,o=e.rightTextureCanvas,d=e.leftInnerOverlayCanvas,b=e.leftOuterOverlayCanvas,p=e.leftTexture,h=e.leftTextureCanvas,f=e.redMapCanvas,j=Object(a.useState)(t),x=Object(l.a)(j,2),g=x[0],v=x[1],O=Object(a.useState)(!1),y=Object(l.a)(O,2),m=y[0],C=y[1],w=Object(a.useState)(0),k=Object(l.a)(w,2),D=k[0],S=k[1],N=Object(a.useState)("right"),V=Object(l.a)(N,2),L=V[0],I=V[1],P=Object(a.useState)(-1),z=Object(l.a)(P,2),E=z[0],M=z[1],T=Object(a.useState)({right:!0,left:!0}),R=Object(l.a)(T,2),A=R[0],G=R[1],U=Object(a.useState)("DesignInfo"),B=Object(l.a)(U,2),_=B[0],F=B[1],Y=Object(a.useState)("LayersMain"),W=Object(l.a)(Y,2),X=W[0],H=W[1],J=Object(a.useRef)(),q=Object(a.useRef)(),Z=Object(a.useRef)(),$=Object(a.useRef)(),K=Object(a.useRef)(),Q=Object(a.useRef)(),ee=Object(a.useState)(!0),ne=Object(l.a)(ee,2),te=ne[0],ae=ne[1],re=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er({design:n,type:"baseColorCanvasObject",currentShoe:"right"});case 2:return J.current=e.sent,e.next=5,er({design:n,type:"baseColorCanvasObject",currentShoe:"left"});case 5:return $.current=e.sent,e.next=8,hr({design:g,canvasObject:q.current,baseColorCanvasObject:J.current});case 8:return t=e.sent,e.next=11,hr({design:g,canvasObject:K.current,baseColorCanvasObject:$.current});case 11:a=e.sent,o.getContext("2d").drawImage(t,0,0),s.needsUpdate=!0,h.getContext("2d").drawImage(a,0,0),p.needsUpdate=!0;case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){q.current&&K.current||Fa({setTexturesLoaded:C,design:g,graphicVisualCanvas:r,rightBaseColorCanvasObjectRef:J,rightInnerOverlayCanvas:i,rightOuterOverlayCanvas:c,rightTexture:s,rightTextureCanvas:o,rightCanvasObjectRef:q,rightOverlaysCanvasObjectRef:Z,leftBaseColorCanvasObjectRef:$,leftInnerOverlayCanvas:d,leftOuterOverlayCanvas:b,leftTexture:p,leftTextureCanvas:h,leftCanvasObjectRef:K,leftOverlaysCanvasObjectRef:Q})}),[g,r,i,c,s,o,d,b,p,h]),g?Object(u.jsxs)(fr,{children:[Object(u.jsx)(Yn,{design:g,setView:F,setLayersView:H,rightTexture:s,leftTexture:p,texturesLoaded:m,setCurrentPart:S,setCurrentShoe:I,setCurrentLayer:M,shoeVisibility:A,redMapCanvas:f,cameraReset:te,setCameraReset:ae}),Object(u.jsx)(_a,{design:g,setDesign:v,view:_,setView:F,currentLayer:E,setCurrentLayer:M,layersView:X,setLayersView:H,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:function(e){tr("outerOverlay"===e||"innerOverlay"===e?"right"===L?{design:g,graphicVisualCanvas:r,partName:e,canvasObject:Z.current,baseColorCanvasObject:J.current,currentShoe:L}:{design:g,graphicVisualCanvas:r,partName:e,canvasObject:Q.current,baseColorCanvasObject:$.current,currentShoe:L}:"right"===L?{design:g,graphicVisualCanvas:r,partName:e,canvasObject:q.current,baseColorCanvasObject:J.current,currentShoe:L}:{design:g,graphicVisualCanvas:r,partName:e,canvasObject:K.current,baseColorCanvasObject:$.current,currentShoe:L})},handleChangeManager:function(e){var n=e.partName;"outerOverlay"===n?or({changeObject:e,design:g,setDesign:v,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,overlayCanvas:"right"===L?c:b,overlayCanvasObject:"right"===L?Z.current:Q.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L}):"innerOverlay"===n?or({changeObject:e,design:g,setDesign:v,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,overlayCanvas:"right"===L?i:d,overlayCanvasObject:"right"===L?Z.current:Q.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L}):function(e){var n=e.changeObject,t=e.design,a=e.setDesign,r=e.texture,i=e.textureCanvas,c=e.graphicVisualCanvas,s=e.canvasObject,o=e.baseColorCanvasObject,l=e.currentShoe,u=n.type,d=n.fileName,b=Object(St.cloneDeep)(t);if("graphic-moved"===u){var p=n.partName,h=n.layerIndex,f=n.direction,j=n.distance,x=b.outlineData.parts[p][l][h];"vert"===f?x.y+=j:"hor"===f?x.x+=j:"scale"===f?x.scale*=j:"rotate"===f?x.rotation+=j:"reset"===f&&(x.y=0,x.x=0,x.scale=1,x.rotation=0),a(b),ar({partName:p,layerIndex:h,layerObject:x,canvasObject:s,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:t,baseColorCanvasObject:o,currentShoe:l})}else if("color-changed"===u){var g,v=n.partName,O=n.layerIndex,y=n.newColor;(g="outerOverlay"===v||"innerOverlay"===v?b.outlineData.overlays[v].layers[O]:b.outlineData.parts[v][l][O]).color=y,a(b),ar({partName:v,layerIndex:O,layerObject:g,canvasObject:s,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:t,baseColorCanvasObject:o,currentShoe:l})}else if("layer-added"===u){var m=n.partName,C=n.layerType;if("Color"===C)b.outlineData.parts[m][l].push({type:"color",color:"#777777"});else if("Graphic"===C)b.outlineData.parts[m][l].push({type:"graphic",link:d,x:0,y:0,scale:1,rotation:0});else{var w=n.maskLink;b.outlineData.parts[m][l].push({type:"mask",link:w,color:"#000000"})}a(b);var k=b.outlineData.parts[m][l].slice(-1)[0];rr({canvasObject:s,graphicVisualCanvas:c,layerObject:k,partName:m,texture:r,textureCanvas:i,design:t,baseColorCanvasObject:o,currentShoe:l})}else if("layer-moved"===u){var D=n.partName,S=n.layerIndex,N=n.direction,V=b.outlineData.parts[D][l],L=V[S];V[S]=V[S+N],V[S+N]=L,b.outlineData.parts[D].layers=V,a(b),cr({canvasObject:s,partName:D,layerIndex:S,direction:N,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:t,baseColorCanvasObject:o,currentShoe:l})}else if("layer-deleted"===u){var I=n.partName,P=n.layerIndex;b.outlineData.parts[I][l].splice(P,1),a(b),ir({canvasObject:s,partName:I,layerIndex:P,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:t,baseColorCanvasObject:o,currentShoe:l})}}({changeObject:e,design:g,setDesign:v,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L})},handleUpdateBaseColor:re,userData:n,currentPart:D,setCurrentPart:S,currentShoe:L,setCurrentShoe:I,shoeVisibility:A,setShoeVisibility:G,setCameraReset:ae})]}):Object(u.jsx)(fr,{children:"Please wait..."})};var xr,gr=function(){var e=Object(o.g)().id,n=Object(a.useContext)(k.context),t=Object(a.useState)(null),r=Object(l.a)(t,2),i=r[0],c=r[1],s=Object(a.useState)(null),d=Object(l.a)(s,2),b=d[0],p=d[1],h=Object(a.useState)(null),f=Object(l.a)(h,2),j=f[0],x=f[1],g=Object(a.useState)(null),v=Object(l.a)(g,2),O=v[0],y=v[1],m=Object(a.useState)(null),C=Object(l.a)(m,2),w=C[0],D=C[1],S=Object(a.useState)(null),V=Object(l.a)(S,2),L=V[0],I=V[1],P=Object(a.useState)(null),z=Object(l.a)(P,2),E=z[0],M=z[1],T=Object(a.useState)(null),R=Object(l.a)(T,2),A=R[0],G=R[1],U=Object(a.useState)(null),B=Object(l.a)(U,2),_=B[0],F=B[1],Y=Object(a.useState)(null),W=Object(l.a)(Y,2),X=W[0],H=W[1],J=Object(a.useState)(null),q=Object(l.a)(J,2),Z=q[0],$=q[1],K=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var t,a,r,i,s,o,l;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(n),p(Ha({design:n})),e.next=4,Wa({design:n});case 4:return t=e.sent,x(t),e.next=8,Wa({design:n});case 8:return a=e.sent,y(a),e.next=12,Wa({design:n});case 12:return r=e.sent,D(r),e.next=16,Wa({design:n});case 16:return i=e.sent,M(i),e.next=20,Wa({design:n});case 20:return s=e.sent,G(s),e.next=24,Wa({design:n});case 24:return o=e.sent,F(o),e.next=28,Xa({design:n});case 28:l=e.sent,$(l);case 30:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){e?N("/api/outlines/".concat(e),"GET").then((function(e){return e.json()})).then((function(e){K(e)})):N("/api/outlines/newdesign","GET").then((function(e){return e.json()})).then((function(e){K(e)}))}),[e]),Object(a.useEffect)((function(){w&&_&&(I(Ya(w)),H(Ya(_)))}),[w,_]),i&&b&&j&&O&&w&&L&&E&&A&&_&&X&&Z?Object(u.jsx)(jr,{userData:n,designSpec:i,graphicVisualCanvas:b,rightInnerOverlayCanvas:j,rightOuterOverlayCanvas:O,rightTexture:L,rightTextureCanvas:w,leftInnerOverlayCanvas:E,leftOuterOverlayCanvas:A,leftTexture:X,leftTextureCanvas:_,redMapCanvas:Z}):Object(u.jsx)("div",{})},vr=I.a.div(xr||(xr=Object(L.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  justify-content: center;\n  padding: 16px;\n"])));var Or,yr,mr=function(){return Object(u.jsxs)(vr,{children:[Object(u.jsx)(W,{google:!0,onClick:function(){window.open("http://solecomposer.com/auth/google","_self")},children:"Login With Google"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(W,{children:"Back"})})]})},Cr=I.a.div(Or||(Or=Object(L.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n"]))),wr=I.a.p(yr||(yr=Object(L.a)(["\n  font-family: 'Roboto';\n  padding: 0;\n  text-align: center;\n  margin: 0;\n  margin-top: 15px;\n"])));var kr,Dr=function(){var e=Object(a.useContext)(k.context);return Object(u.jsxs)(Cr,{children:[Object(u.jsx)(wr,{children:e.firstName}),Object(u.jsx)(wr,{children:e.email}),Object(u.jsx)(W,{onClick:function(){window.open("http://solecomposer.com/auth/logout","_self")},children:"Log Out"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(W,{children:"Back"})})]})},Sr=I.a.div(kr||(kr=Object(L.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n"])));var Nr,Vr=function(){return Object(u.jsxs)(Sr,{children:[Object(u.jsx)(wr,{children:"404 - PAGE NOT FOUND"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(W,{children:"Home"})})]})},Lr=I.a.div(Nr||(Nr=Object(L.a)([""])));var Ir=function(){return Object(u.jsx)(Lr,{children:Object(u.jsx)(s.a,{children:Object(u.jsx)(k,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:Fe}),Object(u.jsx)(o.a,{exact:!0,path:"/login",component:mr}),Object(u.jsx)(o.a,{exact:!0,path:"/profile",component:Dr}),Object(u.jsx)(o.a,{exact:!0,path:"/designer",component:gr}),Object(u.jsx)(o.a,{exact:!0,path:"/designer/:id",component:gr}),Object(u.jsx)(o.a,{path:"*",component:Vr})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Ir,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[328,1,2]]]);
//# sourceMappingURL=main.b3f042be.chunk.js.map