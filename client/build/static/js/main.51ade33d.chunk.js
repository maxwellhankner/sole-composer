(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{146:function(e,t,a){},147:function(e,t,a){},149:function(e,t,a){},184:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},300:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(131),c=a.n(s),i=(a(146),a(21)),o=a(19),l=(a(147),a(13)),u=a(1),d=Object(n.createContext)(null),v=function(e){var t=e.children,a=Object(n.useState)(),r=Object(l.a)(a,2),s=r[0],c=r[1];return Object(n.useEffect)((function(){fetch("/auth/getsession",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.err||c(e)}))}),[]),Object(u.jsx)(d.Provider,{value:s,children:t})};v.context=d;var b=v,h=(a(149),a(132)),j=a.n(h);a(183),a(184);var g=function(){var e=Object(o.f)();return Object(u.jsx)("div",{className:"new-design-button standard-button",onClick:function(){e.push("/designer")},children:Object(u.jsx)("button",{children:"N E W \xa0 D E S I G N"})})};a(189);var p=function(e){var t=e.props,a=e.userData,n=t._id,r=t.title,s=t.configId,c=t.author,i=t.screenshot,l=Object(o.f)();return Object(u.jsxs)("div",{className:"featureddesigncard-container",onClick:function(){a&&l.push("/designer/".concat(n))},children:[Object(u.jsx)("div",{className:"featureddesigncard-image",children:Object(u.jsx)("img",{src:"api/assets/images/".concat(i),alt:"feature-design"})}),Object(u.jsx)("p",{className:"featureddesigncard-title",children:r}),Object(u.jsx)("p",{className:"featureddesigncard-model",children:s.modelName}),Object(u.jsx)("p",{className:"featureddesigncard-author",children:c.firstName})]})};a(190);var f=function(e){var t=e.myDesigns;return Object(u.jsxs)("div",{className:"mydesigntiles-container",children:[Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"landing-section-label",children:"MY DESIGNS"})}),Object(u.jsx)("div",{className:"my-designs-grid",children:t.map((function(e,t){return Object(u.jsx)(i.b,{to:"/designer/".concat(e._id),className:"link-to-designer",children:Object(u.jsx)("div",{className:"my-design-tile",children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.screenshot),alt:"my-design-preview"})})},t)}))})]})},O=function(e,t){return fetch(e,{method:t})},x=function(e,t,a){return fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})};var y=function(){var e=Object(n.useContext)(b.context),t=Object(n.useState)(),a=Object(l.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(),o=Object(l.a)(c,2),d=o[0],v=o[1];Object(n.useEffect)((function(){O("/api/featured","GET").then((function(e){return e.json()})).then((function(e){return s(e)})),e&&O("/api/outlines/mydesigns","GET").then((function(e){return e.json()})).then((function(e){return v(e)}))}),[e]);var h=r?r.featured.map((function(t,a){return Object(u.jsx)(p,{props:t,userData:e},a)})):null;return Object(u.jsxs)("div",{className:"landing-container",children:[Object(u.jsxs)("div",{className:"landing-header",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:"Sole"})," Composer"]}),e?Object(u.jsx)(i.b,{to:"/profile",children:e.firstName}):Object(u.jsx)(i.b,{to:"/login",children:"Login"})]}),Object(u.jsxs)("div",{className:"landing-content",children:[Object(u.jsxs)("div",{className:"featured-designs-container",children:[Object(u.jsx)("p",{className:"landing-section-label",children:"FEATURED"}),r?Object(u.jsx)(j.a,{responsive:{0:{items:1.7},700:{items:3}},items:h}):null]}),Object(u.jsx)(g,{}),!e&&Object(u.jsx)(i.b,{to:"/login",children:Object(u.jsx)("div",{className:"landing-button",children:Object(u.jsx)("button",{children:"create an account"})})}),d&&Object(u.jsx)(f,{myDesigns:d})]})]})},m=a(14),C=a.n(m),N=a(17),w=(a(192),a(193),a(27)),k=a(351),D=a(352),S=a(3);a(194);var V=function(){return Object(u.jsx)("div",{id:"loading-screen",children:Object(u.jsx)("div",{id:"loader"})})};a(195);function L(e){var t,a,r=e.design,s=e.texture,c=e.right,i=e.setCurrentPart,o=e.setCurrentShoe,l=e.alone,d=e.setLayersView,v=e.setCurrentLayer,b=e.setView,h=e.redMapCanvas,j=Object(n.useRef)(),g=Object(k.a)("/api/assets/models/".concat(r.configData.source.model)).nodes,p=Object(w.c)(S.TextureLoader,"/api/assets/designimages/".concat(r.configData.source.aoMapRight));p.flipY=!1;var f=function(e){if(e.delta<10){var t=Math.floor(1e3*e.uv.x),a=Math.floor(1e3*e.uv.y),n=function(e){switch(e){case 255:return 4;case 220:return 2;case 210:return 0;case 200:return 5;case 190:return 3;case 180:return 1;case 170:return 16;case 160:return 15;case 150:return 14;case 140:return 9;case 130:return 13;case 120:return 11;case 110:return 12;case 100:return 8;case 90:return 10;case 80:return 7;case 70:return 6;case 60:return 17}}(h.getContext("2d").getImageData(t,a,1,1).data[0]);(n||0===n)&&(d("LayerOverview"),v(-1),b("Layers"),i(n),o(c?"right":"left"))}};return Object(u.jsx)("group",{ref:j,dispose:null,onPointerDown:function(e){return function(e){e.stopPropagation(),t=e.clientX,a=e.clientY}(e)},onPointerUp:function(e){return function(e){e.stopPropagation(),e.clientX>t-5&&e.clientX<t+5&&e.clientY>a-5&&e.clientY<a+5&&f(e)}(e)},children:Object(u.jsx)("mesh",{geometry:g.af1.geometry,rotation:[Math.PI/2,0,Math.PI/2],position:[0,-1,l?0:c?1.3:-1.3],scale:[c?.35:-.35,.35,.35],children:Object(u.jsx)("meshStandardMaterial",{aoMap:p,map:s})})})}var I=function(e){var t=e.design,a=e.rightTexture,r=e.leftTexture,s=e.texturesLoaded,c=e.setCurrentPart,i=e.setCurrentShoe,o=e.shoeVisibility,l=e.setLayersView,d=e.setCurrentLayer,v=e.setView,b=e.redMapCanvas;return Object(u.jsx)("div",{className:"scene-container",id:"scene-container-id",children:s?Object(u.jsxs)(w.a,{camera:{position:[0,0,9],fov:45},linear:!0,dpr:3,gl:{preserveDrawingBuffer:!0},children:[Object(u.jsx)("ambientLight",{}),Object(u.jsxs)(n.Suspense,{fallback:null,children:[o.right&&Object(u.jsx)(L,{right:!0,design:t,texture:a,setCurrentPart:c,setCurrentShoe:i,alone:!o.left,setLayersView:l,setCurrentLayer:d,setView:v,redMapCanvas:b}),o.left&&Object(u.jsx)(L,{design:t,texture:r,setCurrentPart:c,setCurrentShoe:i,alone:!o.right,setLayersView:l,setCurrentLayer:d,setView:v,redMapCanvas:b})]}),Object(u.jsx)(D.a,{minPolarAngle:Math.PI/4,maxPolarAngle:3*Math.PI/4,minDistance:4,maxDistance:12,enablePan:!1,enableDamping:!0})]}):Object(u.jsx)(V,{})})},P=(a(197),a(198),function(e,t){var a=new FormData;return t?a.append("image",e,"newImage"):a.append("image",e),fetch("/api/assets/uploadimage",{method:"POST",body:a}).then((function(e){return e.json()}))}),T=function(e){return new Promise((function(t){setTimeout((function(){var a=document.getElementById("scene-container-id").firstElementChild.firstElementChild,n=document.createElement("canvas");n.width=1024,n.height=1024,n.getContext("2d").drawImage(a,0,0,1024,1024);for(var r=n.toDataURL("image/png"),s=atob(r.split(",")[1]),c=[],i=0;i<s.length;i++)c.push(s.charCodeAt(i));var o=new Blob([new Uint8Array(c)],{type:"image/png"});o.name="theBlob",o.lastModifiedDate=new Date;var l=new File([o],e,{type:"image/png"});t(l)}),500)}))},M=function(e){var t=e.split("/");return t=t[t.length-1]},E=a(16),R=a(11);a(199);var B=function(e){var t=e.currentShoe,a=e.setCurrentShoe,n=e.visibility,r=e.setVisibility,s=function(e){if("right"===e&&e!==t)if(n.right)a(e);else{var s=Object(R.a)({},n);s.right=!0,s.left=!1,r(s),a(e)}else if("left"===e&&e!==t)if(n.left)a(e);else{var c=Object(R.a)({},n);c.right=!1,c.left=!0,r(c),a(e)}},c=function(e){if(1===e){if("left"===t){n.right;var s=Object(R.a)({},n);s.right=!s.right,r(s)}else if("right"===t)if(n.left){var c=Object(R.a)({},n);c.right=!1,r(c),a("left")}else{var i=Object(R.a)({},n);i.right=!i.right,i.left=!i.left,r(i),a("left")}}else if(2===e)if("right"===t){n.left;var o=Object(R.a)({},n);o.left=!o.left,r(o)}else if("left"===t)if(n.right){var l=Object(R.a)({},n);l.left=!1,r(l),a("right")}else{var u=Object(R.a)({},n);u.right=!u.right,u.left=!u.left,r(u),a("right")}};return Object(u.jsxs)("div",{className:"design-preview-toggle-container",children:[Object(u.jsxs)("div",{className:"design-preview-toggle-left",children:[Object(u.jsx)("div",{className:"design-preview-toggle-shoe ".concat("right"===t?null:"disabled-shoe"),onClick:function(){s("right")},children:Object(u.jsx)("p",{children:"Right"})}),Object(u.jsx)("div",{className:"design-preview-toggle-shoe ".concat("left"===t?null:"disabled-shoe"),onClick:function(){s("left")},children:Object(u.jsx)("p",{children:"Left"})})]}),Object(u.jsxs)("div",{className:"design-preview-toggle-right",children:[Object(u.jsx)("div",{className:"design-preview-toggle-visible ".concat(n.right?null:"disabled-visibility"),onClick:function(){c(1)},children:Object(u.jsx)(E.k,{})}),Object(u.jsx)("div",{className:"design-preview-toggle-visible ".concat(n.left?null:"disabled-visibility"),onClick:function(){c(2)},children:Object(u.jsx)(E.k,{})})]})]})};var A=function(e){var t,a=e.handleViewChange,r=e.design,s=e.canSave,c=e.setCanSave,o=e.userData,d=e.currentShoe,v=e.setCurrentShoe,b=e.shoeVisibility,h=e.setShoeVisibility,j=Object(n.useState)(!1),g=Object(l.a)(j,2),p=g[0],f=g[1];"object"===typeof o&&"_id"in o&&(t=o._id);var O=function(){var e=Object(N.a)(C.a.mark((function e(){var t,a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=23;break}if(c(!1),r.author){e.next=10;break}return f(!0),e.next=6,T("newImage");case 6:t=e.sent,P(t,!0).then((function(e){var t=M(e.image),a={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};x("/api/outlines","POST",a).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))})),e.next=23;break;case 10:if(r.author!==o._id){e.next=18;break}return f(!0),e.next=14,T(r.screenshot);case 14:a=e.sent,P(a,!1).then((function(e){var t=M(e.image),a={author:r.author,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};x("/api/outlines/".concat(r._id),"PUT",a),f(!1)})),e.next=23;break;case 18:return f(!0),e.next=21,T(r.screenshot);case 21:n=e.sent,P(n,!0).then((function(e){var t=M(e.image),a={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};x("/api/outlines/","POST",a).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))}));case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p?Object(u.jsx)("div",{className:"design-preview-container",children:Object(u.jsx)("div",{id:"loading-small",children:Object(u.jsx)("div",{id:"loader"})})}):Object(u.jsxs)("div",{className:"design-preview-container",children:[Object(u.jsx)("div",{className:"design-preview-info",children:Object(u.jsxs)("div",{className:"design-title-container",children:[Object(u.jsx)("p",{className:"design-title",children:r.title}),Object(u.jsx)("button",{className:"edit-design-title-button",onClick:function(){return a("ChangeDesignName")},children:Object(u.jsx)(E.m,{})})]})}),Object(u.jsxs)("div",{className:"design-preview-buttons",children:[Object(u.jsx)(B,{currentShoe:d,setCurrentShoe:v,visibility:b,setVisibility:h}),Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){return a("ChangeBaseColor")},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",style:{color:r.outlineData.baseColors[d]},children:Object(u.jsx)(E.p,{})}),Object(u.jsx)("button",{children:"Base Color"})]}),Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){return a("Layers")},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(E.l,{})}),Object(u.jsx)("button",{children:"Layers"})]}),s&&o?Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){O()},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(E.o,{})}),Object(u.jsx)("button",{children:"Save"})]}):Object(u.jsxs)("div",{className:"design-preview-button save-deactivated",children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(E.o,{})}),Object(u.jsx)("button",{children:"Save"})]}),o&&r.author===t?Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){o&&o._id===r.author&&(fetch("/api/outlines/".concat(r._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}),window.location.href="/")},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(E.r,{})}),Object(u.jsx)("button",{children:"Delete"})]}):Object(u.jsxs)("div",{className:"design-preview-button save-deactivated",children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(E.r,{})}),Object(u.jsx)("button",{children:"Delete"})]}),Object(u.jsx)(i.b,{to:"/",children:Object(u.jsxs)("div",{className:"design-preview-button",children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(E.q,{})}),Object(u.jsx)("button",{children:"Exit"})]})})]})]})};a(200);var U=function(e){var t=e.props,a=t.design,n=t.currentPartName,r=t.handleAddLayer,s=t.setLayersView;return Object(u.jsxs)("div",{className:"design-preview-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:"Select Layer Type"})}),a.configData.layerTypes[n].types.map((function(e,t){return Object(u.jsx)("div",{className:"standard-button",children:"Mask"===e?Object(u.jsx)("button",{onClick:function(){s("MaskTypes")},children:e}):"Graphic"===e?Object(u.jsx)("button",{onClick:function(){s("GraphicPicker")},children:e}):Object(u.jsx)("button",{onClick:function(){r(e),s("LayerOverview")},children:e})},t)})),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return s("LayerOverview")},children:"Cancel"})})]})},G=(a(201),function(e){var t=e.split(/(?=[A-Z])/).join(" ");return t.charAt(0).toUpperCase()+t.substr(1)});a(202);var z=function(e){var t=e.colorsArray,a=e.handleColorChange;return Object(u.jsx)("div",{className:"current-colors-container",children:Object(u.jsx)("div",{className:"current-colors-scroll",children:t.map((function(e,t){return Object(u.jsx)("button",{style:{backgroundColor:e},onClick:function(){return a(e)}},t)}))})})},_=(a(203),a(141)),F=(a(300),function(){return Object(u.jsx)("div",{className:"custom-pointer"})}),W=a(73),Y=Object(_.a)((function(e){var t=e.hex,a=e.hsl,n=e.hsv,r=e.onChange,s={hue:{height:18,position:"relative",marginBottom:9,overflow:"hidden"},saturation:{width:"100%",height:120,position:"relative",marginBottom:9,overflow:"hidden"},input:{width:"47%",height:"30px",border:"none",borderRadius:"none",fontSize:".7rem",WebkitAppearance:"none",WebkitBorderRadius:0,boxShadow:"none",display:"block",paddingLeft:"3%",paddingRight:"0px"},swatch:{width:"100%",height:"100%",background:t},inputContainer:{background:t}};return Object(u.jsxs)("div",{className:"custom-color",children:[Object(u.jsx)("div",{style:s.hue,children:Object(u.jsx)(W.Hue,{hsl:a,onChange:r,pointer:F})}),Object(u.jsx)("div",{style:s.saturation,children:Object(u.jsx)(W.Saturation,{hsl:a,hsv:n,onChange:r,pointer:F})}),Object(u.jsx)("div",{className:"color-input",style:s.inputContainer,children:Object(u.jsx)(W.EditableInput,{style:{input:s.input},className:"custom-color-input",value:t,onChange:r})})]})}));var q=function(e){var t=e.props,a=t.currentLayer,r=t.currentPartName,s=t.design,c=t.handleChangeManager,i=t.setLayersView,o=t.setCanSave,d=t.currentShoe,v=Object(n.useState)("#ffffaa"),b=Object(l.a)(v,2),h=b[0],j=b[1],g=Object(n.useState)([]),p=Object(l.a)(g,2),f=p[0],O=p[1];Object(n.useEffect)((function(){O(function(){var e=[];for(var t in s.outlineData.parts){for(var a in s.outlineData.parts[t].right){var n=s.outlineData.parts[t].right[a].type;if("color"===n||"mask"===n){var r=s.outlineData.parts[t].right[a].color;e.includes(r)||e.push(r)}}for(var c in s.outlineData.parts[t].left){var i=s.outlineData.parts[t].left[c].type;if("color"===i||"mask"===i){var o=s.outlineData.parts[t].left[c].color;e.includes(o)||e.push(o)}}}for(var l in s.outlineData.overlays){for(var u in s.outlineData.overlays[l].right)if("color"===s.outlineData.overlays[l].right[u].type){var d=s.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var v in s.outlineData.overlays[l].left)if("color"===s.outlineData.overlays[l].left[v].type){var b=s.outlineData.overlays[l].left[v].color;e.includes(b)||e.push(b)}}var h=s.outlineData.baseColors.right;e.includes(h)||e.push(h);var j=s.outlineData.baseColors.left;return e.includes(j)||e.push(j),e}()),j("outerOverlay"===r||"innerOverlay"===r?s.outlineData.overlays[r][d][a].color:s.outlineData.parts[r][d][a].color)}),[s,r,a,O,d]);var x=function(e){o(!0);var t=e.hex||e;j(e),c({type:"color-changed",partName:r,layerIndex:a,newColor:t})};return Object(u.jsxs)("div",{className:"color-picker-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:G(r)})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return x("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random Color"})}),Object(u.jsx)("div",{children:Object(u.jsx)(z,{colorsArray:f,handleColorChange:x})}),Object(u.jsx)("div",{children:Object(u.jsx)(Y,{color:h,onChangeComplete:x})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return i("LayerOverview")},children:"Back"})})]})};a(335);var H=function(e){var t=e.props,a=t.currentLayer,r=t.currentPartName,s=t.graphicVisualCanvas,c=t.handleChangeManager,i=t.handleUpdateGraphicVisualCanvas,o=t.setLayersView,l=t.setCanSave,d=t.currentShoe,v=function(e,t){l(!0),c({type:"graphic-moved",partName:r,layerIndex:a,direction:e,distance:t})};return Object(n.useEffect)((function(){!function(){var e=document.getElementById("graphic-visual-container");e.innerHTML="",e.appendChild(s)}(),i(r)}),[]),Object(u.jsxs)("div",{className:"graphic-editor-container",children:[Object(u.jsxs)("div",{className:"graphic-editor-upper",children:[Object(u.jsxs)("div",{className:"graphic-editor-buttons",id:"edit-buttons-div",children:[Object(u.jsx)("button",{className:"graphic-edit-button",id:"up-button",onClick:function(){return v("vert",-30)},children:Object(u.jsx)(E.d,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"down-button",onClick:function(){return v("vert",30)},children:Object(u.jsx)(E.a,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"left-button",onClick:function(){return v("hor",-30)},children:Object(u.jsx)(E.b,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"right-button",onClick:function(){return v("hor",30)},children:Object(u.jsx)(E.c,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"scale-up-button",onClick:function(){return v("scale",1.1)},children:Object(u.jsx)(E.e,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"scale-down-button",onClick:function(){return v("scale",.9)},children:Object(u.jsx)(E.j,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"clockwise-button",onClick:function(){return v("rotate",5)},children:Object(u.jsx)(E.n,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"counterclockwise-button",onClick:function(){return v("rotate",-5)},children:Object(u.jsx)(E.s,{})})]}),Object(u.jsx)("div",{id:"graphic-visual-container",className:"left"===d?"mirror-graphic-visual":null})]}),Object(u.jsxs)("div",{className:"graphic-editor-lower",children:[Object(u.jsx)("div",{className:"standard-button graphic-editor-lower-button",children:Object(u.jsx)("button",{onClick:function(){return v("reset",0)},children:"Reset"})}),Object(u.jsx)("div",{className:"standard-button graphic-editor-lower-button",children:Object(u.jsx)("button",{onClick:function(){return o("LayerOverview")},children:"Back"})})]})]})};a(336),a(337);var J=function(e){var t=e.design,a=e.currentPart,n=e.setCurrentPart,r=e.setCurrentLayer,s=e.setLayersView,c=t.configData.partsArray.length,i=t.configData.partsArray,o=function(e){n(0===a&&e<0?c-1:a===c-1&&e>0?0:a+e)};return Object(u.jsx)("div",{className:"part-selector-container",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"change-part-button",onClick:function(){o(-1),r(-1)},children:Object(u.jsx)(E.g,{})}),Object(u.jsx)("button",{className:"partname-button",onClick:function(){s("PartList")},children:G(i[a])}),Object(u.jsx)("button",{className:"change-part-button",onClick:function(){o(1),r(-1)},children:Object(u.jsx)(E.h,{})})]})})};var X=function(e){var t=e.props,a=t.allLayers,n=t.currentPart,r=t.design,s=t.currentLayer,c=t.handleViewChange,i=t.numberOfLayers,o=t.setCurrentLayer,l=t.setCurrentPart,d=t.setLayersView,v=t.handleDeleteLayer,b=t.handleEditLayer,h=t.handleMoveLayer;return Object(u.jsxs)("div",{className:"layers-view-container",onClick:function(e){"layers-view-container"===e.target.className&&o(-1)},children:[Object(u.jsx)(J,{design:r,currentPart:n,setCurrentPart:l,setCurrentLayer:o,setLayersView:d}),Object(u.jsx)("div",{className:"add-layer-button",children:Object(u.jsx)("button",{onClick:function(){return d("AddLayerType")},children:"Add Layer"})}),Object(u.jsx)("div",{className:"layers-box-container",children:a.map((function(e,t){return Object(u.jsxs)("div",{className:"layer-list-items",children:[Object(u.jsxs)("div",{className:"layer-list-item-end ".concat(s!==t?"hide-edit-buttons":""),children:[Object(u.jsx)("div",{className:"edit-layer-button ".concat(t===i-1?"edit-layer-button-dead":""),children:Object(u.jsx)("button",{onClick:t===i-1?null:function(){return h(t,1)},children:Object(u.jsx)(E.i,{})})}),Object(u.jsx)("div",{className:"edit-layer-button ".concat(0===t?"edit-layer-button-dead":""),children:Object(u.jsx)("button",{onClick:0===t?null:function(){return h(t,-1)},children:Object(u.jsx)(E.f,{})})})]}),Object(u.jsxs)("div",{className:"layer-list-item-middle",onClick:function(){t===s?b(t,e):o(t)},children:[Object(u.jsx)("div",{className:"layer-list-item-left ".concat(s===t?"focus-layer-highlight":""),children:Object(u.jsx)("div",{className:"layer-list-item-type",children:"overlay"===e.type?G(e.source).toLowerCase():e.type})}),"color"===e.type?Object(u.jsx)("div",{className:"layer-list-item-right",style:{backgroundColor:e.color}}):"graphic"===e.type?Object(u.jsx)("div",{className:"layer-list-item-right",children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):"mask"===e.type?Object(u.jsx)("div",{className:"layer-list-item-right",children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):Object(u.jsx)("div",{className:"layer-list-item-right",children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.source,"Mask.png"),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})})]}),Object(u.jsxs)("div",{className:"layer-list-item-end ".concat(s!==t?"hide-edit-buttons":""),children:[Object(u.jsx)("div",{className:"edit-layer-button",children:Object(u.jsx)("button",{onClick:function(){b(t,e)},children:Object(u.jsx)(E.m,{})})}),"overlay"===e.type?Object(u.jsx)("div",{className:"edit-layer-button edit-layer-button-dead",children:Object(u.jsx)("button",{children:Object(u.jsx)(E.q,{})})}):Object(u.jsx)("div",{className:"edit-layer-button",children:Object(u.jsx)("button",{onClick:function(){return v(t)},children:Object(u.jsx)(E.q,{})})})]})]},t)}))}),Object(u.jsx)("div",{className:"standard-button layer-back-button",children:Object(u.jsx)("button",{onClick:function(){o(-1),c("DesignPreview")},children:"Back"})})]})};a(338);var Z=function(e){var t=e.props,a=t.design,n=t.currentPartName,r=t.handleAddMaskLayer,s=t.setLayersView;return Object(u.jsxs)("div",{className:"design-preview-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:"Select Mask Type"})}),a.configData.maskTypes[n].map((function(e,t){return Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){r(e[0],e[1]),s("LayerOverview")},children:e[0]})},t)})),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return s("LayerOverview")},children:"Cancel"})})]})};a(339);var $=function(e){var t=e.props,a=t.design,n=t.setCurrentPart,r=t.setLayersView,s=t.setCurrentLayer;return Object(u.jsxs)("div",{className:"partlist-container",children:[Object(u.jsx)("div",{className:"partlist-title",children:Object(u.jsx)("p",{children:"Parts"})}),Object(u.jsx)("div",{className:"partlist-buttons",children:a.configData.partsArray.map((function(e,t){return Object(u.jsx)("div",{className:"standard-button part-list-button",children:Object(u.jsx)("button",{onClick:function(){s(-1),n(t),r("LayerOverview")},children:e})},t)}))}),Object(u.jsx)("div",{className:"standard-button bottom-button",children:Object(u.jsx)("button",{onClick:function(){return r("LayerOverview")},children:"Back"})})]})};a(340),a(341);var K=function(e){var t=e.graphicsArray,a=e.handleAddGraphicLayer;return Object(u.jsx)("div",{className:"current-graphics-container",children:t.map((function(e,t){return Object(u.jsx)("div",{className:"current-graphics-item",onClick:function(){return a(e)},children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e),alt:"used-already"})},t)}))})};var Q={AddLayerType:U,ColorPicker:q,GraphicEditor:H,LayerOverview:X,MaskTypes:Z,PartList:$,GraphicPicker:function(e){var t=e.props,a=t.setLayersView,r=t.handleAddLayer,s=t.design,c=Object(n.useState)(!1),i=Object(l.a)(c,2),o=i[0],d=i[1],v=Object(n.useState)(!1),b=Object(l.a)(v,2),h=b[0],j=b[1],g=Object(n.useState)(),p=Object(l.a)(g,2),f=p[0],O=p[1];Object(n.useEffect)((function(){O(function(){var e=["red-apple.png"];for(var t in s.outlineData.parts){for(var a in s.outlineData.parts[t].right)if("graphic"===s.outlineData.parts[t].right[a].type){var n=s.outlineData.parts[t].right[a].link;e.includes(n)||e.push(n)}for(var r in s.outlineData.parts[t].left)if("graphic"===s.outlineData.parts[t].left[r].type){var c=s.outlineData.parts[t].left[r].link;e.includes(c)||e.push(c)}}for(var i in s.outlineData.overlays){for(var o in s.outlineData.overlays[i].right)if("graphic"===s.outlineData.overlays[i].right[o].type){var l=s.outlineData.overlays[i].right[o].link;e.includes(l)||e.push(l)}for(var u in s.outlineData.overlays[i].left)if("graphic"===s.outlineData.overlays[i].left[u].type){var d=s.outlineData.overlays[i].left[u].link;e.includes(d)||e.push(d)}}return e[0]?e:null}())}),[s]);var x=function(){var e=Object(N.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t.target.files[0].size/1024/1024).toFixed(4)<2)){e.next=8;break}return j(!0),a=t.target.files[0],e.next=6,P(a,!0).then((function(e){var t=M(e.image);y(t)}));case 6:e.next=9;break;case 8:d(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){r("Graphic",e),a("LayerOverview")};return h?Object(u.jsx)("div",{className:"upload-image-container",children:Object(u.jsx)("div",{id:"loading-small",children:Object(u.jsx)("div",{id:"loader"})})}):Object(u.jsxs)("div",{className:"upload-image-container",children:[f&&Object(u.jsx)("div",{className:"used-graphics",children:Object(u.jsx)(K,{graphicsArray:f,handleAddGraphicLayer:y})}),Object(u.jsx)("div",{className:"upload-image-input",children:Object(u.jsxs)("label",{htmlFor:"image-input-id",className:"upload-image-label",children:[Object(u.jsx)("input",{onChange:function(e){return x(e)},id:"image-input-id",type:"file",name:"myImage",accept:"image/png, image/jpeg, .png, .jpg"}),"Upload"]})}),o&&Object(u.jsx)("div",{className:"file-size-warning",children:Object(u.jsx)("p",{children:"file must be less that 2MB."})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return a("LayerOverview")},children:"Cancel"})})]})}};a(342);var ee=function(e){var t=e.layersView,a=e.setLayersView,n=e.currentLayer,r=e.currentPart,s=e.design,c=e.graphicVisualCanvas,i=e.handleChangeManager,o=e.handleUpdateGraphicVisualCanvas,l=e.handleViewChange,d=e.setCurrentLayer,v=e.setCurrentPart,b=e.setCanSave,h=e.currentShoe,j=Object.keys(s.configData.partsObject)[r],g="parts";"outerOverlay"!==j&&"innerOverlay"!==j||(g="overlays");var p=s.outlineData[g][j][h].length,f=s.outlineData[g][j][h],O=Q[t],x={allLayers:f,currentPart:r,currentLayer:n,currentPartName:j,design:s,graphicVisualCanvas:c,handleAddLayer:function(e,t){b(!0),i(Object(R.a)({type:"layer-added",partName:j,layerType:e},t&&{fileName:t})),d(p)},handleAddMaskLayer:function(e,t){b(!0),i({type:"layer-added",partName:j,layerType:"Mask",maskType:e,maskLink:t}),d(p)},handleMoveLayer:function(e,t){b(!0),i({type:"layer-moved",partName:j,layerIndex:e,direction:t}),d(n+t)},handleEditLayer:function(e,t){"color"===t.type?(d(e),a("ColorPicker")):"graphic"===t.type?(d(e),a("GraphicEditor")):"mask"===t.type?(d(e),a("ColorPicker")):"overlay"===t.type&&(v(s.configData.partsArray.indexOf(t.source)),d(-1))},handleDeleteLayer:function(e){b(!0),i({type:"layer-deleted",partName:j,layerIndex:e}),d(-1)},handleChangeManager:i,handleUpdateGraphicVisualCanvas:o,handleViewChange:l,setCurrentLayer:d,setCurrentPart:v,setLayersView:a,numberOfLayers:p,setCanSave:b,currentShoe:h,layersView:t};return Object(u.jsx)(O,{props:x})},te=(a(343),a(33));var ae=function(e){var t=e.handleViewChange,a=e.design,n=e.setDesign,r=e.setCanSave;return Object(u.jsxs)("div",{className:"changedesignname-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:"Change Design Name"})}),Object(u.jsx)("div",{className:"designer-input-div",children:Object(u.jsx)("input",{type:"text",id:"design-name-input",className:"designer-input",defaultValue:a.title})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return function(){var e=Object(te.cloneDeep)(a),s=Object(te.startCase)(document.getElementById("design-name-input").value);e.title=s,r(!0),n(e),t("DesignPreview")}()},children:"Done"})})]})};a(344);var ne=function(e){var t=e.handleViewChange,a=e.design,r=e.setDesign,s=e.setCanSave,c=e.handleUpdateBaseColor,i=e.currentShoe,o=e.setCurrentShoe,d=Object(n.useState)(a.outlineData.baseColors.left===a.outlineData.baseColors.right?"both":i),v=Object(l.a)(d,2),b=v[0],h=v[1],j=Object(n.useState)(a.outlineData.baseColors[i]),g=Object(l.a)(j,2),p=g[0],f=g[1],O=function(e){var t=e.hex||e;f(t)},x=function(e){h(e),"right"!==e&&"left"!==e||(o(e),f(a.outlineData.baseColors[e]))};return Object(u.jsxs)("div",{className:"change-base-color-container",children:[Object(u.jsx)("div",{className:"base-color-selector",children:Object(u.jsx)(Y,{color:p,onChangeComplete:O})}),Object(u.jsxs)("div",{className:"base-color-buttons",children:[Object(u.jsx)("div",{className:"base-color-radio",children:Object(u.jsxs)("div",{className:"radio-container",children:[Object(u.jsx)("div",{className:"radio-option ".concat("left"===b?"radio-active":null),onClick:function(){x("left")},children:Object(u.jsx)("p",{children:"Left"})}),Object(u.jsx)("div",{className:"radio-option ".concat("both"===b?"radio-active":null),onClick:function(){x("both")},children:Object(u.jsx)("p",{children:"Both"})}),Object(u.jsx)("div",{className:"radio-option ".concat("right"===b?"radio-active":null),onClick:function(){x("right")},children:Object(u.jsx)("p",{children:"Right"})})]})}),Object(u.jsx)("div",{className:"base-color-button",children:Object(u.jsx)("button",{onClick:function(){return O("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random"})}),Object(u.jsx)("div",{className:"base-color-button",children:Object(u.jsx)("button",{onClick:function(){return function(){var e=Object(te.cloneDeep)(a);"left"===b?e.outlineData.baseColors.left=p:"right"===b?e.outlineData.baseColors.right=p:"both"===b&&(e.outlineData.baseColors.left=p,e.outlineData.baseColors.right=p),s(!0),r(e),c(e)}()},children:"Apply"})}),Object(u.jsx)("div",{className:"base-color-button",children:Object(u.jsx)("button",{onClick:function(){return t("DesignPreview")},children:"Done"})})]})]})};var re=function(e){var t=e.design,a=e.setDesign,r=e.graphicVisualCanvas,s=e.handleUpdateGraphicVisualCanvas,c=e.handleChangeManager,i=e.handleUpdateBaseColor,o=e.userData,d=e.currentPart,v=e.setCurrentPart,b=e.currentShoe,h=e.setCurrentShoe,j=e.shoeVisibility,g=e.setShoeVisibility,p=e.view,f=e.setView,O=e.layersView,x=e.setLayersView,y=e.currentLayer,m=e.setCurrentLayer,C=Object(n.useState)(!1),N=Object(l.a)(C,2),w=N[0],k=N[1],D=function(e){f(e)};return"DesignPreview"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(A,{handleViewChange:D,design:t,setDesign:a,canSave:w,setCanSave:k,userData:o,currentShoe:b,setCurrentShoe:h,shoeVisibility:j,setShoeVisibility:g})}):"Layers"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(ee,{layersView:O,setLayersView:x,handleViewChange:D,design:t,setDesign:a,currentShoe:b,currentPart:d,setCurrentPart:v,currentLayer:y,setCurrentLayer:m,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:s,handleChangeManager:c,setCanSave:k})}):"ChangeDesignName"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(ae,{handleViewChange:D,design:t,setDesign:a,setCanSave:k})}):"ChangeBaseColor"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(ne,{handleViewChange:D,design:t,setDesign:a,setCanSave:k,handleUpdateBaseColor:i,currentShoe:b,setCurrentShoe:h})}):void 0},se=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,h,j,g,p,f,O,x;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.setTexturesLoaded,n=t.design,r=t.graphicVisualCanvas,s=t.rightInnerOverlayCanvas,c=t.rightOuterOverlayCanvas,i=t.rightTexture,o=t.rightTextureCanvas,l=t.leftInnerOverlayCanvas,u=t.leftOuterOverlayCanvas,d=t.leftTexture,v=t.leftTextureCanvas,b=t.rightCanvasObjectRef,h=t.rightOverlaysCanvasObjectRef,j=t.rightBaseColorCanvasObjectRef,g=t.leftBaseColorCanvasObjectRef,p=t.leftCanvasObjectRef,f=t.leftOverlaysCanvasObjectRef,e.next=3,ge({design:n,type:"overlaysCanvasObject",currentShoe:"right"});case 3:return h.current=e.sent,e.next=6,ge({design:n,type:"overlaysCanvasObject",currentShoe:"left"});case 6:return f.current=e.sent,pe({design:n,overlayCanvasObject:h.current,overlayCanvas:c,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),pe({design:n,overlayCanvasObject:f.current,overlayCanvas:u,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),pe({design:n,overlayCanvasObject:h.current,overlayCanvas:s,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),pe({design:n,overlayCanvasObject:f.current,overlayCanvas:l,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),e.next=13,ge({design:n,type:"partsCanvasObject",overlays:[c,s],currentShoe:"right"});case 13:return b.current=e.sent,e.next=16,ge({design:n,type:"partsCanvasObject",overlays:[u,l],currentShoe:"left"});case 16:return p.current=e.sent,e.next=19,ge({design:n,type:"baseColorCanvasObject",currentShoe:"right"});case 19:return j.current=e.sent,e.next=22,ge({design:n,type:"baseColorCanvasObject",currentShoe:"left"});case 22:return g.current=e.sent,e.next=25,Le({design:n,canvasObject:b.current,baseColorCanvasObject:j.current});case 25:return O=e.sent,e.next=28,Le({design:n,canvasObject:p.current,baseColorCanvasObject:g.current});case 28:x=e.sent,o.getContext("2d").drawImage(O,0,0),i.needsUpdate=!0,v.getContext("2d").drawImage(x,0,0),d.needsUpdate=!0,a(!0);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){var t=new S.CanvasTexture(e);return t.flipY=!1,t},ie=function(e){var t=e.design;return new Promise((function(e){var a=t.configData.canvasSize,n=document.createElement("canvas");n.width=a,n.height=a;var r=n.getContext("2d");!function t(){null!==r&&"object"===typeof n?(r.fillStyle="#ffffff",r.fillRect(0,0,a,a),e(n)):setTimeout(t,100)}()}))},oe=function(e){var t=e.design;return new Promise((function(e){var a=t.configData.canvasSize,n=document.createElement("canvas");n.width=a,n.height=a;var r=n.getContext("2d"),s=new Image;s.src="/api/assets/designimages/".concat(t.configData.source.redMap),s.onload=function(){!function t(){null!==r&&"object"===typeof n?(r.drawImage(s,0,0,1e3,1e3),e(n)):setTimeout(t,100)}()}}))},le=function(e){var t=e.design.configData.canvasSize,a=document.createElement("canvas");return a.id="graphic-visual-canvas",a.width=t,a.height=t,a},ue=function(e){var t=e.design,a=e.layer,n=e.partName;return new Promise((function(e){var r=t.configData.partsObject[n].mask,s=a.color,c=t.configData.canvasSize,i=document.createElement("canvas");i.width=c,i.height=c;var o=i.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof i?(o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=s,o.fillRect(0,0,c,c),e(i)):setTimeout(t,100)}()}}))},de=function(e){var t=e.design,a=e.layer,n=e.partName,r=e.currentShoe;return new Promise((function(e){var s=t.configData.partsObject[n].mask,c=a.link,i=a.x,o=a.y,l=a.scale,u=a.rotation,d=t.configData.canvasSize,v=document.createElement("canvas");v.width=d,v.height=d;var b=v.getContext("2d"),h=new Image;h.src="/api/assets/images/".concat(c),h.onload=function(){var t=h.width,a=h.height,n=Math.round(Math.sqrt(t*t+a*a)),c=document.createElement("canvas");c.id="pythagorean-canvas",c.width=n,c.height=n;var j=c.getContext("2d");!function t(){if(null!==j&&"object"===typeof c&&null!==b&&"object"===typeof v){j.translate(c.width/2,c.height/2),j.rotate(u*Math.PI/180),j.drawImage(h,h.width/-2,h.height/-2,h.width,h.height);var a=new Image;a.src="/api/assets/designimages/".concat(s),a.onload=function(){b.drawImage(a,0,0,d,d),b.globalCompositeOperation="source-in";var t=i+(d-d*l)/2,n=o+(d-d*l)/2,s=d*l;"left"===r&&(b.scale(-1,1),b.translate(-d,0)),b.drawImage(c,t,n,s,s),e(v)}}else setTimeout(t,100)}()}}))},ve=function(e){var t=e.design,a=e.layer,n=e.currentShoe;return new Promise((function(e){var r=a.link,s=a.color,c=t.configData.canvasSize,i=document.createElement("canvas");i.width=c,i.height=c;var o=i.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof i?("left"===n&&"heelWingLogoMask.png"===r&&(o.scale(-1,1),o.translate(-c,0)),o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=s,o.fillRect(0,0,c,c),e(i)):setTimeout(t,100)}()}}))},be=function(e){var t=e.design,a=e.layer,n=e.partName,r=e.overlayCanvas;return new Promise((function(e){var s=t.configData.partsObject[n].mask,c=a.source,i=t.configData.translations[c][n],o=i.x,l=i.y,u=i.scale,d=i.rotation,v=t.configData.canvasSize,b=document.createElement("canvas");b.width=v,b.height=v;var h=b.getContext("2d"),j=new Image;j.src="/api/assets/designimages/".concat(s),j.onload=function(){!function t(){null!==h&&"object"===typeof b?(h.drawImage(j,0,0,v,v),h.globalCompositeOperation="source-in",h.translate(v*o,v*l),h.rotate(d),h.drawImage(r,0,0,v*u,v*u),e(b)):setTimeout(t,100)}()}}))},he=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s,c,i,o,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.design,n=t.designLayers,r=t.partName,s=t.overlays,c=t.currentShoe,i=[],e.t0=C.a.keys(n);case 3:if((e.t1=e.t0()).done){e.next=44;break}if(o=e.t1.value,"color"!==n[o].type){e.next=12;break}return e.next=8,ue({design:a,layer:n[o],partName:r});case 8:l=e.sent,i.push(l),e.next=42;break;case 12:if("graphic"!==n[o].type){e.next=20;break}return e.t2=i,e.next=16,de({design:a,layer:n[o],partName:r,currentShoe:c});case 16:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=42;break;case 20:if("mask"!==n[o].type){e.next=28;break}return e.t4=i,e.next=24,ve({design:a,layer:n[o],currentShoe:c});case 24:e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.next=42;break;case 28:if("overlay"!==n[o].type){e.next=42;break}if("outerOverlay"!==n[o].source){e.next=37;break}return e.t6=i,e.next=33,be({design:a,layer:n[o],partName:r,overlayCanvas:s[0]});case 33:e.t7=e.sent,e.t6.push.call(e.t6,e.t7),e.next=42;break;case 37:return e.t8=i,e.next=40,be({design:a,layer:n[o],partName:r,overlayCanvas:s[1]});case 40:e.t9=e.sent,e.t8.push.call(e.t8,e.t9);case 42:e.next=3;break;case 44:return e.abrupt("return",{layers:i});case 45:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.design,n=t.partName,r=t.currentShoe,e.next=3,ue({design:a,layer:{color:a.outlineData.baseColors[r]},partName:n});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(e){var t=e.design,a=e.type,n=e.overlays,r=e.currentShoe;return new Promise((function(e,s){var c={};(function(){var s=Object(N.a)(C.a.mark((function s(){var i,o,l;return C.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("partsCanvasObject"!==a){s.next=11;break}s.t0=C.a.keys(t.outlineData.parts);case 2:if((s.t1=s.t0()).done){s.next=9;break}return i=s.t1.value,s.next=6,he({design:t,designLayers:t.outlineData.parts[i][r],partName:i,overlays:n,currentShoe:r});case 6:c[i]=s.sent,s.next=2;break;case 9:s.next=31;break;case 11:if("overlaysCanvasObject"!==a){s.next=22;break}s.t2=C.a.keys(t.outlineData.overlays);case 13:if((s.t3=s.t2()).done){s.next=20;break}return o=s.t3.value,s.next=17,he({design:t,designLayers:t.outlineData.overlays[o][r],partName:o,currentShoe:r});case 17:c[o]=s.sent,s.next=13;break;case 20:s.next=31;break;case 22:if("baseColorCanvasObject"!==a){s.next=31;break}s.t4=C.a.keys(t.outlineData.parts);case 24:if((s.t5=s.t4()).done){s.next=31;break}return l=s.t5.value,s.next=28,je({design:t,partName:l,currentShoe:r});case 28:c[l]=s.sent,s.next=24;break;case 31:e(c);case 32:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}})()()}))},pe=function(e){var t=e.design,a=e.overlayCanvasObject,n=e.overlayCanvas,r=e.partName,s=e.graphicVisualCanvas,c=t.configData.canvasSize,i=n.getContext("2d"),o=s.getContext("2d");for(var l in o.clearRect(0,0,c,c),i.clearRect(0,0,c,c),a[r].layers){var u=a[r].layers[l];i.drawImage(u,0,0,c,c),o.drawImage(u,0,0,c,c)}},fe=function(e){var t=e.design,a=e.graphicVisualCanvas,n=e.partName,r=e.canvasObject,s=e.baseColorCanvasObject,c=t.configData.canvasSize,i=a.getContext("2d");if(i.clearRect(0,0,c,c),s[n]){var o=s[n];i.drawImage(o,0,0,c,c)}for(var l in r[n].layers){var u=r[n].layers[l];i.drawImage(u,0,0,c,c)}},Oe=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.partName,n=t.layerIndex,r=t.layerObject,s=t.canvasObject,c=t.textureCanvas,i=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.baseColorCanvasObject,d=t.currentShoe,"color"!==r.type){e.next=7;break}return e.next=4,ue({design:l,layer:r,partName:a});case 4:v=e.sent,e.next=16;break;case 7:if("graphic"!==r.type){e.next=13;break}return e.next=10,de({design:l,layer:r,partName:a,currentShoe:d});case 10:v=e.sent,e.next=16;break;case 13:return e.next=15,ve({design:l,layer:r,currentShoe:d});case 15:v=e.sent;case 16:s[a].layers[n]=v,Ce({textureCanvas:c,canvasObjectPart:s[a],partName:a,texture:i,graphicVisualCanvas:o,design:l,baseColorCanvasObject:u});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.canvasObject,n=t.graphicVisualCanvas,r=t.layerObject,s=t.partName,c=t.texture,i=t.textureCanvas,o=t.design,l=t.baseColorCanvasObject,u=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,ue({design:o,layer:r,partName:s});case 4:d=e.sent,a[s].layers.push(d),e.next=19;break;case 8:if("graphic"!==r.type){e.next=15;break}return e.next=11,de({design:o,layer:r,partName:s,currentShoe:u});case 11:v=e.sent,a[s].layers.push(v),e.next=19;break;case 15:return e.next=17,ve({design:o,layer:r,currentShoe:u});case 17:b=e.sent,a[s].layers.push(b);case 19:Ce({textureCanvas:i,canvasObjectPart:a[s],partName:s,texture:c,graphicVisualCanvas:n,design:o,baseColorCanvasObject:l});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(e){var t=e.canvasObject,a=e.partName,n=e.layerIndex,r=e.textureCanvas,s=e.texture,c=e.graphicVisualCanvas,i=e.design,o=e.baseColorCanvasObject;t[a].layers.splice(n,1),Ce({textureCanvas:r,canvasObjectPart:t[a],partName:a,texture:s,graphicVisualCanvas:c,design:i,baseColorCanvasObject:o})},me=function(e){var t=e.canvasObject,a=e.partName,n=e.layerIndex,r=e.direction,s=e.textureCanvas,c=e.texture,i=e.graphicVisualCanvas,o=e.design,l=e.baseColorCanvasObject,u=t[a].layers,d=u[n];u[n]=u[n+r],u[n+r]=d,t[a].layers=u,Ce({textureCanvas:s,canvasObjectPart:t[a],partName:a,texture:c,graphicVisualCanvas:i,design:o,baseColorCanvasObject:l})},Ce=function(e){var t=e.textureCanvas,a=e.canvasObjectPart,n=e.partName,r=e.texture,s=e.graphicVisualCanvas,c=e.design,i=e.baseColorCanvasObject,o=t.getContext("2d"),l=s.getContext("2d");l.clearRect(0,0,c.configData.canvasSize,c.configData.canvasSize);var u=c.configData.partsObject[n],d=u.x,v=u.y,b=u.width,h=u.height,j=c.configData.divider;for(var g in o.drawImage(i[n],d/j,v/j,b/j,h/j),l.drawImage(i[n],0,0,c.configData.canvasSize,c.configData.canvasSize),a.layers){var p=a.layers[g];o.drawImage(p,d/j,v/j,b/j,h/j),l.drawImage(p,0,0,c.configData.canvasSize,c.configData.canvasSize)}r.needsUpdate=!0},Ne=function(e){var t=e.changeObject,a=e.design,n=e.setDesign,r=e.texture,s=e.textureCanvas,c=e.graphicVisualCanvas,i=e.canvasObject,o=e.overlayCanvas,l=e.overlayCanvasObject,u=e.baseColorCanvasObject,d=e.currentShoe,v=t.type,b=t.fileName,h=Object(te.cloneDeep)(a);if("graphic-moved"===v){var j=t.partName,g=t.layerIndex,p=t.direction,f=t.distance,O=h.outlineData.overlays[j][d][g];"vert"===p?O.y+=f:"hor"===p?O.x+=f:"scale"===p?O.scale*=f:"rotate"===p?O.rotation+=f:"reset"===p&&(O.y=0,O.x=0,O.scale=1,O.rotation=0),n(h),we({partName:j,layerIndex:g,layerObject:O,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,canvasObject:i,textureCanvas:s,baseColorCanvasObject:u,currentShoe:d})}else if("color-changed"===v){var x=t.partName,y=t.layerIndex,m=t.newColor,C=h.outlineData.overlays[x][d][y];C.color=m,n(h),we({partName:x,layerIndex:y,layerObject:C,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,canvasObject:i,textureCanvas:s,baseColorCanvasObject:u,currentShoe:d})}else if("layer-added"===v){var N=t.partName,w=t.layerType;if(0===a.outlineData.overlays[N][d].length){var k=a.configData.overlayParts[N];for(var D in k){var S=k[D];h.outlineData.parts[S][d].push({type:"overlay",source:N})}}"Color"===w?h.outlineData.overlays[N][d].push({type:"color",color:"#777777"}):h.outlineData.overlays[N][d].push({type:"graphic",link:b,x:0,y:0,scale:1,rotation:0}),n(h),ke({overlayCanvasObject:l,partName:N,layerObject:h.outlineData.overlays[N][d].slice(-1)[0],overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,textureCanvas:s,canvasObject:i,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}else if("layer-moved"===v){var V=t.partName,L=t.layerIndex,I=t.direction,P=h.outlineData.overlays[V][d],T=P[L];P[L]=P[L+I],P[L+I]=T,h.outlineData.overlays[V][d]=P,n(h),De({overlayCanvasObject:l,partName:V,layerIndex:L,direction:I,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,textureCanvas:s,canvasObject:i,baseColorCanvasObject:u,currentShoe:d})}else if("layer-deleted"===v){var M=t.partName,E=t.layerIndex;if(h.outlineData.overlays[M][d].splice(E,1),0===h.outlineData.overlays[M][d].length){var R=a.configData.overlayParts[M];for(var B in R)for(var A=R[B],U=0;U<h.outlineData.parts[A][d].length;U++){var G=U;"overlay"===h.outlineData.parts[A][d][U].type&&h.outlineData.parts[A][d][U].source===M&&(h.outlineData.parts[A][d].splice(G,1),i[A].layers.splice(G,1))}}n(h),Se({overlayCanvasObject:l,partName:M,layerIndex:E,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:a,textureCanvas:s,canvasObject:i,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}},we=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,h,j,g,p,f,O,x;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.partName,n=t.layerIndex,r=t.layerObject,s=t.overlayCanvasObject,c=t.overlayCanvas,i=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.canvasObject,d=t.textureCanvas,v=t.baseColorCanvasObject,b=t.currentShoe,h=l.configData.overlayParts[a],"color"!==r.type){e.next=8;break}return e.next=5,ue({design:l,layer:r,partName:a});case 5:j=e.sent,e.next=11;break;case 8:return e.next=10,de({design:l,layer:r,partName:a,currentShoe:b});case 10:j=e.sent;case 11:s[a].layers[n]=j,pe({design:l,overlayCanvasObject:s,overlayCanvas:c,partName:a,graphicVisualCanvas:o,currentShoe:b}),e.t0=C.a.keys(h);case 14:if((e.t1=e.t0()).done){e.next=32;break}g=e.t1.value,p=h[g],f=0;case 18:if(!(f<l.outlineData.parts[p][b].length)){e.next=30;break}if(O=f,"overlay"!==l.outlineData.parts[p][b][f].type){e.next=27;break}if(l.outlineData.parts[p][b][f].source!==a){e.next=27;break}return e.next=24,be({design:l,layer:l.outlineData.parts[p][b][f],partName:p,overlayCanvas:c});case 24:x=e.sent,u[p].layers[O]=x,Ve({textureCanvas:d,canvasObjectPart:u[p],partName:p,design:l,baseColorCanvasObject:v});case 27:f++,e.next=18;break;case 30:e.next=14;break;case 32:i.needsUpdate=!0;case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,h,j,g,p,f,O,x,y;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.overlayCanvasObject,n=t.partName,r=t.layerObject,s=t.overlayCanvas,c=t.texture,i=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,v=t.baseColorCanvasObject,b=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,ue({design:o,layer:r,partName:n});case 4:h=e.sent,a[n].layers.push(h),e.next=13;break;case 8:if("graphic"!==r.type){e.next=13;break}return e.next=11,de({design:o,layer:r,partName:n,currentShoe:b});case 11:j=e.sent,a[n].layers.push(j);case 13:pe({design:o,overlayCanvasObject:a,overlayCanvas:s,partName:n,graphicVisualCanvas:i,currentShoe:b}),g=o.configData.overlayParts[n],e.t0=C.a.keys(g);case 16:if((e.t1=e.t0()).done){e.next=34;break}p=e.t1.value,f=g[p],O=0;case 20:if(!(O<d.outlineData.parts[f][b].length)){e.next=32;break}if(x=O,"overlay"!==d.outlineData.parts[f][b][O].type){e.next=29;break}if(d.outlineData.parts[f][b][O].source!==n){e.next=29;break}return e.next=26,be({design:o,layer:d.outlineData.parts[f][b][O],partName:f,overlayCanvas:s});case 26:y=e.sent,u[f].layers[x]=y,Ve({textureCanvas:l,canvasObjectPart:u[f],partName:f,design:o,baseColorCanvasObject:v});case 29:O++,e.next=20;break;case 32:e.next=16;break;case 34:c.needsUpdate=!0;case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,h,j,g,p,f,O,x,y;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.overlayCanvasObject,n=t.partName,r=t.layerIndex,s=t.direction,c=t.overlayCanvas,i=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.textureCanvas,d=t.canvasObject,v=t.baseColorCanvasObject,b=t.currentShoe,h=a[n].layers,j=h[r],h[r]=h[r+s],h[r+s]=j,a[n].layers=h,pe({design:l,overlayCanvasObject:a,overlayCanvas:c,partName:n,graphicVisualCanvas:o,currentShoe:b}),g=l.configData.overlayParts[n],e.t0=C.a.keys(g);case 9:if((e.t1=e.t0()).done){e.next=27;break}p=e.t1.value,f=g[p],O=0;case 13:if(!(O<l.outlineData.parts[f][b].length)){e.next=25;break}if(x=O,"overlay"!==l.outlineData.parts[f][b][O].type){e.next=22;break}if(l.outlineData.parts[f][b][O].source!==n){e.next=22;break}return e.next=19,be({design:l,layer:l.outlineData.parts[f][b][O],partName:f,overlayCanvas:c});case 19:y=e.sent,d[f].layers[x]=y,Ve({textureCanvas:u,canvasObjectPart:d[f],partName:f,design:l,baseColorCanvasObject:v});case 22:O++,e.next=13;break;case 25:e.next=9;break;case 27:i.needsUpdate=!0;case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s,c,i,o,l,u,d,v,b,h,j,g,p,f,O;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.overlayCanvasObject,n=t.partName,r=t.layerIndex,s=t.overlayCanvas,c=t.texture,i=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,v=t.baseColorCanvasObject,b=t.currentShoe,a[n].layers.splice(r,1),pe({design:o,overlayCanvasObject:a,overlayCanvas:s,partName:n,graphicVisualCanvas:i,currentShoe:b}),h=o.configData.overlayParts[n],e.t0=C.a.keys(h);case 5:if((e.t1=e.t0()).done){e.next=22;break}j=e.t1.value,g=h[j],p=0;case 9:if(!(p<d.outlineData.parts[g][b].length)){e.next=19;break}if(f=p,"overlay"!==d.outlineData.parts[g][b][p].type||d.outlineData.parts[g][b][p].source!==n){e.next=16;break}return e.next=14,be({design:o,layer:o.outlineData.parts[g][b][p],partName:g,overlayCanvas:s});case 14:O=e.sent,u[g].layers[f]=O;case 16:p++,e.next=9;break;case 19:Ve({textureCanvas:l,canvasObjectPart:u[g],partName:g,design:o,baseColorCanvasObject:v}),e.next=5;break;case 22:c.needsUpdate=!0;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(e){var t=e.textureCanvas,a=e.canvasObjectPart,n=e.partName,r=e.design,s=e.baseColorCanvasObject,c=t.getContext("2d"),i=r.configData.partsObject[n],o=i.x,l=i.y,u=i.width,d=i.height,v=r.configData.divider;for(var b in c.drawImage(s[n],o/v,l/v,u/v,d/v),a.layers){var h=a.layers[b];c.drawImage(h,o/v,l/v,u/v,d/v)}},Le=function(e){var t=e.design,a=e.canvasObject,n=e.baseColorCanvasObject;return new Promise((function(e,r){var s=document.createElement("canvas");s.width=t.configData.canvasSize,s.height=t.configData.canvasSize;var c=s.getContext("2d");!function r(){if("undefined"!==typeof c){for(var i in a){var o=t.configData.partsObject[i],l=o.x,u=o.y,d=o.width,v=o.height,b=t.configData.divider;for(var h in c.drawImage(n[i],l/b,u/b,d/b,v/b),a[i].layers){var j=a[i].layers[h];c.drawImage(j,l/b,u/b,d/b,v/b)}}e(s)}else setTimeout(r,100)}()}))};var Ie=function(e){var t=e.userData,a=e.designSpec,r=e.graphicVisualCanvas,s=e.rightInnerOverlayCanvas,c=e.rightOuterOverlayCanvas,i=e.rightTexture,o=e.rightTextureCanvas,d=e.leftInnerOverlayCanvas,v=e.leftOuterOverlayCanvas,b=e.leftTexture,h=e.leftTextureCanvas,j=e.redMapCanvas,g=Object(n.useState)(a),p=Object(l.a)(g,2),f=p[0],O=p[1],x=Object(n.useState)(!1),y=Object(l.a)(x,2),m=y[0],w=y[1],k=Object(n.useState)(0),D=Object(l.a)(k,2),S=D[0],V=D[1],L=Object(n.useState)("right"),P=Object(l.a)(L,2),T=P[0],M=P[1],E=Object(n.useState)(-1),R=Object(l.a)(E,2),B=R[0],A=R[1],U=Object(n.useState)({right:!0,left:!0}),G=Object(l.a)(U,2),z=G[0],_=G[1],F=Object(n.useState)("DesignPreview"),W=Object(l.a)(F,2),Y=W[0],q=W[1],H=Object(n.useState)("LayerOverview"),J=Object(l.a)(H,2),X=J[0],Z=J[1],$=Object(n.useRef)(),K=Object(n.useRef)(),Q=Object(n.useRef)(),ee=Object(n.useRef)(),ae=Object(n.useRef)(),ne=Object(n.useRef)(),ce=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge({design:t,type:"baseColorCanvasObject",currentShoe:"right"});case 2:return $.current=e.sent,e.next=5,ge({design:t,type:"baseColorCanvasObject",currentShoe:"left"});case 5:return ee.current=e.sent,e.next=8,Le({design:f,canvasObject:K.current,baseColorCanvasObject:$.current});case 8:return a=e.sent,e.next=11,Le({design:f,canvasObject:ae.current,baseColorCanvasObject:ee.current});case 11:n=e.sent,o.getContext("2d").drawImage(a,0,0),i.needsUpdate=!0,h.getContext("2d").drawImage(n,0,0),b.needsUpdate=!0;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){K.current&&ae.current||se({setTexturesLoaded:w,design:f,graphicVisualCanvas:r,rightBaseColorCanvasObjectRef:$,rightInnerOverlayCanvas:s,rightOuterOverlayCanvas:c,rightTexture:i,rightTextureCanvas:o,rightCanvasObjectRef:K,rightOverlaysCanvasObjectRef:Q,leftBaseColorCanvasObjectRef:ee,leftInnerOverlayCanvas:d,leftOuterOverlayCanvas:v,leftTexture:b,leftTextureCanvas:h,leftCanvasObjectRef:ae,leftOverlaysCanvasObjectRef:ne})}),[f,r,s,c,i,o,d,v,b,h]),f?Object(u.jsxs)("div",{className:"designer-container",children:[Object(u.jsx)(I,{design:f,setView:q,setLayersView:Z,rightTexture:i,leftTexture:b,texturesLoaded:m,setCurrentPart:V,setCurrentShoe:M,setCurrentLayer:A,shoeVisibility:z,redMapCanvas:j}),Object(u.jsx)(re,{design:f,setDesign:O,view:Y,setView:q,currentLayer:B,setCurrentLayer:A,layersView:X,setLayersView:Z,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:function(e){fe("outerOverlay"===e||"innerOverlay"===e?"right"===T?{design:f,graphicVisualCanvas:r,partName:e,canvasObject:Q.current,baseColorCanvasObject:$.current,currentShoe:T}:{design:f,graphicVisualCanvas:r,partName:e,canvasObject:ne.current,baseColorCanvasObject:ee.current,currentShoe:T}:"right"===T?{design:f,graphicVisualCanvas:r,partName:e,canvasObject:K.current,baseColorCanvasObject:$.current,currentShoe:T}:{design:f,graphicVisualCanvas:r,partName:e,canvasObject:ae.current,baseColorCanvasObject:ee.current,currentShoe:T})},handleChangeManager:function(e){var t=e.partName;"outerOverlay"===t?Ne({changeObject:e,design:f,setDesign:O,texture:"right"===T?i:b,textureCanvas:"right"===T?o:h,graphicVisualCanvas:r,canvasObject:"right"===T?K.current:ae.current,overlayCanvas:"right"===T?c:v,overlayCanvasObject:"right"===T?Q.current:ne.current,baseColorCanvasObject:"right"===T?$.current:ee.current,currentShoe:T}):"innerOverlay"===t?Ne({changeObject:e,design:f,setDesign:O,texture:"right"===T?i:b,textureCanvas:"right"===T?o:h,graphicVisualCanvas:r,canvasObject:"right"===T?K.current:ae.current,overlayCanvas:"right"===T?s:d,overlayCanvasObject:"right"===T?Q.current:ne.current,baseColorCanvasObject:"right"===T?$.current:ee.current,currentShoe:T}):function(e){var t=e.changeObject,a=e.design,n=e.setDesign,r=e.texture,s=e.textureCanvas,c=e.graphicVisualCanvas,i=e.canvasObject,o=e.baseColorCanvasObject,l=e.currentShoe,u=t.type,d=t.fileName,v=Object(te.cloneDeep)(a);if("graphic-moved"===u){var b=t.partName,h=t.layerIndex,j=t.direction,g=t.distance,p=v.outlineData.parts[b][l][h];"vert"===j?p.y+=g:"hor"===j?p.x+=g:"scale"===j?p.scale*=g:"rotate"===j?p.rotation+=g:"reset"===j&&(p.y=0,p.x=0,p.scale=1,p.rotation=0),n(v),Oe({partName:b,layerIndex:h,layerObject:p,canvasObject:i,textureCanvas:s,texture:r,graphicVisualCanvas:c,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("color-changed"===u){var f,O=t.partName,x=t.layerIndex,y=t.newColor;(f="outerOverlay"===O||"innerOverlay"===O?v.outlineData.overlays[O].layers[x]:v.outlineData.parts[O][l][x]).color=y,n(v),Oe({partName:O,layerIndex:x,layerObject:f,canvasObject:i,textureCanvas:s,texture:r,graphicVisualCanvas:c,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("layer-added"===u){var m=t.partName,C=t.layerType;if("Color"===C)v.outlineData.parts[m][l].push({type:"color",color:"#777777"});else if("Graphic"===C)v.outlineData.parts[m][l].push({type:"graphic",link:d,x:0,y:0,scale:1,rotation:0});else{var N=t.maskLink;v.outlineData.parts[m][l].push({type:"mask",link:N,color:"#000000"})}n(v);var w=v.outlineData.parts[m][l].slice(-1)[0];xe({canvasObject:i,graphicVisualCanvas:c,layerObject:w,partName:m,texture:r,textureCanvas:s,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("layer-moved"===u){var k=t.partName,D=t.layerIndex,S=t.direction,V=v.outlineData.parts[k][l],L=V[D];V[D]=V[D+S],V[D+S]=L,v.outlineData.parts[k].layers=V,n(v),me({canvasObject:i,partName:k,layerIndex:D,direction:S,textureCanvas:s,texture:r,graphicVisualCanvas:c,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("layer-deleted"===u){var I=t.partName,P=t.layerIndex;v.outlineData.parts[I][l].splice(P,1),n(v),ye({canvasObject:i,partName:I,layerIndex:P,textureCanvas:s,texture:r,graphicVisualCanvas:c,design:a,baseColorCanvasObject:o,currentShoe:l})}}({changeObject:e,design:f,setDesign:O,texture:"right"===T?i:b,textureCanvas:"right"===T?o:h,graphicVisualCanvas:r,canvasObject:"right"===T?K.current:ae.current,baseColorCanvasObject:"right"===T?$.current:ee.current,currentShoe:T})},handleUpdateBaseColor:ce,userData:t,currentPart:S,setCurrentPart:V,currentShoe:T,setCurrentShoe:M,shoeVisibility:z,setShoeVisibility:_})]}):Object(u.jsx)("div",{children:"hi"})};var Pe=function(){var e=Object(o.g)().id,t=Object(n.useContext)(b.context),a=Object(n.useState)(null),r=Object(l.a)(a,2),s=r[0],c=r[1],i=Object(n.useState)(null),d=Object(l.a)(i,2),v=d[0],h=d[1],j=Object(n.useState)(null),g=Object(l.a)(j,2),p=g[0],f=g[1],x=Object(n.useState)(null),y=Object(l.a)(x,2),m=y[0],w=y[1],k=Object(n.useState)(null),D=Object(l.a)(k,2),S=D[0],V=D[1],L=Object(n.useState)(null),I=Object(l.a)(L,2),P=I[0],T=I[1],M=Object(n.useState)(null),E=Object(l.a)(M,2),R=E[0],B=E[1],A=Object(n.useState)(null),U=Object(l.a)(A,2),G=U[0],z=U[1],_=Object(n.useState)(null),F=Object(l.a)(_,2),W=F[0],Y=F[1],q=Object(n.useState)(null),H=Object(l.a)(q,2),J=H[0],X=H[1],Z=Object(n.useState)(null),$=Object(l.a)(Z,2),K=$[0],Q=$[1],ee=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,r,s,i,o,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(t),h(le({design:t})),e.next=4,ie({design:t});case 4:return a=e.sent,f(a),e.next=8,ie({design:t});case 8:return n=e.sent,w(n),e.next=12,ie({design:t});case 12:return r=e.sent,V(r),e.next=16,ie({design:t});case 16:return s=e.sent,B(s),e.next=20,ie({design:t});case 20:return i=e.sent,z(i),e.next=24,ie({design:t});case 24:return o=e.sent,Y(o),e.next=28,oe({design:t});case 28:l=e.sent,Q(l);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){e?O("/api/outlines/".concat(e),"GET").then((function(e){return e.json()})).then((function(e){ee(e)})):O("/api/outlines/newdesign","GET").then((function(e){return e.json()})).then((function(e){ee(e)}))}),[e]),Object(n.useEffect)((function(){S&&W&&(T(ce(S)),X(ce(W)))}),[S,W]),s&&v&&p&&m&&S&&P&&R&&G&&W&&J&&K?Object(u.jsx)("div",{className:"designer-root-container",children:Object(u.jsx)(Ie,{userData:t,designSpec:s,graphicVisualCanvas:v,rightInnerOverlayCanvas:p,rightOuterOverlayCanvas:m,rightTexture:P,rightTextureCanvas:S,leftInnerOverlayCanvas:R,leftOuterOverlayCanvas:G,leftTexture:J,leftTextureCanvas:W,redMapCanvas:K})}):Object(u.jsx)("div",{})};a(345);var Te=function(){return Object(u.jsxs)("div",{className:"login-container",children:[Object(u.jsx)("div",{className:"login-google-button",children:Object(u.jsx)("button",{onClick:function(){window.open("http://solecomposer.com/auth/google","_self")},children:"Login With Google"})}),Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("div",{className:"basic-button",children:Object(u.jsx)("button",{children:"Back"})})})]})};a(346);var Me=function(){var e=Object(n.useContext)(b.context);return Object(u.jsxs)("div",{className:"profile-container",children:[Object(u.jsx)("p",{className:"basic-paragraph",children:e.firstName}),Object(u.jsx)("p",{className:"basic-paragraph",children:e.email}),Object(u.jsx)("div",{className:"basic-button",children:Object(u.jsx)("button",{onClick:function(){window.open("http://solecomposer.com/auth/logout","_self")},children:"Log Out"})}),Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("div",{className:"basic-button",children:Object(u.jsx)("button",{children:"Back"})})})]})};a(347);var Ee=function(){return Object(u.jsxs)("div",{className:"no-page-container",children:[Object(u.jsx)("p",{className:"basic-paragraph",children:"404 - PAGE NOT FOUND"}),Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("div",{className:"basic-button",children:Object(u.jsx)("button",{children:"Home"})})})]})};var Re=function(){return Object(u.jsx)("div",{className:"app-container",children:Object(u.jsx)(i.a,{children:Object(u.jsx)(b,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:y}),Object(u.jsx)(o.a,{exact:!0,path:"/login",component:Te}),Object(u.jsx)(o.a,{exact:!0,path:"/profile",component:Me}),Object(u.jsx)(o.a,{exact:!0,path:"/designer",component:Pe}),Object(u.jsx)(o.a,{exact:!0,path:"/designer/:id",component:Pe}),Object(u.jsx)(o.a,{path:"*",component:Ee})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Re,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[348,1,2]]]);
//# sourceMappingURL=main.51ade33d.chunk.js.map