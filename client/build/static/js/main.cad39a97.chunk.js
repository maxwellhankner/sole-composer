(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{107:function(e,a,t){e.exports=t(310)},112:function(e,a,t){},113:function(e,a,t){},114:function(e,a,t){},115:function(e,a,t){},120:function(e,a,t){},121:function(e,a,t){},123:function(e,a,t){},124:function(e,a,t){},125:function(e,a,t){},126:function(e,a,t){},127:function(e,a,t){},128:function(e,a,t){},129:function(e,a,t){},130:function(e,a,t){},131:function(e,a,t){},132:function(e,a,t){},296:function(e,a,t){},297:function(e,a,t){},298:function(e,a,t){},299:function(e,a,t){},300:function(e,a,t){},301:function(e,a,t){},302:function(e,a,t){},303:function(e,a,t){},304:function(e,a,t){},305:function(e,a,t){},306:function(e,a,t){},307:function(e,a,t){},308:function(e,a,t){},309:function(e,a,t){},310:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(102),i=t.n(s),c=(t(112),t(10)),l=t(9),o=(t(113),t(3)),u=Object(n.createContext)(null),v=function(e){var a=e.children,t=Object(n.useState)(),s=Object(o.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){fetch("/auth/getsession",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.err||c(e)}))}),[]),r.a.createElement(u.Provider,{value:i},a)};v.context=u;var d=v;t(114),t(115);var m=function(e){var a=e.userData,t=Object(l.f)();return r.a.createElement("div",{className:"new-design-button standard-button",onClick:function(){a&&t.push("/designer")}},r.a.createElement("button",null,"N E W \xa0 D E S I G N"))};t(120);var g=function(e){var a=e.props,t=e.userData,n=a._id,s=a.title,i=a.configId,c=a.author,o=a.screenshot,u=Object(l.f)();return r.a.createElement("div",{className:"featureddesigncard-container",onClick:function(){t&&u.push("/designer/".concat(n))}},r.a.createElement("div",{className:"featureddesigncard-image"},r.a.createElement("img",{src:"api/assets/images/".concat(o),alt:"feature-design"})),r.a.createElement("p",{className:"featureddesigncard-title"},s),r.a.createElement("p",{className:"featureddesigncard-model"},i.modelName),r.a.createElement("p",{className:"featureddesigncard-author"},c.firstName))};t(121);var p=function(e){var a=e.myDesigns;return r.a.createElement("div",{className:"mydesigntiles-container"},r.a.createElement("div",null,r.a.createElement("p",{className:"landing-section-label"},"MY DESIGNS")),r.a.createElement("div",{className:"my-designs-grid"},a.map((function(e,a){return r.a.createElement(c.b,{key:a,to:"/designer/".concat(e._id),className:"link-to-designer"},r.a.createElement("div",{className:"my-design-tile"},r.a.createElement("img",{src:"/api/assets/images/".concat(e.screenshot),alt:"my-design-preview"})))}))))},f=function(e,a){return fetch(e,{method:a})},h=function(e,a,t){return fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})};var b=function(){var e=Object(n.useContext)(d.context),a=Object(n.useState)(),t=Object(o.a)(a,2),s=t[0],i=t[1],l=Object(n.useState)(),u=Object(o.a)(l,2),v=u[0],h=u[1];return Object(n.useEffect)((function(){f("/api/featured","GET").then((function(e){return e.json()})).then((function(e){return i(e)})),e&&f("/api/outlines/mydesigns","GET").then((function(e){return e.json()})).then((function(e){return h(e)}))}),[e]),r.a.createElement("div",{className:"landing-container"},r.a.createElement("div",{className:"landing-header"},r.a.createElement("p",null,r.a.createElement("strong",null,"Sole")," Composer"),e?r.a.createElement(c.b,{to:"/profile"},e.firstName):r.a.createElement(c.b,{to:"/login"},"Login")),r.a.createElement("div",{className:"landing-content"},r.a.createElement("div",{className:"featured-designs-container"},r.a.createElement("p",{className:"landing-section-label"},"FEATURED"),r.a.createElement("div",{className:"feature-designs"},s?s.featured.map((function(a,t){return r.a.createElement(g,{props:a,userData:e,key:t})})):null)),e?r.a.createElement(m,{userData:e}):r.a.createElement(c.b,{to:"/login"},r.a.createElement("div",{className:"landing-button"},r.a.createElement("button",null,"Get Started"))),v&&r.a.createElement(p,{myDesigns:v})))},y=t(2),C=t.n(y),O=t(8),E=(t(123),t(124),t(125),t(1)),j=t(104),x=t(105);t(126);var N=function(){return r.a.createElement("div",{id:"loading-screen"},r.a.createElement("div",{id:"loader"}))},w=function(e){var a=e.design,t=e.rightTexture,s=e.leftTexture,i=e.initialLoaded,c=e.camera,l=e.setCamera,u=e.orbitControls,v=e.setOrbitControls,d=e.setCurrentPart,m=e.setCurrentShoe,g=e.setView,p=e.setLayersView,f=e.setCurrentLayer,h=e.shoeVisibility,b=Object(n.useState)(!0),y=Object(o.a)(b,2),w=y[0],k=y[1],D=Object(n.useState)(!1),S=Object(o.a)(D,2),L=S[0],V=S[1],I=Object(n.useState)(null),P=Object(o.a)(I,2),T=P[0],M=P[1],R=Object(n.useState)(null),z=Object(o.a)(R,2),A=z[0],B=z[1],U=Object(n.useState)(null),G=Object(o.a)(U,2),F=G[0],_=G[1],W=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(!L){var e=function(){var e=Object(O.a)(C.a.mark((function e(){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t,"aoMapRight");case 2:a=e.sent,B(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(O.a)(C.a.mark((function e(){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(s,"aoMapLeft");case 2:a=e.sent,_(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(e,t){return new Promise((function(n){var r=new Image;r.src="/api/assets/designimages/".concat(a.configData.source[t]),r.onload=function(){var a=new E.g(r);a.flipY=!1,n(new E.L({map:e,aoMap:a}))}}))};M(new E.sb({antialias:!0,preserveDrawingBuffer:!0,alpha:!0})),e(),n()}}),[L,t,s,a.configData.source]),Object(n.useEffect)((function(){if(T&&A&&F&&!L){T.setSize(2048,2048),W.current.appendChild(T.domElement);var e=new E.T(45,1,.1,1e3);e.position.z=8.5,e.position.y=0,e.layers.enable(1),e.layers.enable(2),l(e);var a=new j.a(e,T.domElement);a.maxDistance=10,a.minDistance=4,a.minPolarAngle=.2*Math.PI,a.maxPolarAngle=Math.PI*(6/7),a.enablePan=!1,a.enableDamping=!0,a.dampingFactor=.18,a.update(),v(a)}}),[L,T,A,F,l,v]),Object(n.useEffect)((function(){if(T&&A&&F&&c&&u&&!L){var e=new E.eb,t=new E.a(16777215,1);e.add(t);var n=new E.D;n.onLoad=function(){k(!1)};var r=new E.mb,s=new E.cb;s.layers.enable(1),s.layers.enable(2);new x.a(n).load("/api/assets/models/".concat(a.configData.source.model),(function(t){t.scene.traverse((function(e){e.isMesh&&(e.material=A,e.layers.set(1))}));var n=t.scene;n.scale.set(.35,.35,.35),n.position.y=-1,n.position.z=1.25,n.rotation.y=Math.PI/180*-95,n.name="rightModel",e.add(n);var i=t.scene.clone();i.scale.set(-.35,.35,.35),i.position.y=-1,i.position.z=-1.25,i.rotation.y=Math.PI/180*-95,i.name="leftModel",e.add(i),i.traverse((function(e){e.isMesh&&(e.material=F,e.layers.set(2))})),function(e,t){r.load("/api/assets/designimages/".concat(a.configData.source.redMap),(function(a){var n=new E.pb,r=a.image,i=document.createElement("canvas");i.width=r.width,i.height=r.height;var l=i.getContext("2d");!function e(){null!==l&&"object"===typeof i?l.drawImage(r,0,0,r.width,r.height):setTimeout(e,100)}();var o=!1;T.domElement.addEventListener("pointerdown",(function(e){o=!1})),T.domElement.addEventListener("pointermove",(function(e){e.preventDefault(),o=!0})),T.domElement.addEventListener("pointerup",(function(a){if(a.preventDefault(),!o){var l=T.domElement.getBoundingClientRect();n.x=a.clientX/l.width*2-1,n.y=-a.clientY/l.height*2+1,s.setFromCamera(n,c);var u=s.intersectObjects([e,t],!0);if(u.length){"rightModel"===u[0].object.parent.name&&!0===h.right?(p("LayerOverview"),f(-1),g("Layers"),m("right")):"leftModel"===u[0].object.parent.name&&!0===h.left&&(p("LayerOverview"),f(-1),g("Layers"),m("left"));var v=u[0].uv2;switch(v.x*=r.width,v.y*=r.height,i.getContext("2d").getImageData(v.x,v.y,1,1).data[0]){case 255:d(4);break;case 220:d(2);break;case 210:d(0);break;case 200:d(5);break;case 190:d(3);break;case 180:d(1);break;case 170:d(16);break;case 160:d(15);break;case 150:d(14);break;case 140:d(9);break;case 130:d(13);break;case 120:d(11);break;case 110:d(12);break;case 100:d(8);break;case 90:d(10);break;case 80:d(7);break;case 70:d(6);break;case 60:d(17)}}}}))}))}(n,i),V(!0)}));var i=function a(){T.render(e,c),requestAnimationFrame(a),u.update()};i();return function(){cancelAnimationFrame(i)}}}),[L,A,F,T,c,a.configData.source,d,m,g,p,f,h,u]),r.a.createElement("div",{className:"scene-container",id:"scene-container-id",ref:W},!w&&i?null:r.a.createElement(N,null))},k=(t(127),t(20)),D=(t(128),function(e,a){var t=new FormData;return a?t.append("image",e,"newImage"):t.append("image",e),fetch("/api/assets/uploadimage",{method:"POST",body:t}).then((function(e){return e.json()}))}),S=function(e,a){return new Promise((function(t){e.position.set(0,0,8.5),setTimeout((function(){var e=document.getElementById("scene-container-id").firstElementChild,n=document.createElement("canvas");n.width=1024,n.height=1024,n.getContext("2d").drawImage(e,0,0,1024,1024);for(var r=n.toDataURL("image/png"),s=atob(r.split(",")[1]),i=[],c=0;c<s.length;c++)i.push(s.charCodeAt(c));var l=new Blob([new Uint8Array(i)],{type:"image/png"});l.name="theBlob",l.lastModifiedDate=new Date;var o=new File([l],a,{type:"image/png"});t(o)}),500)}))},L=function(e){var a=e.split("/");return a=a[a.length-1]},V=t(6);var I=function(e){var a=e.handleViewChange,t=e.design,s=e.camera,i=e.orbitControls,l=e.canSave,u=e.setCanSave,v=e.userData,d=e.currentShoe,m=e.setCurrentShoe,g=e.shoeVisibility,p=e.setShoeVisibility,f=Object(n.useState)(!1),b=Object(o.a)(f,2),y=b[0],E=b[1],j=function(){var e=Object(O.a)(C.a.mark((function e(){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!1),t.author){e.next=9;break}return E(!0),e.next=5,S(s,"newImage");case 5:a=e.sent,D(a,!0).then((function(e){var a=L(e.image),n={author:v._id,title:t.title,screenshot:a,configId:"5f925589cc6d6c16e44d5dfd",outlineData:t.outlineData};h("/api/outlines","POST",n).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))})),e.next=22;break;case 9:if(t.author!==v._id){e.next=17;break}return E(!0),e.next=13,S(s,t.screenshot);case 13:n=e.sent,D(n,!1).then((function(e){var a=L(e.image),n={author:t.author,title:t.title,screenshot:a,configId:"5f925589cc6d6c16e44d5dfd",outlineData:t.outlineData};h("/api/outlines/".concat(t._id),"PUT",n),E(!1)})),e.next=22;break;case 17:return E(!0),e.next=20,S(s,t.screenshot);case 20:r=e.sent,D(r,!0).then((function(e){var a=L(e.image),n={author:v._id,title:t.title,screenshot:a,configId:"5f925589cc6d6c16e44d5dfd",outlineData:t.outlineData};h("/api/outlines/","POST",n).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))}));case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){if("right"===e&&e!==d)if(g.right)m(e);else{var a=s.position;i.target.set(0,0,1.25),s.position.set(a.x,a.y,a.z+2.5);var t=Object(k.a)({},g);t.right=!0,t.left=!1,p(t),s.layers.toggle(1),s.layers.toggle(2),m(e)}else if("left"===e&&e!==d)if(g.left)m(e);else{var n=s.position;i.target.set(0,0,-1.25),s.position.set(n.x,n.y,n.z-2.5);var r=Object(k.a)({},g);r.right=!1,r.left=!0,p(r),s.layers.toggle(1),s.layers.toggle(2),m(e)}},N=function(e){if(1===e){if("left"===d){if(g.right){var a=s.position;i.target.set(0,0,-1.25),s.position.set(a.x,a.y,a.z-1.25)}else{var t=s.position;i.target.set(0,0,0),s.position.set(t.x,t.y,t.z+1.25)}var n=Object(k.a)({},g);n.right=!n.right,p(n),s.layers.toggle(e)}else if("right"===d)if(g.left){var r=s.position;i.target.set(0,0,-1.25),s.position.set(r.x,r.y,r.z-1.25);var c=Object(k.a)({},g);c.right=!1,p(c),m("left"),s.layers.toggle(e)}else{var l=s.position;i.target.set(0,0,-1.25),s.position.set(l.x,l.y,l.z-2.5);var o=Object(k.a)({},g);o.right=!o.right,o.left=!o.left,p(o),s.layers.toggle(1),s.layers.toggle(2),m("left")}}else if(2===e)if("right"===d){if(g.left){var u=s.position;i.target.set(0,0,1.25),s.position.set(u.x,u.y,u.z+1.25)}else{var v=s.position;i.target.set(0,0,0),s.position.set(v.x,v.y,v.z-1.25)}var f=Object(k.a)({},g);f.left=!f.left,p(f),s.layers.toggle(e)}else if("left"===d)if(g.right){var h=s.position;i.target.set(0,0,1.25),s.position.set(h.x,h.y,h.z+1.25);var b=Object(k.a)({},g);b.left=!1,p(b),m("right"),s.layers.toggle(e)}else{var y=s.position;i.target.set(0,0,1.25),s.position.set(y.x,y.y,y.z+2.5);var C=Object(k.a)({},g);C.right=!C.right,C.left=!C.left,p(C),s.layers.toggle(1),s.layers.toggle(2),m("right")}};return y?r.a.createElement("div",{className:"design-preview-container"},r.a.createElement("div",{id:"loading-small"},r.a.createElement("div",{id:"loader"}))):v?r.a.createElement("div",{className:"design-preview-container"},r.a.createElement("div",{className:"design-preview-info"},r.a.createElement("div",{className:"design-title-container"},r.a.createElement("p",{className:"design-title"},t.title),r.a.createElement("button",{className:"edit-design-title-button",onClick:function(){return a("ChangeDesignName")}},r.a.createElement(V.n,null)))),r.a.createElement("div",{className:"design-preview-buttons"},r.a.createElement("div",{className:"design-preview-toggle-container"},r.a.createElement("div",{className:"design-preview-toggle-left"},r.a.createElement("div",{className:"design-preview-toggle-shoe ".concat("right"===d?null:"disabled-shoe"),onClick:function(){x("right")}},r.a.createElement("p",null,"Right")),r.a.createElement("div",{className:"design-preview-toggle-shoe ".concat("left"===d?null:"disabled-shoe"),onClick:function(){x("left")}},r.a.createElement("p",null,"Left"))),r.a.createElement("div",{className:"design-preview-toggle-right"},r.a.createElement("div",{className:"design-preview-toggle-visible ".concat(g.right?null:"disabled-visibility"),onClick:function(){N(1)}},r.a.createElement(V.l,null)),r.a.createElement("div",{className:"design-preview-toggle-visible ".concat(g.left?null:"disabled-visibility"),onClick:function(){N(2)}},r.a.createElement(V.l,null)))),r.a.createElement("div",{className:"design-preview-button",onClick:function(){return a("ChangeBaseColor")}},r.a.createElement("div",{className:"design-preview-button-icon",style:{color:t.outlineData.baseColors[d]}},r.a.createElement(V.q,null)),r.a.createElement("button",null,"Base Color")),r.a.createElement("div",{className:"design-preview-button",onClick:function(){return a("Layers")}},r.a.createElement("div",{className:"design-preview-button-icon"},r.a.createElement(V.m,null)),r.a.createElement("button",null,"Layers")),r.a.createElement("div",{className:"design-preview-button",onClick:function(){s.layers.enableAll(),i.target.set(0,0,0),p({right:!0,left:!0}),s.position.set(0,0,8.5)}},r.a.createElement("div",{className:"design-preview-button-icon"},r.a.createElement(V.f,null)),r.a.createElement("button",null,"Reset Camera")),l?r.a.createElement("div",{className:"design-preview-button",onClick:function(){j()}},r.a.createElement("div",{className:"design-preview-button-icon"},r.a.createElement(V.p,null)),r.a.createElement("button",null,"Save")):r.a.createElement("div",{className:"design-preview-button save-deactivated"},r.a.createElement("div",{className:"design-preview-button-icon"},r.a.createElement(V.p,null)),r.a.createElement("button",null,"Save")),t.author===v._id&&r.a.createElement("div",{className:"design-preview-button",onClick:function(){v._id===t.author&&(fetch("/api/outlines/".concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}),window.location.href="/")}},r.a.createElement("div",{className:"design-preview-button-icon"},r.a.createElement(V.s,null)),r.a.createElement("button",null,"Delete")),r.a.createElement(c.b,{to:"/"},r.a.createElement("div",{className:"design-preview-button"},r.a.createElement("div",{className:"design-preview-button-icon"},r.a.createElement(V.r,null)),r.a.createElement("button",null,"Exit"))))):r.a.createElement("div",null,"no data")};t(129);var P=function(e){var a=e.props,t=a.design,n=a.currentPartName,s=a.handleAddLayer,i=a.setLayersView;return r.a.createElement("div",{className:"design-preview-container"},r.a.createElement("div",{className:"view-title"},r.a.createElement("p",null,"Select Layer Type")),t.configData.layerTypes[n].types.map((function(e,a){return r.a.createElement("div",{key:a,className:"standard-button"},"Mask"===e?r.a.createElement("button",{onClick:function(){i("MaskTypes")}},e):"Graphic"===e?r.a.createElement("button",{onClick:function(){i("GraphicPicker")}},e):r.a.createElement("button",{onClick:function(){s(e),i("LayerOverview")}},e))})),r.a.createElement("div",{className:"standard-button"},r.a.createElement("button",{onClick:function(){return i("LayerOverview")}},"Cancel")))},T=(t(130),function(e){var a=e.split(/(?=[A-Z])/).join(" ");return a.charAt(0).toUpperCase()+a.substr(1)});t(131);var M=function(e){var a=e.colorsArray,t=e.handleColorChange;return r.a.createElement("div",{className:"current-colors-container"},r.a.createElement("div",{className:"current-colors-scroll"},a.map((function(e,a){return r.a.createElement("button",{key:a,style:{backgroundColor:e},onClick:function(){return t(e)}})}))))},R=(t(132),t(106)),z=(t(296),function(){return r.a.createElement("div",{className:"custom-pointer"})}),A=t(7),B=Object(R.CustomPicker)((function(e){var a=e.hex,t=e.hsl,n=e.hsv,s=e.onChange,i={hue:{height:18,position:"relative",marginBottom:9,overflow:"hidden"},saturation:{width:"100%",height:120,position:"relative",marginBottom:9,overflow:"hidden"},input:{width:"47%",height:"30px",border:"none",borderRadius:"none",fontSize:".7rem",WebkitAppearance:"none",WebkitBorderRadius:0,boxShadow:"none",display:"block",paddingLeft:"3%",paddingRight:"0px"},swatch:{width:"100%",height:"100%",background:a},inputContainer:{background:a}};return r.a.createElement("div",{className:"custom-color"},r.a.createElement("div",{style:i.hue},r.a.createElement(A.Hue,{hsl:t,onChange:s,pointer:z})),r.a.createElement("div",{style:i.saturation},r.a.createElement(A.Saturation,{hsl:t,hsv:n,onChange:s,pointer:z})),r.a.createElement("div",{className:"color-input",style:i.inputContainer},r.a.createElement(A.EditableInput,{style:{input:i.input},className:"custom-color-input",value:a,onChange:s})))}));var U=function(e){var a=e.props,t=a.currentLayer,s=a.currentPartName,i=a.design,c=a.handleChangeManager,l=a.setLayersView,u=a.setCanSave,v=a.currentShoe,d=Object(n.useState)("#ffffaa"),m=Object(o.a)(d,2),g=m[0],p=m[1],f=Object(n.useState)([]),h=Object(o.a)(f,2),b=h[0],y=h[1];Object(n.useEffect)((function(){y(function(){var e=[];for(var a in i.outlineData.parts){for(var t in i.outlineData.parts[a].right){var n=i.outlineData.parts[a].right[t].type;if("color"===n||"mask"===n){var r=i.outlineData.parts[a].right[t].color;e.includes(r)||e.push(r)}}for(var s in i.outlineData.parts[a].left){var c=i.outlineData.parts[a].left[s].type;if("color"===c||"mask"===c){var l=i.outlineData.parts[a].left[s].color;e.includes(l)||e.push(l)}}}for(var o in i.outlineData.overlays){for(var u in i.outlineData.overlays[o].right)if("color"===i.outlineData.overlays[o].right[u].type){var v=i.outlineData.overlays[o].right[u].color;e.includes(v)||e.push(v)}for(var d in i.outlineData.overlays[o].left)if("color"===i.outlineData.overlays[o].left[d].type){var m=i.outlineData.overlays[o].left[d].color;e.includes(m)||e.push(m)}}var g=i.outlineData.baseColors.right;e.includes(g)||e.push(g);var p=i.outlineData.baseColors.left;return e.includes(p)||e.push(p),e}()),p("outerOverlay"===s||"innerOverlay"===s?i.outlineData.overlays[s][v][t].color:i.outlineData.parts[s][v][t].color)}),[i,s,t,y,v]);var C=function(e){console.log(e),u(!0);var a=e.hex||e;p(e),c({type:"color-changed",partName:s,layerIndex:t,newColor:a})};return r.a.createElement("div",{className:"color-picker-container"},r.a.createElement("div",{className:"view-title"},r.a.createElement("p",null,T(s))),r.a.createElement("div",{className:"standard-button"},r.a.createElement("button",{onClick:function(){return C("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))}},"Random Color")),r.a.createElement("div",null,r.a.createElement(M,{colorsArray:b,handleColorChange:C})),r.a.createElement("div",null,r.a.createElement(B,{color:g,onChangeComplete:C})),r.a.createElement("div",{className:"standard-button"},r.a.createElement("button",{onClick:function(){return l("LayerOverview")}},"Back")))};t(297);var G=function(e){var a=e.props,t=a.currentLayer,s=a.currentPartName,i=a.graphicVisualCanvas,c=a.handleChangeManager,l=a.handleUpdateGraphicVisualCanvas,o=a.setLayersView,u=a.setCanSave,v=a.currentShoe,d=function(e,a){u(!0),c({type:"graphic-moved",partName:s,layerIndex:t,direction:e,distance:a})};return Object(n.useEffect)((function(){!function(){var e=document.getElementById("graphic-visual-container");e.innerHTML="",e.appendChild(i)}(),l(s)}),[]),r.a.createElement("div",{className:"graphic-editor-container"},r.a.createElement("div",{className:"graphic-editor-upper"},r.a.createElement("div",{className:"graphic-editor-buttons",id:"edit-buttons-div"},r.a.createElement("button",{className:"graphic-edit-button",id:"up-button",onClick:function(){return d("vert",-30)}},r.a.createElement(V.d,null)),r.a.createElement("button",{className:"graphic-edit-button",id:"down-button",onClick:function(){return d("vert",30)}},r.a.createElement(V.a,null)),r.a.createElement("button",{className:"graphic-edit-button",id:"left-button",onClick:function(){return d("hor",-30)}},r.a.createElement(V.b,null)),r.a.createElement("button",{className:"graphic-edit-button",id:"right-button",onClick:function(){return d("hor",30)}},r.a.createElement(V.c,null)),r.a.createElement("button",{className:"graphic-edit-button",id:"scale-up-button",onClick:function(){return d("scale",1.1)}},r.a.createElement(V.e,null)),r.a.createElement("button",{className:"graphic-edit-button",id:"scale-down-button",onClick:function(){return d("scale",.9)}},r.a.createElement(V.k,null)),r.a.createElement("button",{className:"graphic-edit-button",id:"clockwise-button",onClick:function(){return d("rotate",5)}},r.a.createElement(V.o,null)),r.a.createElement("button",{className:"graphic-edit-button",id:"counterclockwise-button",onClick:function(){return d("rotate",-5)}},r.a.createElement(V.t,null))),r.a.createElement("div",{id:"graphic-visual-container",className:"left"===v?"mirror-graphic-visual":null})),r.a.createElement("div",{className:"graphic-editor-lower"},r.a.createElement("div",{className:"standard-button graphic-editor-lower-button"},r.a.createElement("button",{onClick:function(){return d("reset",0)}},"Reset")),r.a.createElement("div",{className:"standard-button graphic-editor-lower-button"},r.a.createElement("button",{onClick:function(){return o("LayerOverview")}},"Back"))))};t(298),t(299);var F=function(e){var a=e.design,t=e.currentPart,n=e.setCurrentPart,s=e.setCurrentLayer,i=e.setLayersView,c=a.configData.partsArray.length,l=a.configData.partsArray,o=function(e){n(0===t&&e<0?c-1:t===c-1&&e>0?0:t+e)};return r.a.createElement("div",{className:"part-selector-container"},r.a.createElement("div",null,r.a.createElement("button",{className:"change-part-button",onClick:function(){o(-1),s(-1)}},r.a.createElement(V.h,null)),r.a.createElement("button",{className:"partname-button",onClick:function(){i("PartList")}},T(l[t])),r.a.createElement("button",{className:"change-part-button",onClick:function(){o(1),s(-1)}},r.a.createElement(V.i,null))))};var _=function(e){var a=e.props,t=a.allLayers,n=a.currentPart,s=a.design,i=a.currentLayer,c=a.handleViewChange,l=a.numberOfLayers,o=a.setCurrentLayer,u=a.setCurrentPart,v=a.setLayersView,d=a.handleDeleteLayer,m=a.handleEditLayer,g=a.handleMoveLayer;return r.a.createElement("div",{className:"layers-view-container",onClick:function(e){"layers-view-container"===e.target.className&&o(-1)}},r.a.createElement(F,{design:s,currentPart:n,setCurrentPart:u,setCurrentLayer:o,setLayersView:v}),r.a.createElement("div",{className:"add-layer-button"},r.a.createElement("button",{onClick:function(){return v("AddLayerType")}},"Add Layer")),r.a.createElement("div",{className:"layers-box-container"},t.map((function(e,a){return r.a.createElement("div",{key:a,className:"layer-list-items"},r.a.createElement("div",{className:"layer-list-item-end ".concat(i!==a?"hide-edit-buttons":"")},r.a.createElement("div",{className:"edit-layer-button ".concat(a===l-1?"edit-layer-button-dead":"")},r.a.createElement("button",{onClick:a===l-1?null:function(){return g(a,1)}},r.a.createElement(V.j,null))),r.a.createElement("div",{className:"edit-layer-button ".concat(0===a?"edit-layer-button-dead":"")},r.a.createElement("button",{onClick:0===a?null:function(){return g(a,-1)}},r.a.createElement(V.g,null)))),r.a.createElement("div",{className:"layer-list-item-middle",onClick:function(){a===i?m(a,e):o(a)}},r.a.createElement("div",{className:"layer-list-item-left ".concat(i===a?"focus-layer-highlight":"")},r.a.createElement("div",{className:"layer-list-item-type"},"overlay"===e.type?T(e.source).toLowerCase():e.type)),"color"===e.type?r.a.createElement("div",{className:"layer-list-item-right",style:{backgroundColor:e.color}}):"graphic"===e.type?r.a.createElement("div",{className:"layer-list-item-right"},r.a.createElement("img",{src:"/api/assets/images/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})):"mask"===e.type?r.a.createElement("div",{className:"layer-list-item-right"},r.a.createElement("img",{src:"/api/assets/designimages/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})):r.a.createElement("div",{className:"layer-list-item-right"},r.a.createElement("img",{src:"/api/assets/designimages/".concat(e.source,"Mask.png"),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"}))),r.a.createElement("div",{className:"layer-list-item-end ".concat(i!==a?"hide-edit-buttons":"")},r.a.createElement("div",{className:"edit-layer-button"},r.a.createElement("button",{onClick:function(){m(a,e)}},r.a.createElement(V.n,null))),"overlay"===e.type?r.a.createElement("div",{className:"edit-layer-button edit-layer-button-dead"},r.a.createElement("button",null,r.a.createElement(V.r,null))):r.a.createElement("div",{className:"edit-layer-button"},r.a.createElement("button",{onClick:function(){return d(a)}},r.a.createElement(V.r,null)))))}))),r.a.createElement("div",{className:"standard-button layer-back-button"},r.a.createElement("button",{onClick:function(){o(-1),c("DesignPreview")}},"Back")))};t(300);var W=function(e){var a=e.props,t=a.design,n=a.currentPartName,s=a.handleAddMaskLayer,i=a.setLayersView;return r.a.createElement("div",{className:"design-preview-container"},r.a.createElement("div",{className:"view-title"},r.a.createElement("p",null,"Select Mask Type")),t.configData.maskTypes[n].map((function(e,a){return r.a.createElement("div",{key:a,className:"standard-button"},r.a.createElement("button",{onClick:function(){s(e[0],e[1]),i("LayerOverview")}},e[0]))})),r.a.createElement("div",{className:"standard-button"},r.a.createElement("button",{onClick:function(){return i("LayerOverview")}},"Cancel")))};t(301);var Y=function(e){var a=e.props,t=a.design,n=a.setCurrentPart,s=a.setLayersView,i=a.setCurrentLayer;return r.a.createElement("div",{className:"partlist-container"},r.a.createElement("div",{className:"partlist-title"},r.a.createElement("p",null,"Parts")),r.a.createElement("div",{className:"partlist-buttons"},t.configData.partsArray.map((function(e,a){return r.a.createElement("div",{className:"standard-button part-list-button",key:a},r.a.createElement("button",{onClick:function(){i(-1),n(a),s("LayerOverview")}},e))}))),r.a.createElement("div",{className:"standard-button bottom-button"},r.a.createElement("button",{onClick:function(){return s("LayerOverview")}},"Back")))};t(302),t(303);var q=function(e){var a=e.graphicsArray,t=e.handleAddGraphicLayer;return r.a.createElement("div",{className:"current-graphics-container"},a.map((function(e,a){return r.a.createElement("div",{className:"current-graphics-item",key:a,onClick:function(){return t(e)}},r.a.createElement("img",{src:"/api/assets/images/".concat(e),alt:"used-already"}))})))};var H={AddLayerType:P,ColorPicker:U,GraphicEditor:G,LayerOverview:_,MaskTypes:W,PartList:Y,GraphicPicker:function(e){var a=e.props,t=a.setLayersView,s=a.handleAddLayer,i=a.design,c=Object(n.useState)(!1),l=Object(o.a)(c,2),u=l[0],v=l[1],d=Object(n.useState)(!1),m=Object(o.a)(d,2),g=m[0],p=m[1],f=Object(n.useState)(),h=Object(o.a)(f,2),b=h[0],y=h[1];Object(n.useEffect)((function(){y(function(){var e=["red-apple.png"];for(var a in i.outlineData.parts){for(var t in i.outlineData.parts[a].right)if("graphic"===i.outlineData.parts[a].right[t].type){var n=i.outlineData.parts[a].right[t].link;e.includes(n)||e.push(n)}for(var r in i.outlineData.parts[a].left)if("graphic"===i.outlineData.parts[a].left[r].type){var s=i.outlineData.parts[a].left[r].link;e.includes(s)||e.push(s)}}for(var c in i.outlineData.overlays){for(var l in i.outlineData.overlays[c].right)if("graphic"===i.outlineData.overlays[c].right[l].type){var o=i.outlineData.overlays[c].right[l].link;e.includes(o)||e.push(o)}for(var u in i.outlineData.overlays[c].left)if("graphic"===i.outlineData.overlays[c].left[u].type){var v=i.outlineData.overlays[c].left[u].link;e.includes(v)||e.push(v)}}return e[0]?e:null}())}),[i]);var E=function(){var e=Object(O.a)(C.a.mark((function e(a){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a.target.files[0].size/1024/1024).toFixed(4)<2)){e.next=8;break}return p(!0),t=a.target.files[0],e.next=6,D(t,!0).then((function(e){var a=L(e.image);j(a)}));case 6:e.next=9;break;case 8:v(!0);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),j=function(e){s("Graphic",e),t("LayerOverview")};return g?r.a.createElement("div",{className:"upload-image-container"},r.a.createElement("div",{id:"loading-small"},r.a.createElement("div",{id:"loader"}))):r.a.createElement("div",{className:"upload-image-container"},b&&r.a.createElement("div",{className:"used-graphics"},r.a.createElement(q,{graphicsArray:b,handleAddGraphicLayer:j})),r.a.createElement("div",{className:"upload-image-input"},r.a.createElement("label",{htmlFor:"image-input-id",className:"upload-image-label"},r.a.createElement("input",{onChange:function(e){return E(e)},id:"image-input-id",type:"file",name:"myImage",accept:"image/png, image/jpeg, .png, .jpg"}),"Upload")),u&&r.a.createElement("div",{className:"file-size-warning"},r.a.createElement("p",null,"file must be less that 2MB.")),r.a.createElement("div",{className:"standard-button"},r.a.createElement("button",{onClick:function(){return t("LayerOverview")}},"Cancel")))}};t(304);var J=function(e){var a=e.layersView,t=e.setLayersView,n=e.currentLayer,s=e.currentPart,i=e.design,c=e.graphicVisualCanvas,l=e.handleChangeManager,o=e.handleUpdateGraphicVisualCanvas,u=e.handleViewChange,v=e.setCurrentLayer,d=e.setCurrentPart,m=e.setCanSave,g=e.currentShoe,p=Object.keys(i.configData.partsObject)[s],f="parts";"outerOverlay"!==p&&"innerOverlay"!==p||(f="overlays");var h=i.outlineData[f][p][g].length,b=i.outlineData[f][p][g],y=H[a],C={allLayers:b,currentPart:s,currentLayer:n,currentPartName:p,design:i,graphicVisualCanvas:c,handleAddLayer:function(e,a){m(!0),l(Object(k.a)({type:"layer-added",partName:p,layerType:e},a&&{fileName:a})),v(h)},handleAddMaskLayer:function(e,a){m(!0),l({type:"layer-added",partName:p,layerType:"Mask",maskType:e,maskLink:a}),v(h)},handleMoveLayer:function(e,a){m(!0),l({type:"layer-moved",partName:p,layerIndex:e,direction:a}),v(n+a)},handleEditLayer:function(e,a){"color"===a.type?(v(e),t("ColorPicker")):"graphic"===a.type?(v(e),t("GraphicEditor")):"mask"===a.type?(v(e),t("ColorPicker")):"overlay"===a.type&&(d(i.configData.partsArray.indexOf(a.source)),v(-1))},handleDeleteLayer:function(e){m(!0),l({type:"layer-deleted",partName:p,layerIndex:e}),v(-1)},handleChangeManager:l,handleUpdateGraphicVisualCanvas:o,handleViewChange:u,setCurrentLayer:v,setCurrentPart:d,setLayersView:t,numberOfLayers:h,setCanSave:m,currentShoe:g,layersView:a};return r.a.createElement(y,{props:C})},X=(t(305),t(23));var Z=function(e){var a=e.handleViewChange,t=e.design,n=e.setDesign,s=e.setCanSave;return r.a.createElement("div",{className:"changedesignname-container"},r.a.createElement("div",{className:"view-title"},r.a.createElement("p",null,"Change Design Name")),r.a.createElement("div",{className:"designer-input-div"},r.a.createElement("input",{type:"text",id:"design-name-input",className:"designer-input",defaultValue:t.title})),r.a.createElement("div",{className:"standard-button"},r.a.createElement("button",{onClick:function(){return function(){var e=Object(X.cloneDeep)(t),r=Object(X.startCase)(document.getElementById("design-name-input").value);e.title=r,s(!0),n(e),a("DesignPreview")}()}},"Done")))};t(306);var $=function(e){var a=e.handleViewChange,t=e.design,s=e.setDesign,i=e.setCanSave,c=e.handleUpdateBaseColor,l=e.currentShoe,u=e.setCurrentShoe,v=Object(n.useState)(t.outlineData.baseColors.left===t.outlineData.baseColors.right?"both":l),d=Object(o.a)(v,2),m=d[0],g=d[1],p=Object(n.useState)(t.outlineData.baseColors[l]),f=Object(o.a)(p,2),h=f[0],b=f[1],y=function(e){var a=e.hex||e;b(a)},C=function(e){g(e),"right"!==e&&"left"!==e||(u(e),b(t.outlineData.baseColors[e]))};return r.a.createElement("div",{className:"change-base-color-container"},r.a.createElement("div",{className:"base-color-selector"},r.a.createElement(B,{color:h,onChangeComplete:y})),r.a.createElement("div",{className:"base-color-buttons"},r.a.createElement("div",{className:"base-color-radio"},r.a.createElement("div",{className:"radio-container"},r.a.createElement("div",{className:"radio-option ".concat("left"===m?"radio-active":null),onClick:function(){C("left")}},r.a.createElement("p",null,"Left")),r.a.createElement("div",{className:"radio-option ".concat("both"===m?"radio-active":null),onClick:function(){C("both")}},r.a.createElement("p",null,"Both")),r.a.createElement("div",{className:"radio-option ".concat("right"===m?"radio-active":null),onClick:function(){C("right")}},r.a.createElement("p",null,"Right")))),r.a.createElement("div",{className:"base-color-button"},r.a.createElement("button",{onClick:function(){return y("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))}},"Random")),r.a.createElement("div",{className:"base-color-button"},r.a.createElement("button",{onClick:function(){return function(){var e=Object(X.cloneDeep)(t);"left"===m?e.outlineData.baseColors.left=h:"right"===m?e.outlineData.baseColors.right=h:"both"===m&&(e.outlineData.baseColors.left=h,e.outlineData.baseColors.right=h),i(!0),s(e),c(e)}()}},"Apply")),r.a.createElement("div",{className:"base-color-button"},r.a.createElement("button",{onClick:function(){return a("DesignPreview")}},"Done"))))};var K=function(e){var a=e.design,t=e.setDesign,s=e.graphicVisualCanvas,i=e.handleUpdateGraphicVisualCanvas,c=e.handleChangeManager,l=e.camera,u=e.orbitControls,v=e.handleUpdateBaseColor,d=e.userData,m=e.currentPart,g=e.setCurrentPart,p=e.currentShoe,f=e.setCurrentShoe,h=e.shoeVisibility,b=e.setShoeVisibility,y=e.view,C=e.setView,O=e.layersView,E=e.setLayersView,j=e.currentLayer,x=e.setCurrentLayer,N=Object(n.useState)(!1),w=Object(o.a)(N,2),k=w[0],D=w[1],S=function(e){C(e)};return"DesignPreview"===y?r.a.createElement("div",{className:"interface-container"},r.a.createElement(I,{handleViewChange:S,design:a,setDesign:t,camera:l,orbitControls:u,canSave:k,setCanSave:D,userData:d,currentShoe:p,setCurrentShoe:f,shoeVisibility:h,setShoeVisibility:b})):"Layers"===y?r.a.createElement("div",{className:"interface-container"},r.a.createElement(J,{layersView:O,setLayersView:E,handleViewChange:S,design:a,setDesign:t,currentShoe:p,currentPart:m,setCurrentPart:g,currentLayer:j,setCurrentLayer:x,graphicVisualCanvas:s,handleUpdateGraphicVisualCanvas:i,handleChangeManager:c,setCanSave:D})):"ChangeDesignName"===y?r.a.createElement("div",{className:"interface-container"},r.a.createElement(Z,{handleViewChange:S,design:a,setDesign:t,setCanSave:D})):"ChangeBaseColor"===y?r.a.createElement("div",{className:"interface-container"},r.a.createElement($,{handleViewChange:S,design:a,setDesign:t,setCanSave:D,handleUpdateBaseColor:v,currentShoe:p,setCurrentShoe:f})):void 0},Q=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s,i,c,l,o,u,v,d,m,g,p,f,h,b,y,O;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.setInitialLoaded,n=a.design,r=a.graphicVisualCanvas,s=a.rightInnerOverlayCanvas,i=a.rightOuterOverlayCanvas,c=a.rightTexture,l=a.rightTextureCanvas,o=a.leftInnerOverlayCanvas,u=a.leftOuterOverlayCanvas,v=a.leftTexture,d=a.leftTextureCanvas,m=a.rightCanvasObjectRef,g=a.rightOverlaysCanvasObjectRef,p=a.rightBaseColorCanvasObjectRef,f=a.leftBaseColorCanvasObjectRef,h=a.leftCanvasObjectRef,b=a.leftOverlaysCanvasObjectRef,e.next=3,oe({design:n,type:"overlaysCanvasObject",currentShoe:"right"});case 3:return g.current=e.sent,e.next=6,oe({design:n,type:"overlaysCanvasObject",currentShoe:"left"});case 6:return b.current=e.sent,ue({design:n,overlayCanvasObject:g.current,overlayCanvas:i,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),ue({design:n,overlayCanvasObject:b.current,overlayCanvas:u,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),ue({design:n,overlayCanvasObject:g.current,overlayCanvas:s,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),ue({design:n,overlayCanvasObject:b.current,overlayCanvas:o,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),e.next=13,oe({design:n,type:"partsCanvasObject",overlays:[i,s],currentShoe:"right"});case 13:return m.current=e.sent,e.next=16,oe({design:n,type:"partsCanvasObject",overlays:[u,o],currentShoe:"left"});case 16:return h.current=e.sent,e.next=19,oe({design:n,type:"baseColorCanvasObject",currentShoe:"right"});case 19:return p.current=e.sent,e.next=22,oe({design:n,type:"baseColorCanvasObject",currentShoe:"left"});case 22:return f.current=e.sent,e.next=25,je({design:n,canvasObject:m.current,baseColorCanvasObject:p.current});case 25:return y=e.sent,e.next=28,je({design:n,canvasObject:h.current,baseColorCanvasObject:f.current});case 28:O=e.sent,l.getContext("2d").drawImage(y,0,0),c.needsUpdate=!0,d.getContext("2d").drawImage(O,0,0),v.needsUpdate=!0,t(!0);case 34:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ee=function(e){var a=new E.g(e);return a.flipY=!1,a},ae=function(e){var a=e.design;return new Promise((function(e){var t=a.configData.canvasSize,n=document.createElement("canvas");n.width=t,n.height=t;var r=n.getContext("2d");!function a(){null!==r&&"object"===typeof n?(r.fillStyle="#ffffff",r.fillRect(0,0,t,t),e(n)):setTimeout(a,100)}()}))},te=function(e){var a=e.design.configData.canvasSize,t=document.createElement("canvas");return t.id="graphic-visual-canvas",t.width=a,t.height=a,t},ne=function(e){var a=e.design,t=e.layer,n=e.partName;return new Promise((function(e){var r=a.configData.partsObject[n].mask,s=t.color,i=a.configData.canvasSize,c=document.createElement("canvas");c.width=i,c.height=i;var l=c.getContext("2d"),o=new Image;o.src="/api/assets/designimages/".concat(r),o.onload=function(){!function a(){null!==l&&"object"===typeof c?(l.drawImage(o,0,0,i,i),l.globalCompositeOperation="source-in",l.fillStyle=s,l.fillRect(0,0,i,i),e(c)):setTimeout(a,100)}()}}))},re=function(e){var a=e.design,t=e.layer,n=e.partName,r=e.currentShoe;return new Promise((function(e){var s=a.configData.partsObject[n].mask,i=t.link,c=t.x,l=t.y,o=t.scale,u=t.rotation,v=a.configData.canvasSize,d=document.createElement("canvas");d.width=v,d.height=v;var m=d.getContext("2d"),g=new Image;g.src="/api/assets/images/".concat(i),g.onload=function(){var a=g.width,t=g.height,n=Math.round(Math.sqrt(a*a+t*t)),i=document.createElement("canvas");i.id="pythagorean-canvas",i.width=n,i.height=n;var p=i.getContext("2d");!function a(){if(null!==p&&"object"===typeof i&&null!==m&&"object"===typeof d){p.translate(i.width/2,i.height/2),p.rotate(u*Math.PI/180),p.drawImage(g,g.width/-2,g.height/-2,g.width,g.height);var t=new Image;t.src="/api/assets/designimages/".concat(s),t.onload=function(){m.drawImage(t,0,0,v,v),m.globalCompositeOperation="source-in";var a=c+(v-v*o)/2,n=l+(v-v*o)/2,s=v*o;"left"===r&&(m.scale(-1,1),m.translate(-v,0)),m.drawImage(i,a,n,s,s),e(d)}}else setTimeout(a,100)}()}}))},se=function(e){var a=e.design,t=e.layer,n=e.currentShoe;return new Promise((function(e){var r=t.link,s=t.color,i=a.configData.canvasSize,c=document.createElement("canvas");c.width=i,c.height=i;var l=c.getContext("2d"),o=new Image;o.src="/api/assets/designimages/".concat(r),o.onload=function(){!function a(){null!==l&&"object"===typeof c?("left"===n&&"heelWingLogoMask.png"===r&&(l.scale(-1,1),l.translate(-i,0)),l.drawImage(o,0,0,i,i),l.globalCompositeOperation="source-in",l.fillStyle=s,l.fillRect(0,0,i,i),e(c)):setTimeout(a,100)}()}}))},ie=function(e){var a=e.design,t=e.layer,n=e.partName,r=e.overlayCanvas;return new Promise((function(e){var s=a.configData.partsObject[n].mask,i=t.source,c=a.configData.translations[i][n],l=c.x,o=c.y,u=c.scale,v=c.rotation,d=a.configData.canvasSize,m=document.createElement("canvas");m.width=d,m.height=d;var g=m.getContext("2d"),p=new Image;p.src="/api/assets/designimages/".concat(s),p.onload=function(){!function a(){null!==g&&"object"===typeof m?(g.drawImage(p,0,0,d,d),g.globalCompositeOperation="source-in",g.translate(d*l,d*o),g.rotate(v),g.drawImage(r,0,0,d*u,d*u),e(m)):setTimeout(a,100)}()}}))},ce=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s,i,c,l,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.design,n=a.designLayers,r=a.partName,s=a.overlays,i=a.currentShoe,c=[],e.t0=C.a.keys(n);case 3:if((e.t1=e.t0()).done){e.next=44;break}if(l=e.t1.value,"color"!==n[l].type){e.next=12;break}return e.next=8,ne({design:t,layer:n[l],partName:r});case 8:o=e.sent,c.push(o),e.next=42;break;case 12:if("graphic"!==n[l].type){e.next=20;break}return e.t2=c,e.next=16,re({design:t,layer:n[l],partName:r,currentShoe:i});case 16:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=42;break;case 20:if("mask"!==n[l].type){e.next=28;break}return e.t4=c,e.next=24,se({design:t,layer:n[l],currentShoe:i});case 24:e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.next=42;break;case 28:if("overlay"!==n[l].type){e.next=42;break}if("outerOverlay"!==n[l].source){e.next=37;break}return e.t6=c,e.next=33,ie({design:t,layer:n[l],partName:r,overlayCanvas:s[0]});case 33:e.t7=e.sent,e.t6.push.call(e.t6,e.t7),e.next=42;break;case 37:return e.t8=c,e.next=40,ie({design:t,layer:n[l],partName:r,overlayCanvas:s[1]});case 40:e.t9=e.sent,e.t8.push.call(e.t8,e.t9);case 42:e.next=3;break;case 44:return e.abrupt("return",{layers:c});case 45:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),le=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.design,n=a.partName,r=a.currentShoe,e.next=3,ne({design:t,layer:{color:t.outlineData.baseColors[r]},partName:n});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),oe=function(e){var a=e.design,t=e.type,n=e.overlays,r=e.currentShoe;return new Promise((function(e,s){var i={};(function(){var s=Object(O.a)(C.a.mark((function s(){var c,l,o;return C.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("partsCanvasObject"!==t){s.next=11;break}s.t0=C.a.keys(a.outlineData.parts);case 2:if((s.t1=s.t0()).done){s.next=9;break}return c=s.t1.value,s.next=6,ce({design:a,designLayers:a.outlineData.parts[c][r],partName:c,overlays:n,currentShoe:r});case 6:i[c]=s.sent,s.next=2;break;case 9:s.next=31;break;case 11:if("overlaysCanvasObject"!==t){s.next=22;break}s.t2=C.a.keys(a.outlineData.overlays);case 13:if((s.t3=s.t2()).done){s.next=20;break}return l=s.t3.value,s.next=17,ce({design:a,designLayers:a.outlineData.overlays[l][r],partName:l,currentShoe:r});case 17:i[l]=s.sent,s.next=13;break;case 20:s.next=31;break;case 22:if("baseColorCanvasObject"!==t){s.next=31;break}s.t4=C.a.keys(a.outlineData.parts);case 24:if((s.t5=s.t4()).done){s.next=31;break}return o=s.t5.value,s.next=28,le({design:a,partName:o,currentShoe:r});case 28:i[o]=s.sent,s.next=24;break;case 31:e(i);case 32:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}})()()}))},ue=function(e){var a=e.design,t=e.overlayCanvasObject,n=e.overlayCanvas,r=e.partName,s=e.graphicVisualCanvas,i=a.configData.canvasSize,c=n.getContext("2d"),l=s.getContext("2d");for(var o in l.clearRect(0,0,i,i),c.clearRect(0,0,i,i),t[r].layers){var u=t[r].layers[o];c.drawImage(u,0,0,i,i),l.drawImage(u,0,0,i,i)}},ve=function(e){var a=e.design,t=e.graphicVisualCanvas,n=e.partName,r=e.canvasObject,s=e.baseColorCanvasObject,i=a.configData.canvasSize,c=t.getContext("2d");if(c.clearRect(0,0,i,i),s[n]){var l=s[n];c.drawImage(l,0,0,i,i)}for(var o in r[n].layers){var u=r[n].layers[o];c.drawImage(u,0,0,i,i)}},de=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s,i,c,l,o,u,v,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.partName,n=a.layerIndex,r=a.layerObject,s=a.canvasObject,i=a.textureCanvas,c=a.texture,l=a.graphicVisualCanvas,o=a.design,u=a.baseColorCanvasObject,v=a.currentShoe,"color"!==r.type){e.next=7;break}return e.next=4,ne({design:o,layer:r,partName:t});case 4:d=e.sent,e.next=16;break;case 7:if("graphic"!==r.type){e.next=13;break}return e.next=10,re({design:o,layer:r,partName:t,currentShoe:v});case 10:d=e.sent,e.next=16;break;case 13:return e.next=15,se({design:o,layer:r,currentShoe:v});case 15:d=e.sent;case 16:s[t].layers[n]=d,fe({textureCanvas:i,canvasObjectPart:s[t],partName:t,texture:c,graphicVisualCanvas:l,design:o,baseColorCanvasObject:u});case 18:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),me=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s,i,c,l,o,u,v,d,m;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.canvasObject,n=a.graphicVisualCanvas,r=a.layerObject,s=a.partName,i=a.texture,c=a.textureCanvas,l=a.design,o=a.baseColorCanvasObject,u=a.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,ne({design:l,layer:r,partName:s});case 4:v=e.sent,t[s].layers.push(v),e.next=19;break;case 8:if("graphic"!==r.type){e.next=15;break}return e.next=11,re({design:l,layer:r,partName:s,currentShoe:u});case 11:d=e.sent,t[s].layers.push(d),e.next=19;break;case 15:return e.next=17,se({design:l,layer:r,currentShoe:u});case 17:m=e.sent,t[s].layers.push(m);case 19:fe({textureCanvas:c,canvasObjectPart:t[s],partName:s,texture:i,graphicVisualCanvas:n,design:l,baseColorCanvasObject:o});case 20:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ge=function(e){var a=e.canvasObject,t=e.partName,n=e.layerIndex,r=e.textureCanvas,s=e.texture,i=e.graphicVisualCanvas,c=e.design,l=e.baseColorCanvasObject;a[t].layers.splice(n,1),fe({textureCanvas:r,canvasObjectPart:a[t],partName:t,texture:s,graphicVisualCanvas:i,design:c,baseColorCanvasObject:l})},pe=function(e){var a=e.canvasObject,t=e.partName,n=e.layerIndex,r=e.direction,s=e.textureCanvas,i=e.texture,c=e.graphicVisualCanvas,l=e.design,o=e.baseColorCanvasObject,u=a[t].layers,v=u[n];u[n]=u[n+r],u[n+r]=v,a[t].layers=u,fe({textureCanvas:s,canvasObjectPart:a[t],partName:t,texture:i,graphicVisualCanvas:c,design:l,baseColorCanvasObject:o})},fe=function(e){var a=e.textureCanvas,t=e.canvasObjectPart,n=e.partName,r=e.texture,s=e.graphicVisualCanvas,i=e.design,c=e.baseColorCanvasObject,l=a.getContext("2d"),o=s.getContext("2d");o.clearRect(0,0,i.configData.canvasSize,i.configData.canvasSize);var u=i.configData.partsObject[n],v=u.x,d=u.y,m=u.width,g=u.height,p=i.configData.divider;for(var f in l.drawImage(c[n],v/p,d/p,m/p,g/p),o.drawImage(c[n],0,0,i.configData.canvasSize,i.configData.canvasSize),t.layers){var h=t.layers[f];l.drawImage(h,v/p,d/p,m/p,g/p),o.drawImage(h,0,0,i.configData.canvasSize,i.configData.canvasSize)}r.needsUpdate=!0},he=function(e){var a=e.changeObject,t=e.design,n=e.setDesign,r=e.texture,s=e.textureCanvas,i=e.graphicVisualCanvas,c=e.canvasObject,l=e.overlayCanvas,o=e.overlayCanvasObject,u=e.baseColorCanvasObject,v=e.currentShoe,d=a.type,m=a.fileName,g=Object(X.cloneDeep)(t);if("graphic-moved"===d){var p=a.partName,f=a.layerIndex,h=a.direction,b=a.distance,y=g.outlineData.overlays[p][v][f];"vert"===h?y.y+=b:"hor"===h?y.x+=b:"scale"===h?y.scale*=b:"rotate"===h?y.rotation+=b:"reset"===h&&(y.y=0,y.x=0,y.scale=1,y.rotation=0),n(g),be({partName:p,layerIndex:f,layerObject:y,overlayCanvasObject:o,overlayCanvas:l,texture:r,graphicVisualCanvas:i,design:t,canvasObject:c,textureCanvas:s,baseColorCanvasObject:u,currentShoe:v})}else if("color-changed"===d){var C=a.partName,O=a.layerIndex,E=a.newColor,j=g.outlineData.overlays[C][v][O];j.color=E,n(g),be({partName:C,layerIndex:O,layerObject:j,overlayCanvasObject:o,overlayCanvas:l,texture:r,graphicVisualCanvas:i,design:t,canvasObject:c,textureCanvas:s,baseColorCanvasObject:u,currentShoe:v})}else if("layer-added"===d){var x=a.partName,N=a.layerType;if(0===t.outlineData.overlays[x][v].length){var w=t.configData.overlayParts[x];for(var k in w){var D=w[k];g.outlineData.parts[D][v].push({type:"overlay",source:x})}}"Color"===N?g.outlineData.overlays[x][v].push({type:"color",color:"#777777"}):g.outlineData.overlays[x][v].push({type:"graphic",link:m,x:0,y:0,scale:1,rotation:0}),n(g),ye({overlayCanvasObject:o,partName:x,layerObject:g.outlineData.overlays[x][v].slice(-1)[0],overlayCanvas:l,texture:r,graphicVisualCanvas:i,design:t,textureCanvas:s,canvasObject:c,tempDesign:g,baseColorCanvasObject:u,currentShoe:v})}else if("layer-moved"===d){var S=a.partName,L=a.layerIndex,V=a.direction,I=g.outlineData.overlays[S][v],P=I[L];I[L]=I[L+V],I[L+V]=P,g.outlineData.overlays[S][v]=I,n(g),Ce({overlayCanvasObject:o,partName:S,layerIndex:L,direction:V,overlayCanvas:l,texture:r,graphicVisualCanvas:i,design:t,textureCanvas:s,canvasObject:c,baseColorCanvasObject:u,currentShoe:v})}else if("layer-deleted"===d){var T=a.partName,M=a.layerIndex;if(g.outlineData.overlays[T][v].splice(M,1),0===g.outlineData.overlays[T][v].length){var R=t.configData.overlayParts[T];for(var z in R)for(var A=R[z],B=0;B<g.outlineData.parts[A][v].length;B++){var U=B;"overlay"===g.outlineData.parts[A][v][B].type&&g.outlineData.parts[A][v][B].source===T&&(g.outlineData.parts[A][v].splice(U,1),c[A].layers.splice(U,1))}}n(g),Oe({overlayCanvasObject:o,partName:T,layerIndex:M,overlayCanvas:l,texture:r,graphicVisualCanvas:i,design:t,textureCanvas:s,canvasObject:c,tempDesign:g,baseColorCanvasObject:u,currentShoe:v})}},be=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s,i,c,l,o,u,v,d,m,g,p,f,h,b,y,O;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.partName,n=a.layerIndex,r=a.layerObject,s=a.overlayCanvasObject,i=a.overlayCanvas,c=a.texture,l=a.graphicVisualCanvas,o=a.design,u=a.canvasObject,v=a.textureCanvas,d=a.baseColorCanvasObject,m=a.currentShoe,g=o.configData.overlayParts[t],"color"!==r.type){e.next=8;break}return e.next=5,ne({design:o,layer:r,partName:t});case 5:p=e.sent,e.next=11;break;case 8:return e.next=10,re({design:o,layer:r,partName:t,currentShoe:m});case 10:p=e.sent;case 11:s[t].layers[n]=p,ue({design:o,overlayCanvasObject:s,overlayCanvas:i,partName:t,graphicVisualCanvas:l,currentShoe:m}),e.t0=C.a.keys(g);case 14:if((e.t1=e.t0()).done){e.next=32;break}f=e.t1.value,h=g[f],b=0;case 18:if(!(b<o.outlineData.parts[h][m].length)){e.next=30;break}if(y=b,"overlay"!==o.outlineData.parts[h][m][b].type){e.next=27;break}if(o.outlineData.parts[h][m][b].source!==t){e.next=27;break}return e.next=24,ie({design:o,layer:o.outlineData.parts[h][m][b],partName:h,overlayCanvas:i});case 24:O=e.sent,u[h].layers[y]=O,Ee({textureCanvas:v,canvasObjectPart:u[h],partName:h,design:o,baseColorCanvasObject:d});case 27:b++,e.next=18;break;case 30:e.next=14;break;case 32:c.needsUpdate=!0;case 33:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ye=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s,i,c,l,o,u,v,d,m,g,p,f,h,b,y,O,E;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.overlayCanvasObject,n=a.partName,r=a.layerObject,s=a.overlayCanvas,i=a.texture,c=a.graphicVisualCanvas,l=a.design,o=a.textureCanvas,u=a.canvasObject,v=a.tempDesign,d=a.baseColorCanvasObject,m=a.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,ne({design:l,layer:r,partName:n});case 4:g=e.sent,t[n].layers.push(g),e.next=13;break;case 8:if("graphic"!==r.type){e.next=13;break}return e.next=11,re({design:l,layer:r,partName:n,currentShoe:m});case 11:p=e.sent,t[n].layers.push(p);case 13:ue({design:l,overlayCanvasObject:t,overlayCanvas:s,partName:n,graphicVisualCanvas:c,currentShoe:m}),f=l.configData.overlayParts[n],e.t0=C.a.keys(f);case 16:if((e.t1=e.t0()).done){e.next=34;break}h=e.t1.value,b=f[h],y=0;case 20:if(!(y<v.outlineData.parts[b][m].length)){e.next=32;break}if(O=y,"overlay"!==v.outlineData.parts[b][m][y].type){e.next=29;break}if(v.outlineData.parts[b][m][y].source!==n){e.next=29;break}return e.next=26,ie({design:l,layer:v.outlineData.parts[b][m][y],partName:b,overlayCanvas:s});case 26:E=e.sent,u[b].layers[O]=E,Ee({textureCanvas:o,canvasObjectPart:u[b],partName:b,design:l,baseColorCanvasObject:d});case 29:y++,e.next=20;break;case 32:e.next=16;break;case 34:i.needsUpdate=!0;case 35:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s,i,c,l,o,u,v,d,m,g,p,f,h,b,y,O,E;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.overlayCanvasObject,n=a.partName,r=a.layerIndex,s=a.direction,i=a.overlayCanvas,c=a.texture,l=a.graphicVisualCanvas,o=a.design,u=a.textureCanvas,v=a.canvasObject,d=a.baseColorCanvasObject,m=a.currentShoe,g=t[n].layers,p=g[r],g[r]=g[r+s],g[r+s]=p,t[n].layers=g,ue({design:o,overlayCanvasObject:t,overlayCanvas:i,partName:n,graphicVisualCanvas:l,currentShoe:m}),f=o.configData.overlayParts[n],e.t0=C.a.keys(f);case 9:if((e.t1=e.t0()).done){e.next=27;break}h=e.t1.value,b=f[h],y=0;case 13:if(!(y<o.outlineData.parts[b][m].length)){e.next=25;break}if(O=y,"overlay"!==o.outlineData.parts[b][m][y].type){e.next=22;break}if(o.outlineData.parts[b][m][y].source!==n){e.next=22;break}return e.next=19,ie({design:o,layer:o.outlineData.parts[b][m][y],partName:b,overlayCanvas:i});case 19:E=e.sent,v[b].layers[O]=E,Ee({textureCanvas:u,canvasObjectPart:v[b],partName:b,design:o,baseColorCanvasObject:d});case 22:y++,e.next=13;break;case 25:e.next=9;break;case 27:c.needsUpdate=!0;case 28:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s,i,c,l,o,u,v,d,m,g,p,f,h,b,y;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.overlayCanvasObject,n=a.partName,r=a.layerIndex,s=a.overlayCanvas,i=a.texture,c=a.graphicVisualCanvas,l=a.design,o=a.textureCanvas,u=a.canvasObject,v=a.tempDesign,d=a.baseColorCanvasObject,m=a.currentShoe,t[n].layers.splice(r,1),ue({design:l,overlayCanvasObject:t,overlayCanvas:s,partName:n,graphicVisualCanvas:c,currentShoe:m}),g=l.configData.overlayParts[n],e.t0=C.a.keys(g);case 5:if((e.t1=e.t0()).done){e.next=22;break}p=e.t1.value,f=g[p],h=0;case 9:if(!(h<v.outlineData.parts[f][m].length)){e.next=19;break}if(b=h,"overlay"!==v.outlineData.parts[f][m][h].type||v.outlineData.parts[f][m][h].source!==n){e.next=16;break}return e.next=14,ie({design:l,layer:l.outlineData.parts[f][m][h],partName:f,overlayCanvas:s});case 14:y=e.sent,u[f].layers[b]=y;case 16:h++,e.next=9;break;case 19:Ee({textureCanvas:o,canvasObjectPart:u[f],partName:f,design:l,baseColorCanvasObject:d}),e.next=5;break;case 22:i.needsUpdate=!0;case 23:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Ee=function(e){var a=e.textureCanvas,t=e.canvasObjectPart,n=e.partName,r=e.design,s=e.baseColorCanvasObject,i=a.getContext("2d"),c=r.configData.partsObject[n],l=c.x,o=c.y,u=c.width,v=c.height,d=r.configData.divider;for(var m in i.drawImage(s[n],l/d,o/d,u/d,v/d),t.layers){var g=t.layers[m];i.drawImage(g,l/d,o/d,u/d,v/d)}},je=function(e){var a=e.design,t=e.canvasObject,n=e.baseColorCanvasObject;return new Promise((function(e,r){var s=document.createElement("canvas");s.width=a.configData.canvasSize,s.height=a.configData.canvasSize;var i=s.getContext("2d");!function r(){if("undefined"!==typeof i){for(var c in t){var l=a.configData.partsObject[c],o=l.x,u=l.y,v=l.width,d=l.height,m=a.configData.divider;for(var g in i.drawImage(n[c],o/m,u/m,v/m,d/m),t[c].layers){var p=t[c].layers[g];i.drawImage(p,o/m,u/m,v/m,d/m)}}e(s)}else setTimeout(r,100)}()}))};var xe=function(e){var a=e.userData,t=e.designSpec,s=e.graphicVisualCanvas,i=e.rightInnerOverlayCanvas,c=e.rightOuterOverlayCanvas,l=e.rightTexture,u=e.rightTextureCanvas,v=e.leftInnerOverlayCanvas,d=e.leftOuterOverlayCanvas,m=e.leftTexture,g=e.leftTextureCanvas,p=Object(n.useState)(t),f=Object(o.a)(p,2),h=f[0],b=f[1],y=Object(n.useState)(!1),E=Object(o.a)(y,2),j=E[0],x=E[1],N=Object(n.useState)(null),k=Object(o.a)(N,2),D=k[0],S=k[1],L=Object(n.useState)(null),V=Object(o.a)(L,2),I=V[0],P=V[1],T=Object(n.useState)(0),M=Object(o.a)(T,2),R=M[0],z=M[1],A=Object(n.useState)("right"),B=Object(o.a)(A,2),U=B[0],G=B[1],F=Object(n.useState)(-1),_=Object(o.a)(F,2),W=_[0],Y=_[1],q=Object(n.useState)({right:!0,left:!0}),H=Object(o.a)(q,2),J=H[0],Z=H[1],$=Object(n.useState)("DesignPreview"),ee=Object(o.a)($,2),ae=ee[0],te=ee[1],ne=Object(n.useState)("LayerOverview"),re=Object(o.a)(ne,2),se=re[0],ie=re[1],ce=Object(n.useRef)(),le=Object(n.useRef)(),ue=Object(n.useRef)(),fe=Object(n.useRef)(),be=Object(n.useRef)(),ye=Object(n.useRef)(),Ce=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe({design:a,type:"baseColorCanvasObject",currentShoe:"right"});case 2:return ce.current=e.sent,e.next=5,oe({design:a,type:"baseColorCanvasObject",currentShoe:"left"});case 5:return fe.current=e.sent,e.next=8,je({design:h,canvasObject:le.current,baseColorCanvasObject:ce.current});case 8:return t=e.sent,e.next=11,je({design:h,canvasObject:be.current,baseColorCanvasObject:fe.current});case 11:n=e.sent,u.getContext("2d").drawImage(t,0,0),l.needsUpdate=!0,g.getContext("2d").drawImage(n,0,0),m.needsUpdate=!0;case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){le.current&&be.current||Q({setInitialLoaded:x,design:h,graphicVisualCanvas:s,rightBaseColorCanvasObjectRef:ce,rightInnerOverlayCanvas:i,rightOuterOverlayCanvas:c,rightTexture:l,rightTextureCanvas:u,rightCanvasObjectRef:le,rightOverlaysCanvasObjectRef:ue,leftBaseColorCanvasObjectRef:fe,leftInnerOverlayCanvas:v,leftOuterOverlayCanvas:d,leftTexture:m,leftTextureCanvas:g,leftCanvasObjectRef:be,leftOverlaysCanvasObjectRef:ye})}),[h,s,i,c,l,u,v,d,m,g]),h&&a?r.a.createElement("div",{className:"designer-container"},r.a.createElement(w,{design:h,setView:te,setLayersView:ie,rightTexture:l,leftTexture:m,initialLoaded:j,camera:D,setCamera:S,orbitControls:I,setOrbitControls:P,setCurrentPart:z,setCurrentShoe:G,setCurrentLayer:Y,shoeVisibility:J}),r.a.createElement(K,{design:h,setDesign:b,view:ae,setView:te,currentLayer:W,setCurrentLayer:Y,layersView:se,setLayersView:ie,graphicVisualCanvas:s,handleUpdateGraphicVisualCanvas:function(e){ve("outerOverlay"===e||"innerOverlay"===e?"right"===U?{design:h,graphicVisualCanvas:s,partName:e,canvasObject:ue.current,baseColorCanvasObject:ce.current,currentShoe:U}:{design:h,graphicVisualCanvas:s,partName:e,canvasObject:ye.current,baseColorCanvasObject:fe.current,currentShoe:U}:"right"===U?{design:h,graphicVisualCanvas:s,partName:e,canvasObject:le.current,baseColorCanvasObject:ce.current,currentShoe:U}:{design:h,graphicVisualCanvas:s,partName:e,canvasObject:be.current,baseColorCanvasObject:fe.current,currentShoe:U})},handleChangeManager:function(e){var a=e.partName;"outerOverlay"===a?he({changeObject:e,design:h,setDesign:b,texture:"right"===U?l:m,textureCanvas:"right"===U?u:g,graphicVisualCanvas:s,canvasObject:"right"===U?le.current:be.current,overlayCanvas:"right"===U?c:d,overlayCanvasObject:"right"===U?ue.current:ye.current,baseColorCanvasObject:"right"===U?ce.current:fe.current,currentShoe:U}):"innerOverlay"===a?he({changeObject:e,design:h,setDesign:b,texture:"right"===U?l:m,textureCanvas:"right"===U?u:g,graphicVisualCanvas:s,canvasObject:"right"===U?le.current:be.current,overlayCanvas:"right"===U?i:v,overlayCanvasObject:"right"===U?ue.current:ye.current,baseColorCanvasObject:"right"===U?ce.current:fe.current,currentShoe:U}):function(e){var a=e.changeObject,t=e.design,n=e.setDesign,r=e.texture,s=e.textureCanvas,i=e.graphicVisualCanvas,c=e.canvasObject,l=e.baseColorCanvasObject,o=e.currentShoe,u=a.type,v=a.fileName,d=Object(X.cloneDeep)(t);if("graphic-moved"===u){var m=a.partName,g=a.layerIndex,p=a.direction,f=a.distance,h=d.outlineData.parts[m][o][g];"vert"===p?h.y+=f:"hor"===p?h.x+=f:"scale"===p?h.scale*=f:"rotate"===p?h.rotation+=f:"reset"===p&&(h.y=0,h.x=0,h.scale=1,h.rotation=0),n(d),de({partName:m,layerIndex:g,layerObject:h,canvasObject:c,textureCanvas:s,texture:r,graphicVisualCanvas:i,design:t,baseColorCanvasObject:l,currentShoe:o})}else if("color-changed"===u){var b,y=a.partName,C=a.layerIndex,O=a.newColor;(b="outerOverlay"===y||"innerOverlay"===y?d.outlineData.overlays[y].layers[C]:d.outlineData.parts[y][o][C]).color=O,n(d),de({partName:y,layerIndex:C,layerObject:b,canvasObject:c,textureCanvas:s,texture:r,graphicVisualCanvas:i,design:t,baseColorCanvasObject:l,currentShoe:o})}else if("layer-added"===u){var E=a.partName,j=a.layerType;if("Color"===j)d.outlineData.parts[E][o].push({type:"color",color:"#777777"});else if("Graphic"===j)d.outlineData.parts[E][o].push({type:"graphic",link:v,x:0,y:0,scale:1,rotation:0});else{var x=a.maskLink;d.outlineData.parts[E][o].push({type:"mask",link:x,color:"#000000"})}n(d);var N=d.outlineData.parts[E][o].slice(-1)[0];me({canvasObject:c,graphicVisualCanvas:i,layerObject:N,partName:E,texture:r,textureCanvas:s,design:t,baseColorCanvasObject:l,currentShoe:o})}else if("layer-moved"===u){var w=a.partName,k=a.layerIndex,D=a.direction,S=d.outlineData.parts[w][o],L=S[k];S[k]=S[k+D],S[k+D]=L,d.outlineData.parts[w].layers=S,n(d),pe({canvasObject:c,partName:w,layerIndex:k,direction:D,textureCanvas:s,texture:r,graphicVisualCanvas:i,design:t,baseColorCanvasObject:l,currentShoe:o})}else if("layer-deleted"===u){var V=a.partName,I=a.layerIndex;d.outlineData.parts[V][o].splice(I,1),n(d),ge({canvasObject:c,partName:V,layerIndex:I,textureCanvas:s,texture:r,graphicVisualCanvas:i,design:t,baseColorCanvasObject:l,currentShoe:o})}}({changeObject:e,design:h,setDesign:b,texture:"right"===U?l:m,textureCanvas:"right"===U?u:g,graphicVisualCanvas:s,canvasObject:"right"===U?le.current:be.current,baseColorCanvasObject:"right"===U?ce.current:fe.current,currentShoe:U})},setInitialLoaded:x,camera:D,orbitControls:I,handleUpdateBaseColor:Ce,userData:a,currentPart:R,setCurrentPart:z,currentShoe:U,setCurrentShoe:G,shoeVisibility:J,setShoeVisibility:Z})):r.a.createElement("div",null,"hi")};var Ne=function(){var e=Object(l.g)().id,a=Object(n.useContext)(d.context),t=Object(n.useState)(null),s=Object(o.a)(t,2),i=s[0],c=s[1],u=Object(n.useState)(null),v=Object(o.a)(u,2),m=v[0],g=v[1],p=Object(n.useState)(null),h=Object(o.a)(p,2),b=h[0],y=h[1],E=Object(n.useState)(null),j=Object(o.a)(E,2),x=j[0],N=j[1],w=Object(n.useState)(null),k=Object(o.a)(w,2),D=k[0],S=k[1],L=Object(n.useState)(null),V=Object(o.a)(L,2),I=V[0],P=V[1],T=Object(n.useState)(null),M=Object(o.a)(T,2),R=M[0],z=M[1],A=Object(n.useState)(null),B=Object(o.a)(A,2),U=B[0],G=B[1],F=Object(n.useState)(null),_=Object(o.a)(F,2),W=_[0],Y=_[1],q=Object(n.useState)(null),H=Object(o.a)(q,2),J=H[0],X=H[1],Z=function(){var e=Object(O.a)(C.a.mark((function e(a){var t,n,r,s,i,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(a),g(te({design:a})),e.next=4,ae({design:a});case 4:return t=e.sent,y(t),e.next=8,ae({design:a});case 8:return n=e.sent,N(n),e.next=12,ae({design:a});case 12:return r=e.sent,S(r),e.next=16,ae({design:a});case 16:return s=e.sent,z(s),e.next=20,ae({design:a});case 20:return i=e.sent,G(i),e.next=24,ae({design:a});case 24:l=e.sent,Y(l);case 26:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){e?f("/api/outlines/".concat(e),"GET").then((function(e){return e.json()})).then((function(e){Z(e)})):f("/api/outlines/newdesign","GET").then((function(e){return e.json()})).then((function(e){Z(e)}))}),[e]),Object(n.useEffect)((function(){D&&W&&(P(ee(D)),X(ee(W)))}),[D,W]),a&&i&&m&&b&&x&&D&&I&&R&&U&&W&&J?r.a.createElement("div",{className:"designer-root-container"},r.a.createElement(xe,{userData:a,designSpec:i,graphicVisualCanvas:m,rightInnerOverlayCanvas:b,rightOuterOverlayCanvas:x,rightTexture:I,rightTextureCanvas:D,leftInnerOverlayCanvas:R,leftOuterOverlayCanvas:U,leftTexture:J,leftTextureCanvas:W})):r.a.createElement("div",null)};t(307);var we=function(){return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-google-button"},r.a.createElement("button",{onClick:function(){window.open("http://solecomposer.com/auth/google","_self")}},"Login With Google")),r.a.createElement(c.b,{to:"/"},r.a.createElement("div",{className:"basic-button"},r.a.createElement("button",null,"Back"))))};t(308);var ke=function(){var e=Object(n.useContext)(d.context);return r.a.createElement("div",{className:"profile-container"},r.a.createElement("p",{className:"basic-paragraph"},e.firstName),r.a.createElement("p",{className:"basic-paragraph"},e.email),r.a.createElement("div",{className:"basic-button"},r.a.createElement("button",{onClick:function(){window.open("http://solecomposer.com/auth/logout","_self")}},"Log Out")),r.a.createElement(c.b,{to:"/"},r.a.createElement("div",{className:"basic-button"},r.a.createElement("button",null,"Back"))))};t(309);var De=function(){return r.a.createElement("div",{className:"no-page-container"},r.a.createElement("p",{className:"basic-paragraph"},"404 - PAGE NOT FOUND"),r.a.createElement(c.b,{to:"/"},r.a.createElement("div",{className:"basic-button"},r.a.createElement("button",null,"Home"))))};var Se=function(){return r.a.createElement("div",{className:"app-container"},r.a.createElement(c.a,null,r.a.createElement(d,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:b}),r.a.createElement(l.a,{exact:!0,path:"/login",component:we}),r.a.createElement(l.a,{exact:!0,path:"/profile",component:ke}),r.a.createElement(l.a,{exact:!0,path:"/designer",component:Ne}),r.a.createElement(l.a,{exact:!0,path:"/designer/:id",component:Ne}),r.a.createElement(l.a,{path:"*",component:De})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[107,1,2]]]);
//# sourceMappingURL=main.cad39a97.chunk.js.map