(this["webpackJsonpsole-composer"]=this["webpackJsonpsole-composer"]||[]).push([[0],{187:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){},327:function(e,t,n){},329:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(135),c=n.n(i),s=n(23),o=n(21),l=n(15),u=n(1),d=Object(a.createContext)(null),b=function(e){var t=e.children,n=Object(a.useState)(),r=Object(l.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){fetch("/auth/getsession",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.err||c(e)}))}),[]),Object(u.jsx)(d.Provider,{value:i,children:t})};b.context=d;var p,h,j,f,x,g,v,O,y,m,C,w,k,D=b,S=n(136),N=n.n(S),V=(n(186),n(187),function(e,t){return fetch(e,{method:t})}),L=function(e,t,n){return fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})},I=n(7),P=n(8),E=992,z={tablet:"@media (min-width: ".concat(601,"px)"),desktop:"@media (min-width: ".concat(E,"px)")},M=z.desktop,T=P.a.div(p||(p=Object(I.a)(["\n  font-family: 'Roboto';\n  height: 100%;\n"]))),R=P.a.div(h||(h=Object(I.a)(["\n  z-index: 1;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 46px;\n  color: #f9f9f9;\n  background-color: #000000;\n  /* padding: 10px; */\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n\n  a {\n    color: #ffffff;\n    text-decoration: none;\n    margin: auto 15px;\n  }\n"]))),A=P.a.p(j||(j=Object(I.a)(["\n  margin: auto 15px;\n"]))),G=P.a.div(f||(f=Object(I.a)(["\n  width: 100%;\n  height: 45px;\n  background-color: pink;\n"]))),U=(P.a.div(x||(x=Object(I.a)(["\n  width: 100%;\n  height: 46px;\n"]))),P.a.div(g||(g=Object(I.a)(["\n  width: 100%;\n  max-width: 700px;\n  margin: auto;\n  margin-top: 16px;\n\n  "," {\n    margin-bottom: 0;\n  }\n"])),M)),B=P.a.div(v||(v=Object(I.a)(["\n  margin-bottom: 32px;\n  width: 100%;\n"]))),_=P.a.p(O||(O=Object(I.a)(["\n  font-family: 'Poppins', 'Roboto', 'Ariel';\n  margin: 0px;\n  margin-left: 16px;\n  margin-bottom: 8px;\n  font-size: 24px;\n  font-weight: bold;\n"]))),F=P.a.div(y||(y=Object(I.a)(["\n  margin-bottom: 60px;\n  text-align: center;\n"]))),Y="#000000",W=("0.1rem solid ".concat("#000000"),P.a.button(m||(m=Object(I.a)(["\n  box-shadow: none;\n  margin: 0;\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-radius: 5px;\n  width: 100%;\n\n  &:active {\n    box-shadow: none;\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),"#ffffff",Y)),X=Object(P.a)(W)(C||(C=Object(I.a)(["\n  height: 40px;\n  background-color: ",";\n  padding: 8px;\n  font-size: 16px;\n  text-transform: capitalize;\n  margin-top: 15px;\n"])),(function(e){return e.google?"#4285f4":Y})),H=Object(P.a)(W)(w||(w=Object(I.a)(["\n  height: 40px;\n  padding: 8px;\n  font-size: 16px;\n  text-transform: capitalize;\n  padding-left: 23px;\n  padding-right: 23px;\n  width: unset;\n"]))),J=Object(P.a)(W)(k||(k=Object(I.a)(["\n  width: calc(100% - 32px);\n  background-color: #000000;\n  height: 50px;\n  font-size: 16px;\n  margin-bottom: 40px;\n  padding: 0;\n  margin-left: 16px;\n  margin-right: 16px;\n"])));var q,Z=function(){var e=Object(o.f)();return Object(u.jsx)(J,{onClick:function(){e.push("/designer")},children:"N E W \xa0 D E S I G N"})},$=P.a.button(q||(q=Object(I.a)(["\n  border: none;\n  color: #ffffff;\n  border-radius: 5px;\n  background-color: #000000;\n  height: 44px;\n  font-size: 16px;\n  width: unset;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 25px;\n  padding-right: 25px;\n"])));var K,Q,ee,te,ne,ae=function(){var e=Object(o.f)();return Object(u.jsx)($,{onClick:function(){e.push("/designer")},children:"S T A R T \xa0 D E S I G N I N G"})},re=P.a.div(K||(K=Object(I.a)(["\n  margin-left: 8px;\n  margin-right: 8px;\n  margin-top: 0px;\n  flex: 0 0 auto;\n"]))),ie=P.a.div(Q||(Q=Object(I.a)(["\n  width: 100%;\n  background-color: #f0f0f0;\n  border-radius: 8px;\n\n  img {\n    width: 100%;\n  }\n"]))),ce=P.a.p(ee||(ee=Object(I.a)(["\n  color: #000000;\n  font-size: 22px;\n  margin-top: 9px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"]))),se=P.a.p(te||(te=Object(I.a)(["\n  color: #000000;\n  font-size: 14px;\n  margin-top: 6px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"]))),oe=P.a.p(ne||(ne=Object(I.a)(["\n  color: #777;\n  font-size: 14px;\n  margin-top: 6px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n"])));var le,ue,de,be,pe,he,je=function(e){var t=e.props,n=t._id,a=t.title,r=t.configId,i=t.author,c=t.screenshot,s=Object(o.f)();return Object(u.jsxs)(re,{onClick:function(){s.push("/designer/".concat(n))},children:[Object(u.jsx)(ie,{children:Object(u.jsx)("img",{src:"api/assets/images/".concat(c),alt:"feature-design"})}),Object(u.jsx)(ce,{children:a}),Object(u.jsx)(se,{children:r.modelName}),Object(u.jsx)(oe,{children:i.firstName})]})},fe=z.desktop,xe=P.a.div(le||(le=Object(I.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  height: unset;\n  margin-bottom: 35px;\n\n  "," {\n    height: 65vh;\n    margin-top: 12vh;\n    flex-direction: unset;\n    max-width: 1100px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n"])),fe),ge=P.a.div(ue||(ue=Object(I.a)(["\n  margin-top: 0px;\n  margin-bottom: 30px;\n  padding-right: 0px;\n  text-align: center;\n  margin-left: 5%;\n  margin-right: 5%;\n  width: 90%;\n  height: 100%;\n\n  "," {\n    margin-top: unset;\n    margin-bottom: unset;\n    padding-right: unset;\n    text-align: unset;\n    width: 100%;\n  }\n"])),fe),ve=P.a.p(de||(de=Object(I.a)(["\n  font-size: 30px;\n  margin-top: 30px;\n  font-weight: bold;\n  margin: 0;\n  margin-bottom: 25px;\n\n  "," {\n    font-size: 40px;\n    margin-top: 70px;\n  }\n"])),fe),Oe=P.a.p(be||(be=Object(I.a)(["\n  font-size: 17px;\n  line-height: 150%;\n  margin: 0;\n  margin-bottom: 30px;\n"]))),ye=P.a.div(pe||(pe=Object(I.a)(["\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-top: 70px;\n  margin-bottom: 60px;\n  padding-left: 1px;\n  height: 100%;\n\n  "," {\n    width: 100%;\n    margin: unset;\n    margin-right: 5%;\n  }\n"])),fe),me=P.a.img(he||(he=Object(I.a)(["\n  max-width: 100%;\n  max-height: 100%;\n"])));var Ce,we,ke,De=function(){return Object(u.jsxs)(xe,{children:[Object(u.jsxs)(ge,{children:[Object(u.jsx)(ve,{children:"Create Something New"}),Object(u.jsx)(Oe,{children:"Sole Composer gives you the ability to design and visualize one\u2011of\u2011a\u2011kind sneakers."}),Object(u.jsx)(ae,{})]}),Object(u.jsx)(ye,{children:Object(u.jsx)(me,{src:"/sole-cover.png"})})]})},Se=z.desktop,Ne=P.a.div(Ce||(Ce=Object(I.a)(["\n  width: 100%;\n  margin-bottom: 16px;\n"]))),Ve=P.a.div(we||(we=Object(I.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 3px;\n  margin: 3px;\n\n  "," {\n    grid-template-columns: 1fr 1fr 1fr;\n    margin: 16px;\n  }\n"])),Se),Le=P.a.div(ke||(ke=Object(I.a)(["\n  width: 100%;\n  background-color: #f0f0f0;\n\n  img {\n    width: 100%;\n  }\n"])));var Ie=function(e){var t=e.myDesigns;return Object(u.jsx)(Ne,{children:Object(u.jsx)(Ve,{children:t.map((function(e,t){return Object(u.jsx)(s.b,{to:"/designer/".concat(e._id),className:"link-to-designer",children:Object(u.jsx)(Le,{children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.screenshot),alt:"my-design-preview"})})},t)}))})})};var Pe,Ee,ze,Me,Te,Re,Ae,Ge,Ue,Be,_e,Fe,Ye=function(){var e=Object(a.useContext)(D.context),t=Object(a.useState)(),n=Object(l.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(),o=Object(l.a)(c,2),d=o[0],b=o[1];Object(a.useEffect)((function(){V("/api/featured","GET").then((function(e){return e.json()})).then((function(e){return i(e)})),e&&V("/api/outlines/mydesigns","GET").then((function(e){return e.json()})).then((function(e){return b(e)}))}),[e]);var p=r?r.featured.map((function(t,n){return Object(u.jsx)(je,{props:t,userData:e},n)})):null;return Object(u.jsxs)(T,{children:[Object(u.jsxs)(R,{children:[Object(u.jsxs)(A,{children:[Object(u.jsx)("strong",{children:"Sole"})," Composer"]}),e?Object(u.jsx)(s.b,{to:"/profile",children:e.firstName}):Object(u.jsx)(s.b,{to:"/login",children:"Login"})]}),Object(u.jsx)(G,{}),!e&&Object(u.jsx)(De,{}),Object(u.jsxs)(U,{children:[r&&Object(u.jsxs)(B,{children:[Object(u.jsx)(_,{children:"FEATURED"}),Object(u.jsx)(N.a,{responsive:{0:{items:1.7},700:{items:3}},items:p})]}),e&&Object(u.jsx)(Z,{}),!e&&Object(u.jsx)(F,{children:Object(u.jsx)(s.b,{to:"/login",children:Object(u.jsx)(H,{children:"sign up"})})}),d&&Object(u.jsx)(_,{children:"MY DESIGNS"}),d&&Object(u.jsx)(Ie,{myDesigns:d})]})]})},We=n(16),Xe=n.n(We),He=n(19),Je=n(27),qe=n(332),Ze=n(333),$e=n(3),Ke=P.a.div(Pe||(Pe=Object(I.a)(["\n  background-color: #212121;\n  border-radius: 9px;\n"]))),Qe=P.a.p(Ee||(Ee=Object(I.a)(["\n  font-size: 18px;\n  margin: 10px 14px;\n  color: #ffffff;\n"]))),et=P.a.div(ze||(ze=Object(I.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 6px;\n  row-gap: 6px;\n  margin: 6px;\n"]))),tt=P.a.div(Me||(Me=Object(I.a)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  row-gap: 6px;\n  margin: 6px;\n"]))),nt=P.a.div(Te||(Te=Object(I.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 6px;\n"]))),at=P.a.div(Re||(Re=Object(I.a)(["\n  height: 46px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),rt=P.a.div(Ae||(Ae=Object(I.a)(["\n  width: 100%;\n  min-width: 0;\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),it=P.a.button(Ge||(Ge=Object(I.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 3px;\n  width: 100%;\n  height: 38px;\n  background-color: #212121;\n  color: ",";\n  padding: 0px;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#ffffff":"#bbbbbb"})),ct=P.a.div(Ue||(Ue=Object(I.a)(["\n  box-sizing: border-box;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n  margin-left: 6px;\n"]))),st=P.a.button(Be||(Be=Object(I.a)(["\n  box-sizing: border-box;\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 3px;\n  width: 38px;\n  height: 38px;\n  background-color: ",";\n  padding: 0px;\n  font-size: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  svg {\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#343434":"#000000"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#ffffff":"#343434"})),ot=P.a.div(_e||(_e=Object(I.a)(["\n  background-color: #ffffff;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n"]))),lt=P.a.div(Fe||(Fe=Object(I.a)(["\n  position: relative;\n  left: 50%;\n  top: 50%;\n  width: 150px;\n  height: 150px;\n  margin: -75px 0 0 -75px;\n  border: 16px solid #e9e9e9;\n  border-top: 16px solid #333;\n  border-radius: 50%;\n  animation: spin 2s linear infinite;\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"])));var ut,dt,bt=function(){return Object(u.jsx)(ot,{children:Object(u.jsx)(lt,{})})},pt=n(147),ht=P.a.div(ut||(ut=Object(I.a)(["\n  width: 100%;\n  min-width: 0;\n  display: flex;\n  flex: 0 1 auto;\n  overflow: auto;\n  border-radius: 4px;\n  -webkit-overflow-scrolling: touch;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),jt=P.a.button(dt||(dt=Object(I.a)(["\n  width: 38px;\n  height: 38px;\n  margin-right: 3px;\n  border-radius: 4px;\n  flex: 0 0 auto;\n  background-color: ",";\n  border: none;\n\n  &:last-child {\n    margin-right: 0px;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.color}));var ft,xt,gt,vt,Ot,yt,mt,Ct,wt=function(e){var t=e.colorsArray,n=e.handleColorChange;return Object(u.jsx)(rt,{children:Object(u.jsx)(ht,{children:t.map((function(e,t){return Object(u.jsx)(jt,{color:e,onClick:function(){return n(e)}},t)}))})})},kt=n(77),Dt=P.a.div(ft||(ft=Object(I.a)([""]))),St=P.a.div(xt||(xt=Object(I.a)(["\n  height: 20px;\n  position: relative;\n  overflow: hidden;\n  border: 1px solid #343434;\n  border-radius: 4px;\n"]))),Nt=P.a.div(gt||(gt=Object(I.a)(["\n  width: 100%;\n  height: 120px;\n  position: relative;\n  overflow: hidden;\n  border: 1px solid #343434;\n  border-radius: 4px;\n"]))),Vt=P.a.div(vt||(vt=Object(I.a)(["\n  border-radius: 4px;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  min-width: 0;\n\n  input {\n    width: 100%;\n    height: 38px;\n    margin-right: 3px;\n    border: 1px solid #ffffff;\n    border-radius: 4px;\n    font-size: 14px;\n    padding-left: 8px;\n    padding-right: 0px;\n    box-shadow: none;\n    -webkit-appearance: none;\n    -webkit-border-radius: 4px;\n  }\n"]))),Lt=P.a.div(Ot||(Ot=Object(I.a)(["\n  flex: 0 0 auto;\n  width: 38px;\n  height: 38px;\n  margin-left: 3px;\n  border-radius: 4px;\n  background-color: ",";\n"])),(function(e){return e.color})),It=P.a.div(yt||(yt=Object(I.a)(["\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: #ffffff solid 2px;\n  transform: translate(-9px, -9px);\n"]))),Pt=P.a.div(mt||(mt=Object(I.a)(["\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: #ffffff solid 2px;\n  transform: translate(-9px, 0px);\n"]))),Et=Object(pt.a)((function(e){var t=e.hex,n=e.hsl,a=e.hsv,r=e.onChange,i=e.handleColorChange,c=e.colorsArray;return Object(u.jsxs)(Dt,{children:[Object(u.jsxs)(tt,{children:[Object(u.jsx)(rt,{children:Object(u.jsx)(St,{children:Object(u.jsx)(kt.Hue,{hsl:n,onChange:r,pointer:Pt})})}),Object(u.jsx)(rt,{children:Object(u.jsx)(Nt,{children:Object(u.jsx)(kt.Saturation,{hsl:n,hsv:a,onChange:r,pointer:It})})}),Object(u.jsx)(wt,{colorsArray:c,handleColorChange:i})]}),Object(u.jsxs)(et,{children:[Object(u.jsx)(rt,{children:Object(u.jsx)(it,{active:!0,onClick:function(){return i("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random"})}),Object(u.jsx)(rt,{children:Object(u.jsxs)(Vt,{children:[Object(u.jsx)(kt.EditableInput,{className:"editable-input",value:t,onChange:r}),Object(u.jsx)(Lt,{color:t})]})})]})]})})),zt=z.desktop,Mt=P.a.div(Ct||(Ct=Object(I.a)(["\n  width: 100vw;\n  height: 100vw;\n  color: #000;\n  flex: 0 0 auto;\n  overflow: hidden;\n\n  "," {\n    height: 100vh;\n    width: 100vh;\n    margin-left: 160px;\n  }\n"])),zt);function Tt(e){var t,n,r=e.design,i=e.texture,c=e.right,s=e.setCurrentPart,o=e.setCurrentShoe,l=e.alone,d=e.setLayersView,b=e.setCurrentLayer,p=e.setView,h=e.redMapCanvas,j=Object(a.useRef)(),f=Object(qe.a)("/api/assets/models/".concat(r.configData.source.model)).nodes,x=Object(Je.c)($e.TextureLoader,"/api/assets/designimages/".concat(r.configData.source[c?"aoMapRight":"aoMapLeft"]));x.flipY=!1;var g=function(e){if(e.delta<10){var t=Math.floor(1e3*e.uv.x),n=Math.floor(1e3*e.uv.y),a=function(e){switch(e){case 255:return 4;case 220:return 2;case 210:return 0;case 200:return 5;case 190:return 3;case 180:return 1;case 170:return 16;case 160:return 15;case 150:return 14;case 140:return 9;case 130:return 13;case 120:return 11;case 110:return 12;case 100:return 8;case 90:return 10;case 80:return 7;case 70:return 6;case 60:return 17}}(h.getContext("2d").getImageData(t,n,1,1).data[0]);(a||0===a)&&(d("LayersMain"),b(-1),p("Layers"),s(a),o(c?"right":"left"))}};return Object(u.jsx)("group",{ref:j,dispose:null,onPointerDown:function(e){return function(e){e.stopPropagation(),t=e.clientX,n=e.clientY}(e)},onPointerUp:function(e){return function(e){e.stopPropagation(),e.clientX>t-5&&e.clientX<t+5&&e.clientY>n-5&&e.clientY<n+5&&g(e)}(e)},children:Object(u.jsx)("mesh",{geometry:f.af1.geometry,rotation:[Math.PI/2,0,Math.PI/2],position:[0,-1,l?0:c?1.3:-1.3],scale:[c?.35:-.35,.35,.35],children:Object(u.jsx)("meshStandardMaterial",{aoMap:x,map:i})})})}var Rt,At,Gt,Ut,Bt,_t=function(e){var t=e.design,n=e.rightTexture,r=e.leftTexture,i=e.texturesLoaded,c=e.setCurrentPart,s=e.setCurrentShoe,o=e.shoeVisibility,l=e.setLayersView,d=e.setCurrentLayer,b=e.setView,p=e.redMapCanvas,h=e.cameraReset,j=e.setCameraReset;function f(e){e.reset&&(Object(Je.d)().camera.position.set(5.5,1.5,5.5),j(!1));return null}return Object(u.jsxs)(Mt,{id:"scene-container-id",children:[Object(u.jsxs)(Je.a,{camera:{fov:45},linear:!0,dpr:3,gl:{preserveDrawingBuffer:!0},children:[Object(u.jsx)(f,{reset:h}),Object(u.jsx)("ambientLight",{}),Object(u.jsxs)(a.Suspense,{fallback:null,children:[o.right&&Object(u.jsx)(Tt,{right:!0,design:t,texture:n,setCurrentPart:c,setCurrentShoe:s,alone:!o.left,setLayersView:l,setCurrentLayer:d,setView:b,redMapCanvas:p}),o.left&&Object(u.jsx)(Tt,{design:t,texture:r,setCurrentPart:c,setCurrentShoe:s,alone:!o.right,setLayersView:l,setCurrentLayer:d,setView:b,redMapCanvas:p})]}),Object(u.jsx)(Ze.a,{minPolarAngle:Math.PI/4,maxPolarAngle:3*Math.PI/4,minDistance:4,maxDistance:12,enablePan:!1,enableDamping:!0})]}),!i&&Object(u.jsx)(bt,{})]})},Ft=z.desktop,Yt=P.a.div(Rt||(Rt=Object(I.a)(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  touch-action: none;\n  display: flex;\n  padding-bottom: 30px;\n\n  "," {\n    right: 0;\n    width: 375px;\n  }\n"])),Ft),Wt=P.a.div(At||(At=Object(I.a)(["\n  width: 0px;\n  flex: 1 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  margin-left: 16px;\n"]))),Xt=P.a.div(Gt||(Gt=Object(I.a)(["\n  width: 70px;\n  flex: 0 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n"]))),Ht=n(18),Jt=P.a.div(Ut||(Ut=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 280px;\n  justify-content: space-between;\n"]))),qt=P.a.div(Bt||(Bt=Object(I.a)(["\n  width: 40px;\n  height: 40px;\n  margin: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  background-color: ",";\n  border-radius: 6px;\n\n  svg {\n    font-size: 22px;\n    color: ",";\n  }\n"])),(function(e){return e.selected?"#212121":"unset"}),(function(e){return e.selected?"#ffffff":"#212121"}));var Zt,$t,Kt,Qt=function(e){var t=e.handleViewChange,n=e.view,a=function(e){t(n===e?"DesignInfo":e)};return Object(u.jsxs)(Jt,{children:[Object(u.jsx)(qt,{selected:"Layers"===n,onClick:function(){return a("Layers")},children:Object(u.jsx)(Ht.n,{})}),Object(u.jsx)(qt,{selected:"ChangeBaseColor"===n,onClick:function(){return a("ChangeBaseColor")},children:Object(u.jsx)(Ht.o,{})}),Object(u.jsx)(qt,{selected:"DesignVisibility"===n,onClick:function(){return a("DesignVisibility")},children:Object(u.jsx)(Ht.m,{})}),Object(u.jsx)(qt,{selected:"DesignMenu"===n||"ChangeDesignName"===n,onClick:function(){return a("DesignMenu")},children:Object(u.jsx)(Ht.f,{})})]})},en=P.a.div(Zt||(Zt=Object(I.a)(["\n  padding-bottom: 10px;\n  padding-left: 20px;\n"]))),tn=P.a.p($t||($t=Object(I.a)(["\n  margin: 5px;\n  font-size: 26px;\n  color: #212121;\n"]))),nn=P.a.p(Kt||(Kt=Object(I.a)(["\n  margin: 5px;\n  font-size: 16px;\n  color: #212121;\n"])));var an=function(e){var t=e.design;return Object(u.jsxs)(en,{children:[Object(u.jsx)(tn,{children:t.title}),Object(u.jsx)(nn,{children:t.modelName})]})},rn=function(e,t){var n=new FormData;return t?n.append("image",e,"newImage"):n.append("image",e),fetch("/api/assets/uploadimage",{method:"POST",body:n}).then((function(e){return e.json()}))},cn=function(e){return new Promise((function(t){setTimeout((function(){var n=document.getElementById("scene-container-id").firstElementChild.firstElementChild,a=document.createElement("canvas");a.width=1024,a.height=1024,a.getContext("2d").drawImage(n,0,0,1024,1024);for(var r=a.toDataURL("image/png"),i=atob(r.split(",")[1]),c=[],s=0;s<i.length;s++)c.push(i.charCodeAt(s));var o=new Blob([new Uint8Array(c)],{type:"image/png"});o.name="theBlob",o.lastModifiedDate=new Date;var l=new File([o],e,{type:"image/png"});t(l)}),500)}))},sn=function(e){var t=e.split("/");return t=t[t.length-1]};var on,ln,un,dn=function(e){var t,n=e.handleViewChange,r=e.design,i=e.canSave,c=e.setCanSave,o=e.userData,d=e.setCameraReset,b=Object(a.useState)(!1),p=Object(l.a)(b,2),h=p[0],j=p[1];"object"===typeof o&&"_id"in o&&(t=o._id);var f=function(){var e=Object(He.a)(Xe.a.mark((function e(){var t,n,a;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=26;break}if(c(!1),r.author){e.next=11;break}return j(!0),d(!0),e.next=7,cn("newImage");case 7:t=e.sent,rn(t,!0).then((function(e){var t=sn(e.image),n={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};L("/api/outlines","POST",n).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))})),e.next=26;break;case 11:if(r.author!==o._id){e.next=20;break}return j(!0),d(!0),e.next=16,cn(r.screenshot);case 16:n=e.sent,rn(n,!1).then((function(e){var t=sn(e.image),n={author:r.author,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};L("/api/outlines/".concat(r._id),"PUT",n),j(!1)})),e.next=26;break;case 20:return j(!0),d(!0),e.next=24,cn(r.screenshot);case 24:a=e.sent,rn(a,!0).then((function(e){var t=sn(e.image),n={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};L("/api/outlines/","POST",n).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))}));case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h?Object(u.jsx)(Ke,{children:Object(u.jsx)(bt,{})}):Object(u.jsxs)(Ke,{children:[Object(u.jsxs)(nt,{children:[Object(u.jsx)(at,{children:Object(u.jsx)(Qe,{children:r.title})}),Object(u.jsx)(ct,{children:Object(u.jsx)(st,{active:!0,onClick:function(){return n("ChangeDesignName")},children:Object(u.jsx)(Ht.p,{})})})]}),Object(u.jsxs)(et,{children:[Object(u.jsx)(rt,{onClick:function(){return d(!0)},children:Object(u.jsx)(it,{active:!0,children:"Reset Camera"})}),i&&o?Object(u.jsx)(rt,{onClick:function(){f()},children:Object(u.jsx)(it,{active:!0,children:"Save"})}):Object(u.jsx)(rt,{children:Object(u.jsx)(it,{children:"Save"})}),o&&r.author===t?Object(u.jsx)(rt,{onClick:function(){o&&o._id===r.author&&(fetch("/api/outlines/".concat(r._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}),window.location.href="/")},children:Object(u.jsx)(it,{active:!0,children:"Delete"})}):Object(u.jsx)(rt,{children:Object(u.jsx)(it,{children:"Delete"})}),Object(u.jsx)(rt,{children:Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(it,{active:!0,children:"Exit"})})})]})]})},bn=P.a.div(on||(on=Object(I.a)(["\n  width: 50%;\n  margin-left: auto;\n  background-color: #212121;\n  border-radius: 9px;\n"]))),pn=n(13),hn=P.a.div(ln||(ln=Object(I.a)(["\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),jn=P.a.button(un||(un=Object(I.a)(["\n  border: ",";\n  border-radius: 4px;\n  width: 100%;\n  height: 38px;\n  background-color: ",";\n  color: ",";\n  padding: 0px;\n  width: 100%;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"1px solid #343434":"unset"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#ffffff":"#999999"}));var fn=function(e){var t=e.setCurrentShoe,n=e.visibility,a=e.setVisibility,r=function(e){if("left"===e)if(n.left&&n.right){var r=Object(pn.a)({},n);r.left=!1,a(r),t("right")}else if(n.left&&!n.right){var i=Object(pn.a)({},n);i.left=!1,i.right=!0,a(i),t("right")}else{var c=Object(pn.a)({},n);c.left=!0,a(c),t("left")}else if(n.left&&n.right){var s=Object(pn.a)({},n);s.right=!1,a(s),t("left")}else if(!n.left&&n.right){var o=Object(pn.a)({},n);o.right=!1,o.left=!0,a(o),t("left")}else{var l=Object(pn.a)({},n);l.right=!0,a(l),t("right")}};return Object(u.jsxs)(tt,{children:[Object(u.jsx)(hn,{children:Object(u.jsx)(jn,{active:n.left,onClick:function(){r("left")},children:"Left"})}),Object(u.jsx)(hn,{children:Object(u.jsx)(jn,{active:n.right,onClick:function(){r("right")},children:"Right"})})]})};var xn,gn,vn=function(e){var t=e.currentShoe,n=e.setCurrentShoe,a=e.shoeVisibility,r=e.setShoeVisibility;return Object(u.jsx)(bn,{children:Object(u.jsx)(Ke,{children:Object(u.jsx)(fn,{currentShoe:t,setCurrentShoe:n,visibility:a,setVisibility:r})})})},On=n(35),yn=P.a.div(xn||(xn=Object(I.a)(["\n  box-sizing: border-box;\n  background-color: #000000;\n  border-radius: 6px;\n  border: 1px solid #343434;\n  display: flex;\n  flex-direction: row;\n  padding: 3px;\n"]))),mn=P.a.button(gn||(gn=Object(I.a)(["\n  box-sizing: border-box;\n  font-size: 16px;\n  color: ",";\n  background-color: ",";\n  border: 1px solid;\n  border-radius: 3px;\n  border-color: ",";\n  width: 100%;\n  height: 38px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){return e.active?"#ffffff":"#999999"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#343434":"#000000"}));var Cn,wn,kn,Dn=function(e){var t=e.design,n=e.setDesign,r=e.setCanSave,i=e.handleUpdateBaseColor,c=e.currentShoe,s=e.setCurrentShoe,o=Object(a.useState)([]),d=Object(l.a)(o,2),b=d[0],p=d[1];Object(a.useEffect)((function(){p(function(){var e=[];for(var n in t.outlineData.parts){for(var a in t.outlineData.parts[n].right){var r=t.outlineData.parts[n].right[a].type;if("color"===r||"mask"===r){var i=t.outlineData.parts[n].right[a].color;e.includes(i)||e.push(i)}}for(var c in t.outlineData.parts[n].left){var s=t.outlineData.parts[n].left[c].type;if("color"===s||"mask"===s){var o=t.outlineData.parts[n].left[c].color;e.includes(o)||e.push(o)}}}for(var l in t.outlineData.overlays){for(var u in t.outlineData.overlays[l].right)if("color"===t.outlineData.overlays[l].right[u].type){var d=t.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var b in t.outlineData.overlays[l].left)if("color"===t.outlineData.overlays[l].left[b].type){var p=t.outlineData.overlays[l].left[b].color;e.includes(p)||e.push(p)}}var h=t.outlineData.baseColors.right;e.includes(h)||e.push(h);var j=t.outlineData.baseColors.left;return e.includes(j)||e.push(j),e}())}),[t,p]);var h=Object(a.useState)(t.outlineData.baseColors.left===t.outlineData.baseColors.right?"both":c),j=Object(l.a)(h,2),f=j[0],x=j[1],g=Object(a.useState)(t.outlineData.baseColors[c]),v=Object(l.a)(g,2),O=v[0],y=v[1],m=function(e){var t=e.hex||e;y(t)},C=function(e){x(e),"right"!==e&&"left"!==e||(s(e),y(t.outlineData.baseColors[e]))};return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(tt,{children:Object(u.jsxs)(yn,{children:[Object(u.jsx)(mn,{active:"left"===f,onClick:function(){C("left")},children:"Left"}),Object(u.jsx)(mn,{active:"both"===f,onClick:function(){C("both")},children:"Both"}),Object(u.jsx)(mn,{active:"right"===f,onClick:function(){C("right")},children:"Right"})]})}),Object(u.jsx)(Et,{colorsArray:b,color:O,onChangeComplete:m,handleColorChange:m}),Object(u.jsxs)(nt,{children:[Object(u.jsx)(at,{children:Object(u.jsx)(Qe,{children:"Base Color"})}),Object(u.jsx)(ct,{children:Object(u.jsx)(st,{active:!0,onClick:function(){return function(){var e=Object(On.cloneDeep)(t);"left"===f?e.outlineData.baseColors.left=O:"right"===f?e.outlineData.baseColors.right=O:"both"===f&&(e.outlineData.baseColors.left=O,e.outlineData.baseColors.right=O),r(!0),n(e),i(e)}()},children:Object(u.jsx)(Ht.g,{})})})]})]})},Sn=function(e){var t=e.split(/(?=[A-Z])/).join(" ");return t.charAt(0).toUpperCase()+t.substr(1)},Nn=P.a.div(Cn||(Cn=Object(I.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n"]))),Vn=P.a.button(wn||(wn=Object(I.a)(["\n  margin: auto;\n  padding: 12px;\n  border: none;\n  background-color: transparent;\n  color: #ffffff;\n  font-size: 18px;\n\n  &:focus {\n    outline: none;\n  }\n"]))),Ln=P.a.button(kn||(kn=Object(I.a)(["\n  font-weight: bold;\n  color: #ffffff;\n  background-color: transparent;\n  border: none;\n  font-size: 1rem;\n  padding-left: 15px;\n  padding-right: 15px;\n\n  &:focus {\n    outline: none;\n  }\n"])));var In,Pn,En,zn,Mn,Tn,Rn,An,Gn,Un,Bn,_n,Fn=function(e){var t=e.design,n=e.currentPart,a=e.setCurrentPart,r=e.setCurrentLayer,i=e.setLayersView,c=t.configData.partsArray.length,s=t.configData.partsArray,o=function(e){a(0===n&&e<0?c-1:n===c-1&&e>0?0:n+e)};return Object(u.jsxs)(Nn,{children:[Object(u.jsx)(Ln,{onClick:function(){o(-1),r(-1)},children:Object(u.jsx)(Ht.i,{})}),Object(u.jsx)(Vn,{className:"partname-button",onClick:function(){i("PartList")},children:Sn(s[n])}),Object(u.jsx)(Ln,{onClick:function(){o(1),r(-1)},children:Object(u.jsx)(Ht.j,{})})]})},Yn=P.a.div(In||(In=Object(I.a)([""]))),Wn=P.a.div(Pn||(Pn=Object(I.a)(["\n  height: 5px;\n  background-color: #000000;\n  border-top: 1px solid #343434;\n  border-bottom: 1px solid #343434;\n  border-right: none;\n  border-left: none;\n"]))),Xn=P.a.div(En||(En=Object(I.a)(["\n  margin: 6px;\n  display: flex;\n  justify-content: space-between;\n"]))),Hn=P.a.div(zn||(zn=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),Jn=P.a.p(Mn||(Mn=Object(I.a)(["\n  font-size: 16px;\n  color: #ffffff;\n  margin: 0px;\n  padding-left: 6px;\n"]))),qn=P.a.div(Tn||(Tn=Object(I.a)(["\n  display: flex;\n\n  svg {\n    color: #ffffff;\n  }\n"]))),Zn=P.a.div(Rn||(Rn=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 140px;\n  margin: 6px;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n  padding: 3px;\n"]))),$n=P.a.div(An||(An=Object(I.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  overflow: auto;\n  border-radius: 4px;\n"]))),Kn=P.a.div(Gn||(Gn=Object(I.a)(["\n  height: 40px;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 3px;\n  font-size: 16px;\n  text-transform: capitalize;\n  overflow: hidden;\n\n  &:first-of-type {\n    margin-bottom: 0;\n  }\n"]))),Qn=P.a.div(Un||(Un=Object(I.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  background-color: ",";\n  color: ",";\n  justify-content: center;\n  border: ",";\n  border-radius: 4px;\n"])),(function(e){return e.active?"#EEEEEE":"#212121"}),(function(e){return e.active?"#000000":"#EEEEEE"}),(function(e){return e.active?"1px solid #EEEEEE":"1px solid #343434"})),ea=P.a.p(Bn||(Bn=Object(I.a)(["\n  margin: 0px;\n  padding-left: 10px;\n"]))),ta=P.a.div(_n||(_n=Object(I.a)(["\n  width: 40px;\n  margin-right: 3px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 4px;\n  background-color: #212121;\n"])));var na,aa,ra,ia,ca=function(e){var t,n=e.props,a=n.allLayers,r=n.currentPart,i=n.design,c=n.currentLayer,s=n.numberOfLayers,o=n.setCurrentLayer,l=n.setCurrentPart,d=n.setLayersView,b=n.handleDeleteLayer,p=n.handleEditLayer,h=n.handleMoveLayer,j=function(e,t){-1!==e&&(-1===t?0!==e&&h(e,t):e!==s-1&&h(e,t))};return Object(u.jsxs)(Yn,{children:[Object(u.jsx)(Fn,{design:i,currentPart:r,setCurrentPart:l,setCurrentLayer:o,setLayersView:d}),Object(u.jsx)(Wn,{}),Object(u.jsxs)(Xn,{children:[Object(u.jsx)(Hn,{children:Object(u.jsx)(Jn,{children:"Layers"})}),Object(u.jsxs)(qn,{children:[Object(u.jsx)(ct,{children:Object(u.jsx)(st,{active:-1!==c&&"overlay"!==(null===a||void 0===a||null===(t=a[c])||void 0===t?void 0:t.type),onClick:function(){var e;-1!==(e=c)&&"overlay"!==a[e].type&&b(e)},children:Object(u.jsx)(Ht.s,{})})}),Object(u.jsx)(ct,{children:Object(u.jsx)(st,{active:-1!==c&&s-1!==c,onClick:function(){return j(c,1)},children:Object(u.jsx)(Ht.k,{})})}),Object(u.jsx)(ct,{children:Object(u.jsx)(st,{active:-1!==c&&0!==c,onClick:function(){return j(c,-1)},children:Object(u.jsx)(Ht.h,{})})}),Object(u.jsx)(ct,{children:Object(u.jsx)(st,{active:!0,onClick:function(){return d("AddLayerType")},children:Object(u.jsx)(Ht.q,{})})})]})]}),Object(u.jsx)(Zn,{id:"layers-box",onClick:function(e){return function(e){e.preventDefault(),"layers-box"===e.target.id&&o(-1)}(e)},children:Object(u.jsx)($n,{children:a.map((function(e,t){return Object(u.jsxs)(Kn,{onClick:function(){t===c?p(t,e):o(t)},children:["color"===e.type?Object(u.jsx)(ta,{style:{backgroundColor:e.color}}):"graphic"===e.type?Object(u.jsx)(ta,{children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):"mask"===e.type?Object(u.jsx)(ta,{children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):Object(u.jsx)(ta,{children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.source,"Mask.png"),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}),Object(u.jsx)(Qn,{active:t===c,children:Object(u.jsx)(ea,{children:"overlay"===e.type?Sn(e.source).toLowerCase():e.type})})]},t)}))})})]})},sa=P.a.div(na||(na=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 220px;\n  margin: 6px;\n  border: 1px solid #343434;\n  border-radius: 6px;\n  background-color: #000000;\n"]))),oa=P.a.div(aa||(aa=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]))),la=P.a.div(ra||(ra=Object(I.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 6px;\n  row-gap: 6px;\n"]))),ua=P.a.button(ia||(ia=Object(I.a)(["\n  box-sizing: border-box;\n  color: ",";\n  background-color: ",";\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 4px;\n  margin: 3px;\n  height: 40px;\n  font-size: 16px;\n  text-transform: capitalize;\n  overflow: hidden;\n"])),(function(e){return e.active?"#ffffff":"#999999"}),(function(e){return e.active?"#212121":"#000000"}),(function(e){return e.active?"#343434":"#000000"}));var da=function(e){var t=e.props,n=t.design,a=t.setCurrentPart,r=t.setLayersView,i=t.setCurrentLayer,c=t.currentPartName;return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(Qe,{children:"Select Part"}),Object(u.jsx)(sa,{children:Object(u.jsx)(oa,{children:Object(u.jsx)(la,{children:n.configData.partsArray.map((function(e,t){return Object(u.jsx)(ua,{active:c===e,onClick:function(){i(-1),a(t),r("LayersMain")},children:e},t)}))})})}),Object(u.jsx)(tt,{children:Object(u.jsx)(rt,{children:Object(u.jsx)(it,{active:!0,onClick:function(){return r("LayersMain")},children:"Back"})})})]})};var ba=function(e){var t=e.props,n=t.design,a=t.currentPartName,r=t.handleAddLayer,i=t.setLayersView;return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(Qe,{children:"Select Layer Type"}),Object(u.jsxs)(tt,{children:[n.configData.layerTypes[a].types.map((function(e,t){return Object(u.jsx)(rt,{children:"Mask"===e?Object(u.jsx)(it,{active:!0,onClick:function(){i("MaskTypes")},children:e}):"Graphic"===e?Object(u.jsx)(it,{active:!0,onClick:function(){i("GraphicPicker")},children:e}):Object(u.jsx)(it,{active:!0,onClick:function(){r(e),i("LayersMain")},children:e})},t)})),Object(u.jsx)(rt,{children:Object(u.jsx)(it,{active:!0,onClick:function(){return i("LayersMain")},children:"Cancel"})})]})]})};var pa=function(e){var t=e.props,n=t.design,a=t.currentPartName,r=t.handleAddMaskLayer,i=t.setLayersView;return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(Qe,{children:"Select Mask Type"}),Object(u.jsxs)(tt,{children:[n.configData.maskTypes[a].map((function(e,t){return Object(u.jsx)(rt,{children:Object(u.jsx)(it,{active:!0,onClick:function(){r(e[0],e[1]),i("LayersMain")},children:e[0]})},t)})),Object(u.jsx)(rt,{children:Object(u.jsx)(it,{active:!0,onClick:function(){return i("LayersMain")},children:"Cancel"})})]})]})};var ha,ja,fa,xa,ga=function(e){var t=e.props,n=t.currentLayer,r=t.currentPartName,i=t.design,c=t.handleChangeManager,s=t.setLayersView,o=t.setCanSave,d=t.currentShoe,b=Object(a.useState)("#ffffaa"),p=Object(l.a)(b,2),h=p[0],j=p[1],f=Object(a.useState)([]),x=Object(l.a)(f,2),g=x[0],v=x[1];Object(a.useEffect)((function(){v(function(){var e=[];for(var t in i.outlineData.parts){for(var n in i.outlineData.parts[t].right){var a=i.outlineData.parts[t].right[n].type;if("color"===a||"mask"===a){var r=i.outlineData.parts[t].right[n].color;e.includes(r)||e.push(r)}}for(var c in i.outlineData.parts[t].left){var s=i.outlineData.parts[t].left[c].type;if("color"===s||"mask"===s){var o=i.outlineData.parts[t].left[c].color;e.includes(o)||e.push(o)}}}for(var l in i.outlineData.overlays){for(var u in i.outlineData.overlays[l].right)if("color"===i.outlineData.overlays[l].right[u].type){var d=i.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var b in i.outlineData.overlays[l].left)if("color"===i.outlineData.overlays[l].left[b].type){var p=i.outlineData.overlays[l].left[b].color;e.includes(p)||e.push(p)}}var h=i.outlineData.baseColors.right;e.includes(h)||e.push(h);var j=i.outlineData.baseColors.left;return e.includes(j)||e.push(j),e}()),j("outerOverlay"===r||"innerOverlay"===r?i.outlineData.overlays[r][d][n].color:i.outlineData.parts[r][d][n].color)}),[i,r,n,v,d]);var O=function(e){o(!0);var t=e.hex||e;j(e),c({type:"color-changed",partName:r,layerIndex:n,newColor:t})};return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(Et,{color:h,colorsArray:g,onChangeComplete:O,handleColorChange:O}),Object(u.jsxs)(nt,{children:[Object(u.jsx)(at,{children:Object(u.jsx)(Qe,{children:Sn(r)})}),Object(u.jsx)(ct,{children:Object(u.jsx)(st,{active:!0,onClick:function(){return s("LayersMain")},children:Object(u.jsx)(Ht.g,{})})})]})]})},va=(n(325),P.a.div(ha||(ha=Object(I.a)(["\n  height: 300px;\n  position: relative;\n  margin: 6px;\n"])))),Oa=P.a.div(ja||(ja=Object(I.a)(["\n  transform: ",";\n"])),(function(e){return e.mirror?"scaleX(-1)":"unset"})),ya=P.a.button(fa||(fa=Object(I.a)(["\n  background-color: #00000077;\n  color: #ffffff;\n  width: 40px;\n  height: 40px;\n  border: none;\n  margin: auto;\n  border-radius: 50px;\n  padding: 0px;\n  font-size: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  &:focus {\n    outline: none;\n  }\n"]))),ma=P.a.div(xa||(xa=Object(I.a)(["\n  position: absolute;\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: grid;\n  grid-template-columns: 1fr 3fr 1fr 3fr 1fr;\n  grid-template-rows: 1fr 3fr 1fr 3fr 1fr;\n  z-index: 1;\n  grid-template-areas:\n    'counter . up . clock'\n    '. . . . .'\n    'left . . . right'\n    '. . . . .'\n    'compress . down . expand';\n"])));var Ca=function(e){var t=e.props,n=t.currentLayer,r=t.currentPartName,i=t.graphicVisualCanvas,c=t.handleChangeManager,s=t.handleUpdateGraphicVisualCanvas,o=t.setLayersView,l=t.setCanSave,d=t.currentShoe,b=function(e,t){l(!0),c({type:"graphic-moved",partName:r,layerIndex:n,direction:e,distance:t})};return Object(a.useEffect)((function(){!function(){var e=document.getElementById("graphic-visual-container");e.innerHTML="",e.appendChild(i)}(),s(r)}),[]),Object(u.jsxs)(Ke,{children:[Object(u.jsxs)(va,{children:[Object(u.jsxs)(ma,{children:[Object(u.jsx)(ya,{id:"up-button",onClick:function(){return b("vert",-30)},children:Object(u.jsx)(Ht.d,{})}),Object(u.jsx)(ya,{id:"down-button",onClick:function(){return b("vert",30)},children:Object(u.jsx)(Ht.a,{})}),Object(u.jsx)(ya,{id:"left-button",onClick:function(){return b("hor",-30)},children:Object(u.jsx)(Ht.b,{})}),Object(u.jsx)(ya,{id:"right-button",onClick:function(){return b("hor",30)},children:Object(u.jsx)(Ht.c,{})}),Object(u.jsx)(ya,{id:"scale-up-button",onClick:function(){return b("scale",1.1)},children:Object(u.jsx)(Ht.e,{})}),Object(u.jsx)(ya,{id:"scale-down-button",onClick:function(){return b("scale",.9)},children:Object(u.jsx)(Ht.l,{})}),Object(u.jsx)(ya,{id:"clockwise-button",onClick:function(){return b("rotate",5)},children:Object(u.jsx)(Ht.r,{})}),Object(u.jsx)(ya,{id:"counterclockwise-button",onClick:function(){return b("rotate",-5)},children:Object(u.jsx)(Ht.t,{})})]}),Object(u.jsx)(Oa,{id:"graphic-visual-container",mirror:"left"===d})]}),Object(u.jsxs)(et,{children:[Object(u.jsx)(rt,{children:Object(u.jsx)(it,{active:!0,onClick:function(){return b("reset",0)},children:"Reset"})}),Object(u.jsx)(rt,{children:Object(u.jsx)(it,{active:!0,onClick:function(){return o("LayersMain")},children:"Done"})})]})]})};n(326),n(327);var wa=function(e){var t=e.graphicsArray,n=e.handleAddGraphicLayer;return Object(u.jsx)("div",{className:"current-graphics-container",children:t.map((function(e,t){return Object(u.jsx)("div",{className:"current-graphics-item",onClick:function(){return n(e)},children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e),alt:"used-already"})},t)}))})};var ka={LayersMain:ca,PartList:da,AddLayerType:ba,MaskTypes:pa,ColorEditor:ga,GraphicEditor:Ca,GraphicPicker:function(e){var t=e.props,n=t.setLayersView,r=t.handleAddLayer,i=t.design,c=Object(a.useState)(!1),s=Object(l.a)(c,2),o=s[0],d=s[1],b=Object(a.useState)(!1),p=Object(l.a)(b,2),h=p[0],j=p[1],f=Object(a.useState)(),x=Object(l.a)(f,2),g=x[0],v=x[1];Object(a.useEffect)((function(){v(function(){var e=["red-apple.png"];for(var t in i.outlineData.parts){for(var n in i.outlineData.parts[t].right)if("graphic"===i.outlineData.parts[t].right[n].type){var a=i.outlineData.parts[t].right[n].link;e.includes(a)||e.push(a)}for(var r in i.outlineData.parts[t].left)if("graphic"===i.outlineData.parts[t].left[r].type){var c=i.outlineData.parts[t].left[r].link;e.includes(c)||e.push(c)}}for(var s in i.outlineData.overlays){for(var o in i.outlineData.overlays[s].right)if("graphic"===i.outlineData.overlays[s].right[o].type){var l=i.outlineData.overlays[s].right[o].link;e.includes(l)||e.push(l)}for(var u in i.outlineData.overlays[s].left)if("graphic"===i.outlineData.overlays[s].left[u].type){var d=i.outlineData.overlays[s].left[u].link;e.includes(d)||e.push(d)}}return e[0]?e:null}())}),[i]);var O=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t.target.files[0].size/1024/1024).toFixed(4)<2)){e.next=8;break}return j(!0),n=t.target.files[0],e.next=6,rn(n,!0).then((function(e){var t=sn(e.image);y(t)}));case 6:e.next=9;break;case 8:d(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){r("Graphic",e),n("LayersMain")};return h?Object(u.jsx)(Ke,{children:Object(u.jsx)(bt,{})}):Object(u.jsxs)(Ke,{children:[Object(u.jsx)(Qe,{children:"Graphics"}),g&&Object(u.jsx)("div",{className:"used-graphics",children:Object(u.jsx)(wa,{graphicsArray:g,handleAddGraphicLayer:y})}),Object(u.jsx)("div",{className:"upload-image-input",children:Object(u.jsxs)("label",{htmlFor:"image-input-id",className:"upload-image-label",children:[Object(u.jsx)("input",{onChange:function(e){return O(e)},id:"image-input-id",type:"file",name:"myImage",accept:"image/png, image/jpeg, .png, .jpg"}),"Upload"]})}),o&&Object(u.jsx)("div",{className:"file-size-warning",children:Object(u.jsx)("p",{children:"file must be less that 2MB."})}),Object(u.jsx)(tt,{children:Object(u.jsx)(rt,{children:Object(u.jsx)(it,{active:!0,onClick:function(){return n("LayersMain")},children:"Cancel"})})})]})}};var Da,Sa,Na=function(e){var t=e.layersView,n=e.setLayersView,a=e.currentLayer,r=e.currentPart,i=e.design,c=e.graphicVisualCanvas,s=e.handleChangeManager,o=e.handleUpdateGraphicVisualCanvas,l=e.handleViewChange,d=e.setCurrentLayer,b=e.setCurrentPart,p=e.setCanSave,h=e.currentShoe,j=Object.keys(i.configData.partsObject)[r],f="parts";"outerOverlay"!==j&&"innerOverlay"!==j||(f="overlays");var x=i.outlineData[f][j][h].length,g=i.outlineData[f][j][h],v=ka[t],O={allLayers:g,currentPart:r,currentLayer:a,currentPartName:j,design:i,graphicVisualCanvas:c,handleAddLayer:function(e,t){p(!0),s(Object(pn.a)({type:"layer-added",partName:j,layerType:e},t&&{fileName:t})),d(x)},handleAddMaskLayer:function(e,t){p(!0),s({type:"layer-added",partName:j,layerType:"Mask",maskType:e,maskLink:t}),d(x)},handleMoveLayer:function(e,t){p(!0),s({type:"layer-moved",partName:j,layerIndex:e,direction:t}),d(a+t)},handleEditLayer:function(e,t){"color"===t.type?(d(e),n("ColorEditor")):"graphic"===t.type?(d(e),n("GraphicEditor")):"mask"===t.type?(d(e),n("ColorEditor")):"overlay"===t.type&&(b(i.configData.partsArray.indexOf(t.source)),d(-1))},handleDeleteLayer:function(e){p(!0),s({type:"layer-deleted",partName:j,layerIndex:e}),d(-1)},handleChangeManager:s,handleUpdateGraphicVisualCanvas:o,handleViewChange:l,setCurrentLayer:d,setCurrentPart:b,setLayersView:n,numberOfLayers:x,setCanSave:p,currentShoe:h,layersView:t};return Object(u.jsx)(Ke,{children:Object(u.jsx)(v,{props:O})})},Va=(P.a.p(Da||(Da=Object(I.a)(["\n  color: #ffffff;\n  margin: 16px;\n"]))),P.a.input(Sa||(Sa=Object(I.a)(["\n  display: block;\n  font-size: 18px;\n  outline: none;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: none;\n  border-radius: 3px;\n  height: 38px;\n  padding-left: 10px;\n"]))));var La=function(e){var t=e.handleViewChange,n=e.design,a=e.setDesign,r=e.setCanSave;return Object(u.jsxs)(Ke,{children:[Object(u.jsx)(nt,{children:Object(u.jsx)(at,{children:Object(u.jsx)(Qe,{children:"Design Name"})})}),Object(u.jsxs)(tt,{children:[Object(u.jsx)(rt,{children:Object(u.jsx)(Va,{type:"text",id:"design-name-input",defaultValue:n.title})}),Object(u.jsx)(rt,{children:Object(u.jsx)(it,{active:!0,onClick:function(){return function(){var e=Object(On.cloneDeep)(n),i=Object(On.startCase)(document.getElementById("design-name-input").value);e.title=i,r(!0),a(e),t("DesignMenu")}()},children:"Done"})})]})]})};var Ia,Pa=function(e){var t,n=e.design,r=e.setDesign,i=e.graphicVisualCanvas,c=e.handleUpdateGraphicVisualCanvas,s=e.handleChangeManager,o=e.handleUpdateBaseColor,d=e.userData,b=e.currentPart,p=e.setCurrentPart,h=e.currentShoe,j=e.setCurrentShoe,f=e.shoeVisibility,x=e.setShoeVisibility,g=e.view,v=e.setView,O=e.layersView,y=e.setLayersView,m=e.currentLayer,C=e.setCurrentLayer,w=e.setCameraReset,k=Object(a.useState)(!1),D=Object(l.a)(k,2),S=D[0],N=D[1],V=function(e){v(e)};return"DesignMenu"===g?t=Object(u.jsx)(dn,{handleViewChange:V,design:n,setDesign:r,canSave:S,setCanSave:N,userData:d,currentShoe:h,setCurrentShoe:j,shoeVisibility:f,setShoeVisibility:x,setCameraReset:w}):"Layers"===g?t=Object(u.jsx)(Na,{layersView:O,setLayersView:y,handleViewChange:V,design:n,setDesign:r,currentShoe:h,currentPart:b,setCurrentPart:p,currentLayer:m,setCurrentLayer:C,graphicVisualCanvas:i,handleUpdateGraphicVisualCanvas:c,handleChangeManager:s,setCanSave:N}):"ChangeDesignName"===g?t=Object(u.jsx)(La,{handleViewChange:V,design:n,setDesign:r,setCanSave:N}):"ChangeBaseColor"===g?t=Object(u.jsx)(Dn,{handleViewChange:V,design:n,setDesign:r,setCanSave:N,handleUpdateBaseColor:o,currentShoe:h,setCurrentShoe:j}):"DesignInfo"===g?t=Object(u.jsx)(an,{design:n}):"DesignVisibility"===g&&(t=Object(u.jsx)(vn,{currentShoe:h,setCurrentShoe:j,shoeVisibility:f,setShoeVisibility:x})),Object(u.jsxs)(Yt,{children:[Object(u.jsx)(Wt,{children:t}),Object(u.jsx)(Xt,{children:Object(u.jsx)(Qt,{handleViewChange:V,view:g})})]})},Ea=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v,O;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.setTexturesLoaded,a=t.design,r=t.graphicVisualCanvas,i=t.rightInnerOverlayCanvas,c=t.rightOuterOverlayCanvas,s=t.rightTexture,o=t.rightTextureCanvas,l=t.leftInnerOverlayCanvas,u=t.leftOuterOverlayCanvas,d=t.leftTexture,b=t.leftTextureCanvas,p=t.rightCanvasObjectRef,h=t.rightOverlaysCanvasObjectRef,j=t.rightBaseColorCanvasObjectRef,f=t.leftBaseColorCanvasObjectRef,x=t.leftCanvasObjectRef,g=t.leftOverlaysCanvasObjectRef,e.next=3,Ya({design:a,type:"overlaysCanvasObject",currentShoe:"right"});case 3:return h.current=e.sent,e.next=6,Ya({design:a,type:"overlaysCanvasObject",currentShoe:"left"});case 6:return g.current=e.sent,Wa({design:a,overlayCanvasObject:h.current,overlayCanvas:c,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),Wa({design:a,overlayCanvasObject:g.current,overlayCanvas:u,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),Wa({design:a,overlayCanvasObject:h.current,overlayCanvas:i,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),Wa({design:a,overlayCanvasObject:g.current,overlayCanvas:l,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),e.next=13,Ya({design:a,type:"partsCanvasObject",overlays:[c,i],currentShoe:"right"});case 13:return p.current=e.sent,e.next=16,Ya({design:a,type:"partsCanvasObject",overlays:[u,l],currentShoe:"left"});case 16:return x.current=e.sent,e.next=19,Ya({design:a,type:"baseColorCanvasObject",currentShoe:"right"});case 19:return j.current=e.sent,e.next=22,Ya({design:a,type:"baseColorCanvasObject",currentShoe:"left"});case 22:return f.current=e.sent,e.next=25,rr({design:a,canvasObject:p.current,baseColorCanvasObject:j.current});case 25:return v=e.sent,e.next=28,rr({design:a,canvasObject:x.current,baseColorCanvasObject:f.current});case 28:O=e.sent,o.getContext("2d").drawImage(v,0,0),s.needsUpdate=!0,b.getContext("2d").drawImage(O,0,0),d.needsUpdate=!0,n(!0);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),za=function(e){var t=new $e.CanvasTexture(e);return t.flipY=!1,t},Ma=function(e){var t=e.design;return new Promise((function(e){var n=t.configData.canvasSize,a=document.createElement("canvas");a.width=n,a.height=n;var r=a.getContext("2d");!function t(){null!==r&&"object"===typeof a?(r.fillStyle="#ffffff",r.fillRect(0,0,n,n),e(a)):setTimeout(t,100)}()}))},Ta=function(e){var t=e.design;return new Promise((function(e){var n=t.configData.canvasSize,a=document.createElement("canvas");a.width=n,a.height=n;var r=a.getContext("2d"),i=new Image;i.src="/api/assets/designimages/".concat(t.configData.source.redMap),i.onload=function(){!function t(){null!==r&&"object"===typeof a?(r.drawImage(i,0,0,1e3,1e3),e(a)):setTimeout(t,100)}()}}))},Ra=function(e){var t=e.design.configData.canvasSize,n=document.createElement("canvas");return n.id="graphic-visual-canvas",n.width=t,n.height=t,n},Aa=function(e){var t=e.design,n=e.layer,a=e.partName;return new Promise((function(e){var r=t.configData.partsObject[a].mask,i=n.color,c=t.configData.canvasSize,s=document.createElement("canvas");s.width=c,s.height=c;var o=s.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof s?(o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=i,o.fillRect(0,0,c,c),e(s)):setTimeout(t,100)}()}}))},Ga=function(e){var t=e.design,n=e.layer,a=e.partName,r=e.currentShoe;return new Promise((function(e){var i=t.configData.partsObject[a].mask,c=n.link,s=n.x,o=n.y,l=n.scale,u=n.rotation,d=t.configData.canvasSize,b=document.createElement("canvas");b.width=d,b.height=d;var p=b.getContext("2d"),h=new Image;h.src="/api/assets/images/".concat(c),h.onload=function(){var t=h.width,n=h.height,a=Math.round(Math.sqrt(t*t+n*n)),c=document.createElement("canvas");c.id="pythagorean-canvas",c.width=a,c.height=a;var j=c.getContext("2d");!function t(){if(null!==j&&"object"===typeof c&&null!==p&&"object"===typeof b){j.translate(c.width/2,c.height/2),j.rotate(u*Math.PI/180),j.drawImage(h,h.width/-2,h.height/-2,h.width,h.height);var n=new Image;n.src="/api/assets/designimages/".concat(i),n.onload=function(){p.drawImage(n,0,0,d,d),p.globalCompositeOperation="source-in";var t=s+(d-d*l)/2,a=o+(d-d*l)/2,i=d*l;"left"===r&&(p.scale(-1,1),p.translate(-d,0)),p.drawImage(c,t,a,i,i),e(b)}}else setTimeout(t,100)}()}}))},Ua=function(e){var t=e.design,n=e.layer,a=e.currentShoe;return new Promise((function(e){var r=n.link,i=n.color,c=t.configData.canvasSize,s=document.createElement("canvas");s.width=c,s.height=c;var o=s.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof s?("left"===a&&"heelWingLogoMask.png"===r&&(o.scale(-1,1),o.translate(-c,0)),o.drawImage(l,0,0,c,c),o.globalCompositeOperation="source-in",o.fillStyle=i,o.fillRect(0,0,c,c),e(s)):setTimeout(t,100)}()}}))},Ba=function(e){var t=e.design,n=e.layer,a=e.partName,r=e.overlayCanvas;return new Promise((function(e){var i=t.configData.partsObject[a].mask,c=n.source,s=t.configData.translations[c][a],o=s.x,l=s.y,u=s.scale,d=s.rotation,b=t.configData.canvasSize,p=document.createElement("canvas");p.width=b,p.height=b;var h=p.getContext("2d"),j=new Image;j.src="/api/assets/designimages/".concat(i),j.onload=function(){!function t(){null!==h&&"object"===typeof p?(h.drawImage(j,0,0,b,b),h.globalCompositeOperation="source-in",h.translate(b*o,b*l),h.rotate(d),h.drawImage(r,0,0,b*u,b*u),e(p)):setTimeout(t,100)}()}}))},_a=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i,c,s,o,l;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.design,a=t.designLayers,r=t.partName,i=t.overlays,c=t.currentShoe,s=[],e.t0=Xe.a.keys(a);case 3:if((e.t1=e.t0()).done){e.next=44;break}if(o=e.t1.value,"color"!==a[o].type){e.next=12;break}return e.next=8,Aa({design:n,layer:a[o],partName:r});case 8:l=e.sent,s.push(l),e.next=42;break;case 12:if("graphic"!==a[o].type){e.next=20;break}return e.t2=s,e.next=16,Ga({design:n,layer:a[o],partName:r,currentShoe:c});case 16:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=42;break;case 20:if("mask"!==a[o].type){e.next=28;break}return e.t4=s,e.next=24,Ua({design:n,layer:a[o],currentShoe:c});case 24:e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.next=42;break;case 28:if("overlay"!==a[o].type){e.next=42;break}if("outerOverlay"!==a[o].source){e.next=37;break}return e.t6=s,e.next=33,Ba({design:n,layer:a[o],partName:r,overlayCanvas:i[0]});case 33:e.t7=e.sent,e.t6.push.call(e.t6,e.t7),e.next=42;break;case 37:return e.t8=s,e.next=40,Ba({design:n,layer:a[o],partName:r,overlayCanvas:i[1]});case 40:e.t9=e.sent,e.t8.push.call(e.t8,e.t9);case 42:e.next=3;break;case 44:return e.abrupt("return",{layers:s});case 45:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fa=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.design,a=t.partName,r=t.currentShoe,e.next=3,Aa({design:n,layer:{color:n.outlineData.baseColors[r]},partName:a});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ya=function(e){var t=e.design,n=e.type,a=e.overlays,r=e.currentShoe;return new Promise((function(e,i){var c={};(function(){var i=Object(He.a)(Xe.a.mark((function i(){var s,o,l;return Xe.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("partsCanvasObject"!==n){i.next=11;break}i.t0=Xe.a.keys(t.outlineData.parts);case 2:if((i.t1=i.t0()).done){i.next=9;break}return s=i.t1.value,i.next=6,_a({design:t,designLayers:t.outlineData.parts[s][r],partName:s,overlays:a,currentShoe:r});case 6:c[s]=i.sent,i.next=2;break;case 9:i.next=31;break;case 11:if("overlaysCanvasObject"!==n){i.next=22;break}i.t2=Xe.a.keys(t.outlineData.overlays);case 13:if((i.t3=i.t2()).done){i.next=20;break}return o=i.t3.value,i.next=17,_a({design:t,designLayers:t.outlineData.overlays[o][r],partName:o,currentShoe:r});case 17:c[o]=i.sent,i.next=13;break;case 20:i.next=31;break;case 22:if("baseColorCanvasObject"!==n){i.next=31;break}i.t4=Xe.a.keys(t.outlineData.parts);case 24:if((i.t5=i.t4()).done){i.next=31;break}return l=i.t5.value,i.next=28,Fa({design:t,partName:l,currentShoe:r});case 28:c[l]=i.sent,i.next=24;break;case 31:e(c);case 32:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}})()()}))},Wa=function(e){var t=e.design,n=e.overlayCanvasObject,a=e.overlayCanvas,r=e.partName,i=e.graphicVisualCanvas,c=t.configData.canvasSize,s=a.getContext("2d"),o=i.getContext("2d");for(var l in o.clearRect(0,0,c,c),s.clearRect(0,0,c,c),n[r].layers){var u=n[r].layers[l];s.drawImage(u,0,0,c,c),o.drawImage(u,0,0,c,c)}},Xa=function(e){var t=e.design,n=e.graphicVisualCanvas,a=e.partName,r=e.canvasObject,i=e.baseColorCanvasObject,c=t.configData.canvasSize,s=n.getContext("2d");if(s.clearRect(0,0,c,c),i[a]){var o=i[a];s.drawImage(o,0,0,c,c)}for(var l in r[a].layers){var u=r[a].layers[l];s.drawImage(u,0,0,c,c)}},Ha=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.partName,a=t.layerIndex,r=t.layerObject,i=t.canvasObject,c=t.textureCanvas,s=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.baseColorCanvasObject,d=t.currentShoe,"color"!==r.type){e.next=7;break}return e.next=4,Aa({design:l,layer:r,partName:n});case 4:b=e.sent,e.next=16;break;case 7:if("graphic"!==r.type){e.next=13;break}return e.next=10,Ga({design:l,layer:r,partName:n,currentShoe:d});case 10:b=e.sent,e.next=16;break;case 13:return e.next=15,Ua({design:l,layer:r,currentShoe:d});case 15:b=e.sent;case 16:i[n].layers[a]=b,$a({textureCanvas:c,canvasObjectPart:i[n],partName:n,texture:s,graphicVisualCanvas:o,design:l,baseColorCanvasObject:u});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ja=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.canvasObject,a=t.graphicVisualCanvas,r=t.layerObject,i=t.partName,c=t.texture,s=t.textureCanvas,o=t.design,l=t.baseColorCanvasObject,u=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Aa({design:o,layer:r,partName:i});case 4:d=e.sent,n[i].layers.push(d),e.next=19;break;case 8:if("graphic"!==r.type){e.next=15;break}return e.next=11,Ga({design:o,layer:r,partName:i,currentShoe:u});case 11:b=e.sent,n[i].layers.push(b),e.next=19;break;case 15:return e.next=17,Ua({design:o,layer:r,currentShoe:u});case 17:p=e.sent,n[i].layers.push(p);case 19:$a({textureCanvas:s,canvasObjectPart:n[i],partName:i,texture:c,graphicVisualCanvas:a,design:o,baseColorCanvasObject:l});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qa=function(e){var t=e.canvasObject,n=e.partName,a=e.layerIndex,r=e.textureCanvas,i=e.texture,c=e.graphicVisualCanvas,s=e.design,o=e.baseColorCanvasObject;t[n].layers.splice(a,1),$a({textureCanvas:r,canvasObjectPart:t[n],partName:n,texture:i,graphicVisualCanvas:c,design:s,baseColorCanvasObject:o})},Za=function(e){var t=e.canvasObject,n=e.partName,a=e.layerIndex,r=e.direction,i=e.textureCanvas,c=e.texture,s=e.graphicVisualCanvas,o=e.design,l=e.baseColorCanvasObject,u=t[n].layers,d=u[a];u[a]=u[a+r],u[a+r]=d,t[n].layers=u,$a({textureCanvas:i,canvasObjectPart:t[n],partName:n,texture:c,graphicVisualCanvas:s,design:o,baseColorCanvasObject:l})},$a=function(e){var t=e.textureCanvas,n=e.canvasObjectPart,a=e.partName,r=e.texture,i=e.graphicVisualCanvas,c=e.design,s=e.baseColorCanvasObject,o=t.getContext("2d"),l=i.getContext("2d");l.clearRect(0,0,c.configData.canvasSize,c.configData.canvasSize);var u=c.configData.partsObject[a],d=u.x,b=u.y,p=u.width,h=u.height,j=c.configData.divider;for(var f in o.drawImage(s[a],d/j,b/j,p/j,h/j),l.drawImage(s[a],0,0,c.configData.canvasSize,c.configData.canvasSize),n.layers){var x=n.layers[f];o.drawImage(x,d/j,b/j,p/j,h/j),l.drawImage(x,0,0,c.configData.canvasSize,c.configData.canvasSize)}r.needsUpdate=!0},Ka=function(e){var t=e.changeObject,n=e.design,a=e.setDesign,r=e.texture,i=e.textureCanvas,c=e.graphicVisualCanvas,s=e.canvasObject,o=e.overlayCanvas,l=e.overlayCanvasObject,u=e.baseColorCanvasObject,d=e.currentShoe,b=t.type,p=t.fileName,h=Object(On.cloneDeep)(n);if("graphic-moved"===b){var j=t.partName,f=t.layerIndex,x=t.direction,g=t.distance,v=h.outlineData.overlays[j][d][f];"vert"===x?v.y+=g:"hor"===x?v.x+=g:"scale"===x?v.scale*=g:"rotate"===x?v.rotation+=g:"reset"===x&&(v.y=0,v.x=0,v.scale=1,v.rotation=0),a(h),Qa({partName:j,layerIndex:f,layerObject:v,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,canvasObject:s,textureCanvas:i,baseColorCanvasObject:u,currentShoe:d})}else if("color-changed"===b){var O=t.partName,y=t.layerIndex,m=t.newColor,C=h.outlineData.overlays[O][d][y];C.color=m,a(h),Qa({partName:O,layerIndex:y,layerObject:C,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,canvasObject:s,textureCanvas:i,baseColorCanvasObject:u,currentShoe:d})}else if("layer-added"===b){var w=t.partName,k=t.layerType;if(0===n.outlineData.overlays[w][d].length){var D=n.configData.overlayParts[w];for(var S in D){var N=D[S];h.outlineData.parts[N][d].push({type:"overlay",source:w})}}"Color"===k?h.outlineData.overlays[w][d].push({type:"color",color:"#777777"}):h.outlineData.overlays[w][d].push({type:"graphic",link:p,x:0,y:0,scale:1,rotation:0}),a(h),er({overlayCanvasObject:l,partName:w,layerObject:h.outlineData.overlays[w][d].slice(-1)[0],overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,textureCanvas:i,canvasObject:s,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}else if("layer-moved"===b){var V=t.partName,L=t.layerIndex,I=t.direction,P=h.outlineData.overlays[V][d],E=P[L];P[L]=P[L+I],P[L+I]=E,h.outlineData.overlays[V][d]=P,a(h),tr({overlayCanvasObject:l,partName:V,layerIndex:L,direction:I,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,textureCanvas:i,canvasObject:s,baseColorCanvasObject:u,currentShoe:d})}else if("layer-deleted"===b){var z=t.partName,M=t.layerIndex;if(h.outlineData.overlays[z][d].splice(M,1),0===h.outlineData.overlays[z][d].length){var T=n.configData.overlayParts[z];for(var R in T)for(var A=T[R],G=0;G<h.outlineData.parts[A][d].length;G++){var U=G;"overlay"===h.outlineData.parts[A][d][G].type&&h.outlineData.parts[A][d][G].source===z&&(h.outlineData.parts[A][d].splice(U,1),s[A].layers.splice(U,1))}}a(h),nr({overlayCanvasObject:l,partName:z,layerIndex:M,overlayCanvas:o,texture:r,graphicVisualCanvas:c,design:n,textureCanvas:i,canvasObject:s,tempDesign:h,baseColorCanvasObject:u,currentShoe:d})}},Qa=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v,O;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.partName,a=t.layerIndex,r=t.layerObject,i=t.overlayCanvasObject,c=t.overlayCanvas,s=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.canvasObject,d=t.textureCanvas,b=t.baseColorCanvasObject,p=t.currentShoe,h=l.configData.overlayParts[n],"color"!==r.type){e.next=8;break}return e.next=5,Aa({design:l,layer:r,partName:n});case 5:j=e.sent,e.next=11;break;case 8:return e.next=10,Ga({design:l,layer:r,partName:n,currentShoe:p});case 10:j=e.sent;case 11:i[n].layers[a]=j,Wa({design:l,overlayCanvasObject:i,overlayCanvas:c,partName:n,graphicVisualCanvas:o,currentShoe:p}),e.t0=Xe.a.keys(h);case 14:if((e.t1=e.t0()).done){e.next=32;break}f=e.t1.value,x=h[f],g=0;case 18:if(!(g<l.outlineData.parts[x][p].length)){e.next=30;break}if(v=g,"overlay"!==l.outlineData.parts[x][p][g].type){e.next=27;break}if(l.outlineData.parts[x][p][g].source!==n){e.next=27;break}return e.next=24,Ba({design:l,layer:l.outlineData.parts[x][p][g],partName:x,overlayCanvas:c});case 24:O=e.sent,u[x].layers[v]=O,ar({textureCanvas:d,canvasObjectPart:u[x],partName:x,design:l,baseColorCanvasObject:b});case 27:g++,e.next=18;break;case 30:e.next=14;break;case 32:s.needsUpdate=!0;case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),er=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v,O,y;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.overlayCanvasObject,a=t.partName,r=t.layerObject,i=t.overlayCanvas,c=t.texture,s=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,b=t.baseColorCanvasObject,p=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Aa({design:o,layer:r,partName:a});case 4:h=e.sent,n[a].layers.push(h),e.next=13;break;case 8:if("graphic"!==r.type){e.next=13;break}return e.next=11,Ga({design:o,layer:r,partName:a,currentShoe:p});case 11:j=e.sent,n[a].layers.push(j);case 13:Wa({design:o,overlayCanvasObject:n,overlayCanvas:i,partName:a,graphicVisualCanvas:s,currentShoe:p}),f=o.configData.overlayParts[a],e.t0=Xe.a.keys(f);case 16:if((e.t1=e.t0()).done){e.next=34;break}x=e.t1.value,g=f[x],v=0;case 20:if(!(v<d.outlineData.parts[g][p].length)){e.next=32;break}if(O=v,"overlay"!==d.outlineData.parts[g][p][v].type){e.next=29;break}if(d.outlineData.parts[g][p][v].source!==a){e.next=29;break}return e.next=26,Ba({design:o,layer:d.outlineData.parts[g][p][v],partName:g,overlayCanvas:i});case 26:y=e.sent,u[g].layers[O]=y,ar({textureCanvas:l,canvasObjectPart:u[g],partName:g,design:o,baseColorCanvasObject:b});case 29:v++,e.next=20;break;case 32:e.next=16;break;case 34:c.needsUpdate=!0;case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tr=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v,O,y;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.overlayCanvasObject,a=t.partName,r=t.layerIndex,i=t.direction,c=t.overlayCanvas,s=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.textureCanvas,d=t.canvasObject,b=t.baseColorCanvasObject,p=t.currentShoe,h=n[a].layers,j=h[r],h[r]=h[r+i],h[r+i]=j,n[a].layers=h,Wa({design:l,overlayCanvasObject:n,overlayCanvas:c,partName:a,graphicVisualCanvas:o,currentShoe:p}),f=l.configData.overlayParts[a],e.t0=Xe.a.keys(f);case 9:if((e.t1=e.t0()).done){e.next=27;break}x=e.t1.value,g=f[x],v=0;case 13:if(!(v<l.outlineData.parts[g][p].length)){e.next=25;break}if(O=v,"overlay"!==l.outlineData.parts[g][p][v].type){e.next=22;break}if(l.outlineData.parts[g][p][v].source!==a){e.next=22;break}return e.next=19,Ba({design:l,layer:l.outlineData.parts[g][p][v],partName:g,overlayCanvas:c});case 19:y=e.sent,d[g].layers[O]=y,ar({textureCanvas:u,canvasObjectPart:d[g],partName:g,design:l,baseColorCanvasObject:b});case 22:v++,e.next=13;break;case 25:e.next=9;break;case 27:s.needsUpdate=!0;case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nr=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i,c,s,o,l,u,d,b,p,h,j,f,x,g,v;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.overlayCanvasObject,a=t.partName,r=t.layerIndex,i=t.overlayCanvas,c=t.texture,s=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,b=t.baseColorCanvasObject,p=t.currentShoe,n[a].layers.splice(r,1),Wa({design:o,overlayCanvasObject:n,overlayCanvas:i,partName:a,graphicVisualCanvas:s,currentShoe:p}),h=o.configData.overlayParts[a],e.t0=Xe.a.keys(h);case 5:if((e.t1=e.t0()).done){e.next=22;break}j=e.t1.value,f=h[j],x=0;case 9:if(!(x<d.outlineData.parts[f][p].length)){e.next=19;break}if(g=x,"overlay"!==d.outlineData.parts[f][p][x].type||d.outlineData.parts[f][p][x].source!==a){e.next=16;break}return e.next=14,Ba({design:o,layer:o.outlineData.parts[f][p][x],partName:f,overlayCanvas:i});case 14:v=e.sent,u[f].layers[g]=v;case 16:x++,e.next=9;break;case 19:ar({textureCanvas:l,canvasObjectPart:u[f],partName:f,design:o,baseColorCanvasObject:b}),e.next=5;break;case 22:c.needsUpdate=!0;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ar=function(e){var t=e.textureCanvas,n=e.canvasObjectPart,a=e.partName,r=e.design,i=e.baseColorCanvasObject,c=t.getContext("2d"),s=r.configData.partsObject[a],o=s.x,l=s.y,u=s.width,d=s.height,b=r.configData.divider;for(var p in c.drawImage(i[a],o/b,l/b,u/b,d/b),n.layers){var h=n.layers[p];c.drawImage(h,o/b,l/b,u/b,d/b)}},rr=function(e){var t=e.design,n=e.canvasObject,a=e.baseColorCanvasObject;return new Promise((function(e,r){var i=document.createElement("canvas");i.width=t.configData.canvasSize,i.height=t.configData.canvasSize;var c=i.getContext("2d");!function r(){if("undefined"!==typeof c){for(var s in n){var o=t.configData.partsObject[s],l=o.x,u=o.y,d=o.width,b=o.height,p=t.configData.divider;for(var h in c.drawImage(a[s],l/p,u/p,d/p,b/p),n[s].layers){var j=n[s].layers[h];c.drawImage(j,l/p,u/p,d/p,b/p)}}e(i)}else setTimeout(r,100)}()}))},ir=P.a.div(Ia||(Ia=Object(I.a)(["\n  height: 100vh;\n  width: 100vw;\n  background-color: #f9f9f9;\n  font-family: 'Roboto';\n"])));var cr=function(e){var t=e.userData,n=e.designSpec,r=e.graphicVisualCanvas,i=e.rightInnerOverlayCanvas,c=e.rightOuterOverlayCanvas,s=e.rightTexture,o=e.rightTextureCanvas,d=e.leftInnerOverlayCanvas,b=e.leftOuterOverlayCanvas,p=e.leftTexture,h=e.leftTextureCanvas,j=e.redMapCanvas,f=Object(a.useState)(n),x=Object(l.a)(f,2),g=x[0],v=x[1],O=Object(a.useState)(!1),y=Object(l.a)(O,2),m=y[0],C=y[1],w=Object(a.useState)(0),k=Object(l.a)(w,2),D=k[0],S=k[1],N=Object(a.useState)("right"),V=Object(l.a)(N,2),L=V[0],I=V[1],P=Object(a.useState)(-1),E=Object(l.a)(P,2),z=E[0],M=E[1],T=Object(a.useState)({right:!0,left:!0}),R=Object(l.a)(T,2),A=R[0],G=R[1],U=Object(a.useState)("DesignInfo"),B=Object(l.a)(U,2),_=B[0],F=B[1],Y=Object(a.useState)("LayersMain"),W=Object(l.a)(Y,2),X=W[0],H=W[1],J=Object(a.useRef)(),q=Object(a.useRef)(),Z=Object(a.useRef)(),$=Object(a.useRef)(),K=Object(a.useRef)(),Q=Object(a.useRef)(),ee=Object(a.useState)(!0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],re=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ya({design:t,type:"baseColorCanvasObject",currentShoe:"right"});case 2:return J.current=e.sent,e.next=5,Ya({design:t,type:"baseColorCanvasObject",currentShoe:"left"});case 5:return $.current=e.sent,e.next=8,rr({design:g,canvasObject:q.current,baseColorCanvasObject:J.current});case 8:return n=e.sent,e.next=11,rr({design:g,canvasObject:K.current,baseColorCanvasObject:$.current});case 11:a=e.sent,o.getContext("2d").drawImage(n,0,0),s.needsUpdate=!0,h.getContext("2d").drawImage(a,0,0),p.needsUpdate=!0;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){q.current&&K.current||Ea({setTexturesLoaded:C,design:g,graphicVisualCanvas:r,rightBaseColorCanvasObjectRef:J,rightInnerOverlayCanvas:i,rightOuterOverlayCanvas:c,rightTexture:s,rightTextureCanvas:o,rightCanvasObjectRef:q,rightOverlaysCanvasObjectRef:Z,leftBaseColorCanvasObjectRef:$,leftInnerOverlayCanvas:d,leftOuterOverlayCanvas:b,leftTexture:p,leftTextureCanvas:h,leftCanvasObjectRef:K,leftOverlaysCanvasObjectRef:Q})}),[g,r,i,c,s,o,d,b,p,h]),g?Object(u.jsxs)(ir,{children:[Object(u.jsx)(_t,{design:g,setView:F,setLayersView:H,rightTexture:s,leftTexture:p,texturesLoaded:m,setCurrentPart:S,setCurrentShoe:I,setCurrentLayer:M,shoeVisibility:A,redMapCanvas:j,cameraReset:ne,setCameraReset:ae}),Object(u.jsx)(Pa,{design:g,setDesign:v,view:_,setView:F,currentLayer:z,setCurrentLayer:M,layersView:X,setLayersView:H,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:function(e){Xa("outerOverlay"===e||"innerOverlay"===e?"right"===L?{design:g,graphicVisualCanvas:r,partName:e,canvasObject:Z.current,baseColorCanvasObject:J.current,currentShoe:L}:{design:g,graphicVisualCanvas:r,partName:e,canvasObject:Q.current,baseColorCanvasObject:$.current,currentShoe:L}:"right"===L?{design:g,graphicVisualCanvas:r,partName:e,canvasObject:q.current,baseColorCanvasObject:J.current,currentShoe:L}:{design:g,graphicVisualCanvas:r,partName:e,canvasObject:K.current,baseColorCanvasObject:$.current,currentShoe:L})},handleChangeManager:function(e){var t=e.partName;"outerOverlay"===t?Ka({changeObject:e,design:g,setDesign:v,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,overlayCanvas:"right"===L?c:b,overlayCanvasObject:"right"===L?Z.current:Q.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L}):"innerOverlay"===t?Ka({changeObject:e,design:g,setDesign:v,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,overlayCanvas:"right"===L?i:d,overlayCanvasObject:"right"===L?Z.current:Q.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L}):function(e){var t=e.changeObject,n=e.design,a=e.setDesign,r=e.texture,i=e.textureCanvas,c=e.graphicVisualCanvas,s=e.canvasObject,o=e.baseColorCanvasObject,l=e.currentShoe,u=t.type,d=t.fileName,b=Object(On.cloneDeep)(n);if("graphic-moved"===u){var p=t.partName,h=t.layerIndex,j=t.direction,f=t.distance,x=b.outlineData.parts[p][l][h];"vert"===j?x.y+=f:"hor"===j?x.x+=f:"scale"===j?x.scale*=f:"rotate"===j?x.rotation+=f:"reset"===j&&(x.y=0,x.x=0,x.scale=1,x.rotation=0),a(b),Ha({partName:p,layerIndex:h,layerObject:x,canvasObject:s,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:n,baseColorCanvasObject:o,currentShoe:l})}else if("color-changed"===u){var g,v=t.partName,O=t.layerIndex,y=t.newColor;(g="outerOverlay"===v||"innerOverlay"===v?b.outlineData.overlays[v].layers[O]:b.outlineData.parts[v][l][O]).color=y,a(b),Ha({partName:v,layerIndex:O,layerObject:g,canvasObject:s,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:n,baseColorCanvasObject:o,currentShoe:l})}else if("layer-added"===u){var m=t.partName,C=t.layerType;if("Color"===C)b.outlineData.parts[m][l].push({type:"color",color:"#777777"});else if("Graphic"===C)b.outlineData.parts[m][l].push({type:"graphic",link:d,x:0,y:0,scale:1,rotation:0});else{var w=t.maskLink;b.outlineData.parts[m][l].push({type:"mask",link:w,color:"#000000"})}a(b);var k=b.outlineData.parts[m][l].slice(-1)[0];Ja({canvasObject:s,graphicVisualCanvas:c,layerObject:k,partName:m,texture:r,textureCanvas:i,design:n,baseColorCanvasObject:o,currentShoe:l})}else if("layer-moved"===u){var D=t.partName,S=t.layerIndex,N=t.direction,V=b.outlineData.parts[D][l],L=V[S];V[S]=V[S+N],V[S+N]=L,b.outlineData.parts[D].layers=V,a(b),Za({canvasObject:s,partName:D,layerIndex:S,direction:N,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:n,baseColorCanvasObject:o,currentShoe:l})}else if("layer-deleted"===u){var I=t.partName,P=t.layerIndex;b.outlineData.parts[I][l].splice(P,1),a(b),qa({canvasObject:s,partName:I,layerIndex:P,textureCanvas:i,texture:r,graphicVisualCanvas:c,design:n,baseColorCanvasObject:o,currentShoe:l})}}({changeObject:e,design:g,setDesign:v,texture:"right"===L?s:p,textureCanvas:"right"===L?o:h,graphicVisualCanvas:r,canvasObject:"right"===L?q.current:K.current,baseColorCanvasObject:"right"===L?J.current:$.current,currentShoe:L})},handleUpdateBaseColor:re,userData:t,currentPart:D,setCurrentPart:S,currentShoe:L,setCurrentShoe:I,shoeVisibility:A,setShoeVisibility:G,setCameraReset:ae})]}):Object(u.jsx)(ir,{children:"Please wait..."})};var sr,or=function(){var e=Object(o.g)().id,t=Object(a.useContext)(D.context),n=Object(a.useState)(null),r=Object(l.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(null),d=Object(l.a)(s,2),b=d[0],p=d[1],h=Object(a.useState)(null),j=Object(l.a)(h,2),f=j[0],x=j[1],g=Object(a.useState)(null),v=Object(l.a)(g,2),O=v[0],y=v[1],m=Object(a.useState)(null),C=Object(l.a)(m,2),w=C[0],k=C[1],S=Object(a.useState)(null),N=Object(l.a)(S,2),L=N[0],I=N[1],P=Object(a.useState)(null),E=Object(l.a)(P,2),z=E[0],M=E[1],T=Object(a.useState)(null),R=Object(l.a)(T,2),A=R[0],G=R[1],U=Object(a.useState)(null),B=Object(l.a)(U,2),_=B[0],F=B[1],Y=Object(a.useState)(null),W=Object(l.a)(Y,2),X=W[0],H=W[1],J=Object(a.useState)(null),q=Object(l.a)(J,2),Z=q[0],$=q[1],K=function(){var e=Object(He.a)(Xe.a.mark((function e(t){var n,a,r,i,s,o,l;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(t),p(Ra({design:t})),e.next=4,Ma({design:t});case 4:return n=e.sent,x(n),e.next=8,Ma({design:t});case 8:return a=e.sent,y(a),e.next=12,Ma({design:t});case 12:return r=e.sent,k(r),e.next=16,Ma({design:t});case 16:return i=e.sent,M(i),e.next=20,Ma({design:t});case 20:return s=e.sent,G(s),e.next=24,Ma({design:t});case 24:return o=e.sent,F(o),e.next=28,Ta({design:t});case 28:l=e.sent,$(l);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){e?V("/api/outlines/".concat(e),"GET").then((function(e){return e.json()})).then((function(e){K(e)})):V("/api/outlines/newdesign","GET").then((function(e){return e.json()})).then((function(e){K(e)}))}),[e]),Object(a.useEffect)((function(){w&&_&&(I(za(w)),H(za(_)))}),[w,_]),i&&b&&f&&O&&w&&L&&z&&A&&_&&X&&Z?Object(u.jsx)(cr,{userData:t,designSpec:i,graphicVisualCanvas:b,rightInnerOverlayCanvas:f,rightOuterOverlayCanvas:O,rightTexture:L,rightTextureCanvas:w,leftInnerOverlayCanvas:z,leftOuterOverlayCanvas:A,leftTexture:X,leftTextureCanvas:_,redMapCanvas:Z}):Object(u.jsx)("div",{})},lr=P.a.div(sr||(sr=Object(I.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  justify-content: center;\n  padding: 16px;\n"])));var ur,dr,br=function(){return Object(u.jsxs)(lr,{children:[Object(u.jsx)(X,{google:!0,onClick:function(){window.open("http://solecomposer.com/auth/google","_self")},children:"Login With Google"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(X,{children:"Back"})})]})},pr=P.a.div(ur||(ur=Object(I.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n"]))),hr=P.a.p(dr||(dr=Object(I.a)(["\n  font-family: 'Roboto';\n  padding: 0;\n  text-align: center;\n  margin: 0;\n  margin-top: 15px;\n"])));var jr,fr=function(){var e=Object(a.useContext)(D.context);return Object(u.jsxs)(pr,{children:[Object(u.jsx)(hr,{children:e.firstName}),Object(u.jsx)(hr,{children:e.email}),Object(u.jsx)(X,{onClick:function(){window.open("http://solecomposer.com/auth/logout","_self")},children:"Log Out"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(X,{children:"Back"})})]})},xr=P.a.div(jr||(jr=Object(I.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n"])));var gr,vr=function(){return Object(u.jsxs)(xr,{children:[Object(u.jsx)(hr,{children:"404 - PAGE NOT FOUND"}),Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)(X,{children:"Home"})})]})},Or=P.a.div(gr||(gr=Object(I.a)([""])));n(328);var yr=function(){return Object(u.jsx)(Or,{children:Object(u.jsx)(s.a,{children:Object(u.jsx)(D,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:Ye}),Object(u.jsx)(o.a,{exact:!0,path:"/login",component:br}),Object(u.jsx)(o.a,{exact:!0,path:"/profile",component:fr}),Object(u.jsx)(o.a,{exact:!0,path:"/designer",component:or}),Object(u.jsx)(o.a,{exact:!0,path:"/designer/:id",component:or}),Object(u.jsx)(o.a,{path:"*",component:vr})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(yr,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[329,1,2]]]);
//# sourceMappingURL=main.b42de3af.chunk.js.map