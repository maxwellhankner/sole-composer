(this["webpackJsonpsole-composer"]=this["webpackJsonpsole-composer"]||[]).push([[0],{152:function(e,t,a){},154:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},308:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){},354:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(135),i=a.n(s),c=(a(152),a(23)),o=a(21),l=a(13),u=a(1),d=Object(n.createContext)(null),v=function(e){var t=e.children,a=Object(n.useState)(),r=Object(l.a)(a,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){fetch("/auth/getsession",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.err||i(e)}))}),[]),Object(u.jsx)(d.Provider,{value:s,children:t})};v.context=d;var b=v,j=(a(154),a(136)),h=a.n(j);a(188),a(189),a(190);var g=function(){var e=Object(o.f)();return Object(u.jsx)("div",{className:"splash-design-button standard-button",onClick:function(){e.push("/designer")},children:Object(u.jsx)("button",{children:"S T A R T \xa0 D E S I G N I N G"})})};var p=function(){return Object(u.jsxs)("div",{className:"landing-splash-container",children:[Object(u.jsxs)("div",{className:"splash-left",children:[Object(u.jsx)("p",{className:"splash-header",children:"Create Something New"}),Object(u.jsx)("p",{className:"splash-para",children:"Sole Composer gives you the ability to design and visualize one\u2011of\u2011a\u2011kind sneakers."}),Object(u.jsx)(g,{})]}),Object(u.jsx)("div",{className:"splash-right",children:Object(u.jsx)("img",{src:"/sole-cover.png",className:"splash-image"})})]})};a(195);var f=function(){var e=Object(o.f)();return Object(u.jsx)("div",{className:"new-design-button standard-button",onClick:function(){e.push("/designer")},children:Object(u.jsx)("button",{children:"N E W \xa0 D E S I G N"})})};a(196);var O=function(e){var t=e.props,a=t._id,n=t.title,r=t.configId,s=t.author,i=t.screenshot,c=Object(o.f)();return Object(u.jsxs)("div",{className:"featureddesigncard-container",onClick:function(){c.push("/designer/".concat(a))},children:[Object(u.jsx)("div",{className:"featureddesigncard-image",children:Object(u.jsx)("img",{src:"api/assets/images/".concat(i),alt:"feature-design"})}),Object(u.jsx)("p",{className:"featureddesigncard-title",children:n}),Object(u.jsx)("p",{className:"featureddesigncard-model",children:r.modelName}),Object(u.jsx)("p",{className:"featureddesigncard-author",children:s.firstName})]})};a(197);var x,m,y,C,N,w,k,D,S,V,L=function(e){var t=e.myDesigns;return Object(u.jsx)("div",{className:"mydesigntiles-container",children:Object(u.jsx)("div",{className:"my-designs-grid",children:t.map((function(e,t){return Object(u.jsx)(c.b,{to:"/designer/".concat(e._id),className:"link-to-designer",children:Object(u.jsx)("div",{className:"my-design-tile",children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.screenshot),alt:"my-design-preview"})})},t)}))})})},I=function(e,t){return fetch(e,{method:t})},P=function(e,t,a){return fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})},T=a(19),R=a(20),M=R.a.div(x||(x=Object(T.a)(["\n  background-color: #f9f9f9;\n  height: 100%;\n"]))),E=R.a.div(m||(m=Object(T.a)(["\n  z-index: 1;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 22px;\n  color: #f9f9f9;\n  background-color: #000000;\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n\n  a {\n    color: #ffffff;\n    text-decoration: none;\n  }\n"]))),A=R.a.p(y||(y=Object(T.a)(["\n  margin: 0;\n"]))),B=R.a.div(C||(C=Object(T.a)(["\n  width: 100%;\n  max-width: 700px;\n  margin: auto;\n  margin-top: 50px;\n"]))),z=R.a.div(N||(N=Object(T.a)(["\n  margin-top: 8px;\n  margin-bottom: 32px;\n  width: 100%;\n"]))),U=R.a.p(w||(w=Object(T.a)(["\n  font-family: 'Poppins', 'Roboto', 'Ariel';\n  margin: 0px;\n  margin-left: 16px;\n  margin-bottom: 8px;\n  font-size: 24px;\n  font-weight: bold;\n"]))),G=R.a.div(k||(k=Object(T.a)(["\n  margin-bottom: 60px;\n  text-align: center;\n"]))),_="#000000",F=("0.1rem solid ".concat("#000000"),R.a.button(D||(D=Object(T.a)(["\n  box-shadow: none;\n  margin: 0;\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-radius: 5px;\n  width: 100%;\n\n  &:active {\n    box-shadow: none;\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),"#ffffff",_)),W=Object(R.a)(F)(S||(S=Object(T.a)(["\n  height: 40px;\n  background-color: ",";\n  padding: 8px;\n  font-size: 13px;\n  text-transform: capitalize;\n  margin-top: 15px;\n"])),(function(e){return e.google?"#4285f4":_})),Y=Object(R.a)(F)(V||(V=Object(T.a)(["\n  height: 40px;\n  padding: 8px;\n  font-size: 13px;\n  text-transform: capitalize;\n  padding-left: 23px;\n  padding-right: 23px;\n  width: unset;\n"])));var H=function(){var e=Object(n.useContext)(b.context),t=Object(n.useState)(),a=Object(l.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(),o=Object(l.a)(i,2),d=o[0],v=o[1];Object(n.useEffect)((function(){I("/api/featured","GET").then((function(e){return e.json()})).then((function(e){return s(e)})),e&&I("/api/outlines/mydesigns","GET").then((function(e){return e.json()})).then((function(e){return v(e)}))}),[e]);var j=r?r.featured.map((function(t,a){return Object(u.jsx)(O,{props:t,userData:e},a)})):null;return Object(u.jsxs)(M,{children:[Object(u.jsxs)(E,{children:[Object(u.jsxs)(A,{children:[Object(u.jsx)("strong",{children:"Sole"})," Composer"]}),e?Object(u.jsx)(c.b,{to:"/profile",children:e.firstName}):Object(u.jsx)(c.b,{to:"/login",children:"Login"})]}),!e&&Object(u.jsx)(p,{}),Object(u.jsxs)(B,{children:[Object(u.jsxs)(z,{children:[Object(u.jsx)(U,{children:"FEATURED"}),r&&Object(u.jsx)(h.a,{responsive:{0:{items:1.7},700:{items:3}},items:j})]}),e&&Object(u.jsx)(f,{}),!e&&Object(u.jsx)(G,{children:Object(u.jsx)(c.b,{to:"/login",children:Object(u.jsx)(Y,{children:"sign up"})})}),d&&Object(u.jsx)(U,{children:"MY DESIGNS"}),d&&Object(u.jsx)(L,{myDesigns:d})]})]})},J=a(14),X=a.n(J),q=a(17),Z=(a(200),a(201),a(27)),$=a(357),K=a(358),Q=a(3);a(202);var ee=function(){return Object(u.jsx)("div",{id:"loading-screen",children:Object(u.jsx)("div",{id:"loader"})})};a(203);function te(e){var t,a,r=e.design,s=e.texture,i=e.right,c=e.setCurrentPart,o=e.setCurrentShoe,l=e.alone,d=e.setLayersView,v=e.setCurrentLayer,b=e.setView,j=e.redMapCanvas,h=Object(n.useRef)(),g=Object($.a)("/api/assets/models/".concat(r.configData.source.model)).nodes,p=Object(Z.c)(Q.TextureLoader,"/api/assets/designimages/".concat(r.configData.source[i?"aoMapRight":"aoMapLeft"]));p.flipY=!1;var f=function(e){if(e.delta<10){var t=Math.floor(1e3*e.uv.x),a=Math.floor(1e3*e.uv.y),n=function(e){switch(e){case 255:return 4;case 220:return 2;case 210:return 0;case 200:return 5;case 190:return 3;case 180:return 1;case 170:return 16;case 160:return 15;case 150:return 14;case 140:return 9;case 130:return 13;case 120:return 11;case 110:return 12;case 100:return 8;case 90:return 10;case 80:return 7;case 70:return 6;case 60:return 17}}(j.getContext("2d").getImageData(t,a,1,1).data[0]);(n||0===n)&&(d("LayerOverview"),v(-1),b("Layers"),c(n),o(i?"right":"left"))}};return Object(u.jsx)("group",{ref:h,dispose:null,onPointerDown:function(e){return function(e){e.stopPropagation(),t=e.clientX,a=e.clientY}(e)},onPointerUp:function(e){return function(e){e.stopPropagation(),e.clientX>t-5&&e.clientX<t+5&&e.clientY>a-5&&e.clientY<a+5&&f(e)}(e)},children:Object(u.jsx)("mesh",{geometry:g.af1.geometry,rotation:[Math.PI/2,0,Math.PI/2],position:[0,-1,l?0:i?1.3:-1.3],scale:[i?.35:-.35,.35,.35],children:Object(u.jsx)("meshStandardMaterial",{aoMap:p,map:s})})})}var ae=function(e){var t=e.design,a=e.rightTexture,r=e.leftTexture,s=e.texturesLoaded,i=e.setCurrentPart,c=e.setCurrentShoe,o=e.shoeVisibility,l=e.setLayersView,d=e.setCurrentLayer,v=e.setView,b=e.redMapCanvas,j=e.cameraReset,h=e.setCameraReset;function g(e){e.reset&&(Object(Z.d)().camera.position.set(5.5,1.5,5.5),h(!1));return null}return Object(u.jsxs)("div",{className:"scene-container",id:"scene-container-id",children:[Object(u.jsxs)(Z.a,{camera:{fov:45},linear:!0,dpr:3,gl:{preserveDrawingBuffer:!0},children:[Object(u.jsx)(g,{reset:j}),Object(u.jsx)("ambientLight",{}),Object(u.jsxs)(n.Suspense,{fallback:null,children:[o.right&&Object(u.jsx)(te,{right:!0,design:t,texture:a,setCurrentPart:i,setCurrentShoe:c,alone:!o.left,setLayersView:l,setCurrentLayer:d,setView:v,redMapCanvas:b}),o.left&&Object(u.jsx)(te,{design:t,texture:r,setCurrentPart:i,setCurrentShoe:c,alone:!o.right,setLayersView:l,setCurrentLayer:d,setView:v,redMapCanvas:b})]}),Object(u.jsx)(K.a,{minPolarAngle:Math.PI/4,maxPolarAngle:3*Math.PI/4,minDistance:4,maxDistance:12,enablePan:!1,enableDamping:!0})]}),!s&&Object(u.jsx)(ee,{})]})},ne=(a(205),a(206),function(e,t){var a=new FormData;return t?a.append("image",e,"newImage"):a.append("image",e),fetch("/api/assets/uploadimage",{method:"POST",body:a}).then((function(e){return e.json()}))}),re=function(e){return new Promise((function(t){setTimeout((function(){var a=document.getElementById("scene-container-id").firstElementChild.firstElementChild,n=document.createElement("canvas");n.width=1024,n.height=1024,n.getContext("2d").drawImage(a,0,0,1024,1024);for(var r=n.toDataURL("image/png"),s=atob(r.split(",")[1]),i=[],c=0;c<s.length;c++)i.push(s.charCodeAt(c));var o=new Blob([new Uint8Array(i)],{type:"image/png"});o.name="theBlob",o.lastModifiedDate=new Date;var l=new File([o],e,{type:"image/png"});t(l)}),500)}))},se=function(e){var t=e.split("/");return t=t[t.length-1]},ie=a(16),ce=a(11);a(207);var oe=function(e){var t=e.currentShoe,a=e.setCurrentShoe,n=e.visibility,r=e.setVisibility,s=function(e){if("right"===e&&e!==t)if(n.right)a(e);else{var s=Object(ce.a)({},n);s.right=!0,s.left=!1,r(s),a(e)}else if("left"===e&&e!==t)if(n.left)a(e);else{var i=Object(ce.a)({},n);i.right=!1,i.left=!0,r(i),a(e)}},i=function(e){if(1===e){if("left"===t){n.right;var s=Object(ce.a)({},n);s.right=!s.right,r(s)}else if("right"===t)if(n.left){var i=Object(ce.a)({},n);i.right=!1,r(i),a("left")}else{var c=Object(ce.a)({},n);c.right=!c.right,c.left=!c.left,r(c),a("left")}}else if(2===e)if("right"===t){n.left;var o=Object(ce.a)({},n);o.left=!o.left,r(o)}else if("left"===t)if(n.right){var l=Object(ce.a)({},n);l.left=!1,r(l),a("right")}else{var u=Object(ce.a)({},n);u.right=!u.right,u.left=!u.left,r(u),a("right")}};return Object(u.jsxs)("div",{className:"design-preview-toggle-container",children:[Object(u.jsxs)("div",{className:"design-preview-toggle-left",children:[Object(u.jsx)("div",{className:"design-preview-toggle-shoe ".concat("right"===t?null:"disabled-shoe"),onClick:function(){s("right")},children:Object(u.jsx)("p",{children:"Right"})}),Object(u.jsx)("div",{className:"design-preview-toggle-shoe ".concat("left"===t?null:"disabled-shoe"),onClick:function(){s("left")},children:Object(u.jsx)("p",{children:"Left"})})]}),Object(u.jsxs)("div",{className:"design-preview-toggle-right",children:[Object(u.jsx)("div",{className:"design-preview-toggle-visible ".concat(n.right?null:"disabled-visibility"),onClick:function(){i(1)},children:Object(u.jsx)(ie.l,{})}),Object(u.jsx)("div",{className:"design-preview-toggle-visible ".concat(n.left?null:"disabled-visibility"),onClick:function(){i(2)},children:Object(u.jsx)(ie.l,{})})]})]})};var le=function(e){var t,a=e.handleViewChange,r=e.design,s=e.canSave,i=e.setCanSave,o=e.userData,d=e.currentShoe,v=e.setCurrentShoe,b=e.shoeVisibility,j=e.setShoeVisibility,h=e.setCameraReset,g=Object(n.useState)(!1),p=Object(l.a)(g,2),f=p[0],O=p[1];"object"===typeof o&&"_id"in o&&(t=o._id);var x=function(){var e=Object(q.a)(X.a.mark((function e(){var t,a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=26;break}if(i(!1),r.author){e.next=11;break}return O(!0),h(!0),e.next=7,re("newImage");case 7:t=e.sent,ne(t,!0).then((function(e){var t=se(e.image),a={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};P("/api/outlines","POST",a).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))})),e.next=26;break;case 11:if(r.author!==o._id){e.next=20;break}return O(!0),h(!0),e.next=16,re(r.screenshot);case 16:a=e.sent,ne(a,!1).then((function(e){var t=se(e.image),a={author:r.author,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};P("/api/outlines/".concat(r._id),"PUT",a),O(!1)})),e.next=26;break;case 20:return O(!0),h(!0),e.next=24,re(r.screenshot);case 24:n=e.sent,ne(n,!0).then((function(e){var t=se(e.image),a={author:o._id,title:r.title,screenshot:t,configId:"5f925589cc6d6c16e44d5dfd",outlineData:r.outlineData};P("/api/outlines/","POST",a).then((function(e){return e.json()})).then((function(e){window.location.href="/designer/".concat(e._id)}))}));case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f?Object(u.jsx)("div",{className:"design-preview-container",children:Object(u.jsx)("div",{id:"loading-small",children:Object(u.jsx)("div",{id:"loader"})})}):Object(u.jsxs)("div",{className:"design-preview-container",children:[Object(u.jsx)("div",{className:"design-preview-info",children:Object(u.jsxs)("div",{className:"design-title-container",children:[Object(u.jsx)("p",{className:"design-title",children:r.title}),Object(u.jsx)("button",{className:"edit-design-title-button",onClick:function(){return a("ChangeDesignName")},children:Object(u.jsx)(ie.n,{})})]})}),Object(u.jsxs)("div",{className:"design-preview-buttons",children:[Object(u.jsx)(oe,{currentShoe:d,setCurrentShoe:v,visibility:b,setVisibility:j}),Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){return a("ChangeBaseColor")},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",style:{color:r.outlineData.baseColors[d]},children:Object(u.jsx)(ie.q,{})}),Object(u.jsx)("button",{children:"Base Color"})]}),Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){return a("Layers")},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(ie.m,{})}),Object(u.jsx)("button",{children:"Layers"})]}),Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){return h(!0)},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(ie.f,{})}),Object(u.jsx)("button",{children:"Reset Camera"})]}),s&&o?Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){x()},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(ie.p,{})}),Object(u.jsx)("button",{children:"Save"})]}):Object(u.jsxs)("div",{className:"design-preview-button save-deactivated",children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(ie.p,{})}),Object(u.jsx)("button",{children:"Save"})]}),o&&r.author===t?Object(u.jsxs)("div",{className:"design-preview-button",onClick:function(){o&&o._id===r.author&&(fetch("/api/outlines/".concat(r._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}),window.location.href="/")},children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(ie.s,{})}),Object(u.jsx)("button",{children:"Delete"})]}):Object(u.jsxs)("div",{className:"design-preview-button save-deactivated",children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(ie.s,{})}),Object(u.jsx)("button",{children:"Delete"})]}),Object(u.jsx)(c.b,{to:"/",children:Object(u.jsxs)("div",{className:"design-preview-button",children:[Object(u.jsx)("div",{className:"design-preview-button-icon",children:Object(u.jsx)(ie.r,{})}),Object(u.jsx)("button",{children:"Exit"})]})})]})]})};a(208);var ue=function(e){var t=e.props,a=t.design,n=t.currentPartName,r=t.handleAddLayer,s=t.setLayersView;return Object(u.jsxs)("div",{className:"design-preview-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:"Select Layer Type"})}),a.configData.layerTypes[n].types.map((function(e,t){return Object(u.jsx)("div",{className:"standard-button",children:"Mask"===e?Object(u.jsx)("button",{onClick:function(){s("MaskTypes")},children:e}):"Graphic"===e?Object(u.jsx)("button",{onClick:function(){s("GraphicPicker")},children:e}):Object(u.jsx)("button",{onClick:function(){r(e),s("LayerOverview")},children:e})},t)})),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return s("LayerOverview")},children:"Cancel"})})]})},de=(a(209),function(e){var t=e.split(/(?=[A-Z])/).join(" ");return t.charAt(0).toUpperCase()+t.substr(1)});a(210);var ve=function(e){var t=e.colorsArray,a=e.handleColorChange;return Object(u.jsx)("div",{className:"current-colors-container",children:Object(u.jsx)("div",{className:"current-colors-scroll",children:t.map((function(e,t){return Object(u.jsx)("button",{style:{backgroundColor:e},onClick:function(){return a(e)}},t)}))})})},be=(a(211),a(147)),je=(a(308),function(){return Object(u.jsx)("div",{className:"custom-pointer"})}),he=a(77),ge=Object(be.a)((function(e){var t=e.hex,a=e.hsl,n=e.hsv,r=e.onChange,s={hue:{height:18,position:"relative",marginBottom:9,overflow:"hidden"},saturation:{width:"100%",height:120,position:"relative",marginBottom:9,overflow:"hidden"},input:{width:"47%",height:"30px",border:"none",borderRadius:"none",fontSize:".7rem",WebkitAppearance:"none",WebkitBorderRadius:0,boxShadow:"none",display:"block",paddingLeft:"3%",paddingRight:"0px"},swatch:{width:"100%",height:"100%",background:t},inputContainer:{background:t}};return Object(u.jsxs)("div",{className:"custom-color",children:[Object(u.jsx)("div",{style:s.hue,children:Object(u.jsx)(he.Hue,{hsl:a,onChange:r,pointer:je})}),Object(u.jsx)("div",{style:s.saturation,children:Object(u.jsx)(he.Saturation,{hsl:a,hsv:n,onChange:r,pointer:je})}),Object(u.jsx)("div",{className:"color-input",style:s.inputContainer,children:Object(u.jsx)(he.EditableInput,{style:{input:s.input},className:"custom-color-input",value:t,onChange:r})})]})}));var pe=function(e){var t=e.props,a=t.currentLayer,r=t.currentPartName,s=t.design,i=t.handleChangeManager,c=t.setLayersView,o=t.setCanSave,d=t.currentShoe,v=Object(n.useState)("#ffffaa"),b=Object(l.a)(v,2),j=b[0],h=b[1],g=Object(n.useState)([]),p=Object(l.a)(g,2),f=p[0],O=p[1];Object(n.useEffect)((function(){O(function(){var e=[];for(var t in s.outlineData.parts){for(var a in s.outlineData.parts[t].right){var n=s.outlineData.parts[t].right[a].type;if("color"===n||"mask"===n){var r=s.outlineData.parts[t].right[a].color;e.includes(r)||e.push(r)}}for(var i in s.outlineData.parts[t].left){var c=s.outlineData.parts[t].left[i].type;if("color"===c||"mask"===c){var o=s.outlineData.parts[t].left[i].color;e.includes(o)||e.push(o)}}}for(var l in s.outlineData.overlays){for(var u in s.outlineData.overlays[l].right)if("color"===s.outlineData.overlays[l].right[u].type){var d=s.outlineData.overlays[l].right[u].color;e.includes(d)||e.push(d)}for(var v in s.outlineData.overlays[l].left)if("color"===s.outlineData.overlays[l].left[v].type){var b=s.outlineData.overlays[l].left[v].color;e.includes(b)||e.push(b)}}var j=s.outlineData.baseColors.right;e.includes(j)||e.push(j);var h=s.outlineData.baseColors.left;return e.includes(h)||e.push(h),e}()),h("outerOverlay"===r||"innerOverlay"===r?s.outlineData.overlays[r][d][a].color:s.outlineData.parts[r][d][a].color)}),[s,r,a,O,d]);var x=function(e){o(!0);var t=e.hex||e;h(e),i({type:"color-changed",partName:r,layerIndex:a,newColor:t})};return Object(u.jsxs)("div",{className:"color-picker-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:de(r)})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return x("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random Color"})}),Object(u.jsx)("div",{children:Object(u.jsx)(ve,{colorsArray:f,handleColorChange:x})}),Object(u.jsx)("div",{children:Object(u.jsx)(ge,{color:j,onChangeComplete:x})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return c("LayerOverview")},children:"Back"})})]})};a(343);var fe=function(e){var t=e.props,a=t.currentLayer,r=t.currentPartName,s=t.graphicVisualCanvas,i=t.handleChangeManager,c=t.handleUpdateGraphicVisualCanvas,o=t.setLayersView,l=t.setCanSave,d=t.currentShoe,v=function(e,t){l(!0),i({type:"graphic-moved",partName:r,layerIndex:a,direction:e,distance:t})};return Object(n.useEffect)((function(){!function(){var e=document.getElementById("graphic-visual-container");e.innerHTML="",e.appendChild(s)}(),c(r)}),[]),Object(u.jsxs)("div",{className:"graphic-editor-container",children:[Object(u.jsxs)("div",{className:"graphic-editor-upper",children:[Object(u.jsxs)("div",{className:"graphic-editor-buttons",id:"edit-buttons-div",children:[Object(u.jsx)("button",{className:"graphic-edit-button",id:"up-button",onClick:function(){return v("vert",-30)},children:Object(u.jsx)(ie.d,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"down-button",onClick:function(){return v("vert",30)},children:Object(u.jsx)(ie.a,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"left-button",onClick:function(){return v("hor",-30)},children:Object(u.jsx)(ie.b,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"right-button",onClick:function(){return v("hor",30)},children:Object(u.jsx)(ie.c,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"scale-up-button",onClick:function(){return v("scale",1.1)},children:Object(u.jsx)(ie.e,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"scale-down-button",onClick:function(){return v("scale",.9)},children:Object(u.jsx)(ie.k,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"clockwise-button",onClick:function(){return v("rotate",5)},children:Object(u.jsx)(ie.o,{})}),Object(u.jsx)("button",{className:"graphic-edit-button",id:"counterclockwise-button",onClick:function(){return v("rotate",-5)},children:Object(u.jsx)(ie.t,{})})]}),Object(u.jsx)("div",{id:"graphic-visual-container",className:"left"===d?"mirror-graphic-visual":null})]}),Object(u.jsxs)("div",{className:"graphic-editor-lower",children:[Object(u.jsx)("div",{className:"standard-button graphic-editor-lower-button",children:Object(u.jsx)("button",{onClick:function(){return v("reset",0)},children:"Reset"})}),Object(u.jsx)("div",{className:"standard-button graphic-editor-lower-button",children:Object(u.jsx)("button",{onClick:function(){return o("LayerOverview")},children:"Back"})})]})]})};a(344),a(345);var Oe=function(e){var t=e.design,a=e.currentPart,n=e.setCurrentPart,r=e.setCurrentLayer,s=e.setLayersView,i=t.configData.partsArray.length,c=t.configData.partsArray,o=function(e){n(0===a&&e<0?i-1:a===i-1&&e>0?0:a+e)};return Object(u.jsx)("div",{className:"part-selector-container",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"change-part-button",onClick:function(){o(-1),r(-1)},children:Object(u.jsx)(ie.h,{})}),Object(u.jsx)("button",{className:"partname-button",onClick:function(){s("PartList")},children:de(c[a])}),Object(u.jsx)("button",{className:"change-part-button",onClick:function(){o(1),r(-1)},children:Object(u.jsx)(ie.i,{})})]})})};var xe=function(e){var t=e.props,a=t.allLayers,n=t.currentPart,r=t.design,s=t.currentLayer,i=t.handleViewChange,c=t.numberOfLayers,o=t.setCurrentLayer,l=t.setCurrentPart,d=t.setLayersView,v=t.handleDeleteLayer,b=t.handleEditLayer,j=t.handleMoveLayer;return Object(u.jsxs)("div",{className:"layers-view-container",onClick:function(e){"layers-view-container"===e.target.className&&o(-1)},children:[Object(u.jsx)(Oe,{design:r,currentPart:n,setCurrentPart:l,setCurrentLayer:o,setLayersView:d}),Object(u.jsx)("div",{className:"add-layer-button",children:Object(u.jsx)("button",{onClick:function(){return d("AddLayerType")},children:"Add Layer"})}),Object(u.jsx)("div",{className:"layers-box-container",children:a.map((function(e,t){return Object(u.jsxs)("div",{className:"layer-list-items",children:[Object(u.jsxs)("div",{className:"layer-list-item-end ".concat(s!==t?"hide-edit-buttons":""),children:[Object(u.jsx)("div",{className:"edit-layer-button ".concat(t===c-1?"edit-layer-button-dead":""),children:Object(u.jsx)("button",{onClick:t===c-1?null:function(){return j(t,1)},children:Object(u.jsx)(ie.j,{})})}),Object(u.jsx)("div",{className:"edit-layer-button ".concat(0===t?"edit-layer-button-dead":""),children:Object(u.jsx)("button",{onClick:0===t?null:function(){return j(t,-1)},children:Object(u.jsx)(ie.g,{})})})]}),Object(u.jsxs)("div",{className:"layer-list-item-middle",onClick:function(){t===s?b(t,e):o(t)},children:[Object(u.jsx)("div",{className:"layer-list-item-left ".concat(s===t?"focus-layer-highlight":""),children:Object(u.jsx)("div",{className:"layer-list-item-type",children:"overlay"===e.type?de(e.source).toLowerCase():e.type})}),"color"===e.type?Object(u.jsx)("div",{className:"layer-list-item-right",style:{backgroundColor:e.color}}):"graphic"===e.type?Object(u.jsx)("div",{className:"layer-list-item-right",children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):"mask"===e.type?Object(u.jsx)("div",{className:"layer-list-item-right",children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.link),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})}):Object(u.jsx)("div",{className:"layer-list-item-right",children:Object(u.jsx)("img",{src:"/api/assets/designimages/".concat(e.source,"Mask.png"),style:{width:"100%",height:"100%",objectFit:"cover"},alt:"design-graphic"})})]}),Object(u.jsxs)("div",{className:"layer-list-item-end ".concat(s!==t?"hide-edit-buttons":""),children:[Object(u.jsx)("div",{className:"edit-layer-button",children:Object(u.jsx)("button",{onClick:function(){b(t,e)},children:Object(u.jsx)(ie.n,{})})}),"overlay"===e.type?Object(u.jsx)("div",{className:"edit-layer-button edit-layer-button-dead",children:Object(u.jsx)("button",{children:Object(u.jsx)(ie.r,{})})}):Object(u.jsx)("div",{className:"edit-layer-button",children:Object(u.jsx)("button",{onClick:function(){return v(t)},children:Object(u.jsx)(ie.r,{})})})]})]},t)}))}),Object(u.jsx)("div",{className:"standard-button layer-back-button",children:Object(u.jsx)("button",{onClick:function(){o(-1),i("DesignPreview")},children:"Back"})})]})};a(346);var me=function(e){var t=e.props,a=t.design,n=t.currentPartName,r=t.handleAddMaskLayer,s=t.setLayersView;return Object(u.jsxs)("div",{className:"design-preview-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:"Select Mask Type"})}),a.configData.maskTypes[n].map((function(e,t){return Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){r(e[0],e[1]),s("LayerOverview")},children:e[0]})},t)})),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return s("LayerOverview")},children:"Cancel"})})]})};a(347);var ye=function(e){var t=e.props,a=t.design,n=t.setCurrentPart,r=t.setLayersView,s=t.setCurrentLayer;return Object(u.jsxs)("div",{className:"partlist-container",children:[Object(u.jsx)("div",{className:"partlist-title",children:Object(u.jsx)("p",{children:"Parts"})}),Object(u.jsx)("div",{className:"partlist-buttons",children:a.configData.partsArray.map((function(e,t){return Object(u.jsx)("div",{className:"standard-button part-list-button",children:Object(u.jsx)("button",{onClick:function(){s(-1),n(t),r("LayerOverview")},children:e})},t)}))}),Object(u.jsx)("div",{className:"standard-button bottom-button",children:Object(u.jsx)("button",{onClick:function(){return r("LayerOverview")},children:"Back"})})]})};a(348),a(349);var Ce=function(e){var t=e.graphicsArray,a=e.handleAddGraphicLayer;return Object(u.jsx)("div",{className:"current-graphics-container",children:t.map((function(e,t){return Object(u.jsx)("div",{className:"current-graphics-item",onClick:function(){return a(e)},children:Object(u.jsx)("img",{src:"/api/assets/images/".concat(e),alt:"used-already"})},t)}))})};var Ne={AddLayerType:ue,ColorPicker:pe,GraphicEditor:fe,LayerOverview:xe,MaskTypes:me,PartList:ye,GraphicPicker:function(e){var t=e.props,a=t.setLayersView,r=t.handleAddLayer,s=t.design,i=Object(n.useState)(!1),c=Object(l.a)(i,2),o=c[0],d=c[1],v=Object(n.useState)(!1),b=Object(l.a)(v,2),j=b[0],h=b[1],g=Object(n.useState)(),p=Object(l.a)(g,2),f=p[0],O=p[1];Object(n.useEffect)((function(){O(function(){var e=["red-apple.png"];for(var t in s.outlineData.parts){for(var a in s.outlineData.parts[t].right)if("graphic"===s.outlineData.parts[t].right[a].type){var n=s.outlineData.parts[t].right[a].link;e.includes(n)||e.push(n)}for(var r in s.outlineData.parts[t].left)if("graphic"===s.outlineData.parts[t].left[r].type){var i=s.outlineData.parts[t].left[r].link;e.includes(i)||e.push(i)}}for(var c in s.outlineData.overlays){for(var o in s.outlineData.overlays[c].right)if("graphic"===s.outlineData.overlays[c].right[o].type){var l=s.outlineData.overlays[c].right[o].link;e.includes(l)||e.push(l)}for(var u in s.outlineData.overlays[c].left)if("graphic"===s.outlineData.overlays[c].left[u].type){var d=s.outlineData.overlays[c].left[u].link;e.includes(d)||e.push(d)}}return e[0]?e:null}())}),[s]);var x=function(){var e=Object(q.a)(X.a.mark((function e(t){var a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t.target.files[0].size/1024/1024).toFixed(4)<2)){e.next=8;break}return h(!0),a=t.target.files[0],e.next=6,ne(a,!0).then((function(e){var t=se(e.image);m(t)}));case 6:e.next=9;break;case 8:d(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){r("Graphic",e),a("LayerOverview")};return j?Object(u.jsx)("div",{className:"upload-image-container",children:Object(u.jsx)("div",{id:"loading-small",children:Object(u.jsx)("div",{id:"loader"})})}):Object(u.jsxs)("div",{className:"upload-image-container",children:[f&&Object(u.jsx)("div",{className:"used-graphics",children:Object(u.jsx)(Ce,{graphicsArray:f,handleAddGraphicLayer:m})}),Object(u.jsx)("div",{className:"upload-image-input",children:Object(u.jsxs)("label",{htmlFor:"image-input-id",className:"upload-image-label",children:[Object(u.jsx)("input",{onChange:function(e){return x(e)},id:"image-input-id",type:"file",name:"myImage",accept:"image/png, image/jpeg, .png, .jpg"}),"Upload"]})}),o&&Object(u.jsx)("div",{className:"file-size-warning",children:Object(u.jsx)("p",{children:"file must be less that 2MB."})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return a("LayerOverview")},children:"Cancel"})})]})}};a(350);var we=function(e){var t=e.layersView,a=e.setLayersView,n=e.currentLayer,r=e.currentPart,s=e.design,i=e.graphicVisualCanvas,c=e.handleChangeManager,o=e.handleUpdateGraphicVisualCanvas,l=e.handleViewChange,d=e.setCurrentLayer,v=e.setCurrentPart,b=e.setCanSave,j=e.currentShoe,h=Object.keys(s.configData.partsObject)[r],g="parts";"outerOverlay"!==h&&"innerOverlay"!==h||(g="overlays");var p=s.outlineData[g][h][j].length,f=s.outlineData[g][h][j],O=Ne[t],x={allLayers:f,currentPart:r,currentLayer:n,currentPartName:h,design:s,graphicVisualCanvas:i,handleAddLayer:function(e,t){b(!0),c(Object(ce.a)({type:"layer-added",partName:h,layerType:e},t&&{fileName:t})),d(p)},handleAddMaskLayer:function(e,t){b(!0),c({type:"layer-added",partName:h,layerType:"Mask",maskType:e,maskLink:t}),d(p)},handleMoveLayer:function(e,t){b(!0),c({type:"layer-moved",partName:h,layerIndex:e,direction:t}),d(n+t)},handleEditLayer:function(e,t){"color"===t.type?(d(e),a("ColorPicker")):"graphic"===t.type?(d(e),a("GraphicEditor")):"mask"===t.type?(d(e),a("ColorPicker")):"overlay"===t.type&&(v(s.configData.partsArray.indexOf(t.source)),d(-1))},handleDeleteLayer:function(e){b(!0),c({type:"layer-deleted",partName:h,layerIndex:e}),d(-1)},handleChangeManager:c,handleUpdateGraphicVisualCanvas:o,handleViewChange:l,setCurrentLayer:d,setCurrentPart:v,setLayersView:a,numberOfLayers:p,setCanSave:b,currentShoe:j,layersView:t};return Object(u.jsx)(O,{props:x})},ke=(a(351),a(35));var De=function(e){var t=e.handleViewChange,a=e.design,n=e.setDesign,r=e.setCanSave;return Object(u.jsxs)("div",{className:"changedesignname-container",children:[Object(u.jsx)("div",{className:"view-title",children:Object(u.jsx)("p",{children:"Change Design Name"})}),Object(u.jsx)("div",{className:"designer-input-div",children:Object(u.jsx)("input",{type:"text",id:"design-name-input",className:"designer-input",defaultValue:a.title})}),Object(u.jsx)("div",{className:"standard-button",children:Object(u.jsx)("button",{onClick:function(){return function(){var e=Object(ke.cloneDeep)(a),s=Object(ke.startCase)(document.getElementById("design-name-input").value);e.title=s,r(!0),n(e),t("DesignPreview")}()},children:"Done"})})]})};a(352);var Se=function(e){var t=e.handleViewChange,a=e.design,r=e.setDesign,s=e.setCanSave,i=e.handleUpdateBaseColor,c=e.currentShoe,o=e.setCurrentShoe,d=Object(n.useState)(a.outlineData.baseColors.left===a.outlineData.baseColors.right?"both":c),v=Object(l.a)(d,2),b=v[0],j=v[1],h=Object(n.useState)(a.outlineData.baseColors[c]),g=Object(l.a)(h,2),p=g[0],f=g[1],O=function(e){var t=e.hex||e;f(t)},x=function(e){j(e),"right"!==e&&"left"!==e||(o(e),f(a.outlineData.baseColors[e]))};return Object(u.jsxs)("div",{className:"change-base-color-container",children:[Object(u.jsx)("div",{className:"base-color-selector",children:Object(u.jsx)(ge,{color:p,onChangeComplete:O})}),Object(u.jsxs)("div",{className:"base-color-buttons",children:[Object(u.jsx)("div",{className:"base-color-radio",children:Object(u.jsxs)("div",{className:"radio-container",children:[Object(u.jsx)("div",{className:"radio-option ".concat("left"===b?"radio-active":null),onClick:function(){x("left")},children:Object(u.jsx)("p",{children:"Left"})}),Object(u.jsx)("div",{className:"radio-option ".concat("both"===b?"radio-active":null),onClick:function(){x("both")},children:Object(u.jsx)("p",{children:"Both"})}),Object(u.jsx)("div",{className:"radio-option ".concat("right"===b?"radio-active":null),onClick:function(){x("right")},children:Object(u.jsx)("p",{children:"Right"})})]})}),Object(u.jsx)("div",{className:"base-color-button",children:Object(u.jsx)("button",{onClick:function(){return O("#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6))},children:"Random"})}),Object(u.jsx)("div",{className:"base-color-button",children:Object(u.jsx)("button",{onClick:function(){return function(){var e=Object(ke.cloneDeep)(a);"left"===b?e.outlineData.baseColors.left=p:"right"===b?e.outlineData.baseColors.right=p:"both"===b&&(e.outlineData.baseColors.left=p,e.outlineData.baseColors.right=p),s(!0),r(e),i(e)}()},children:"Apply"})}),Object(u.jsx)("div",{className:"base-color-button",children:Object(u.jsx)("button",{onClick:function(){return t("DesignPreview")},children:"Done"})})]})]})};var Ve=function(e){var t=e.design,a=e.setDesign,r=e.graphicVisualCanvas,s=e.handleUpdateGraphicVisualCanvas,i=e.handleChangeManager,c=e.handleUpdateBaseColor,o=e.userData,d=e.currentPart,v=e.setCurrentPart,b=e.currentShoe,j=e.setCurrentShoe,h=e.shoeVisibility,g=e.setShoeVisibility,p=e.view,f=e.setView,O=e.layersView,x=e.setLayersView,m=e.currentLayer,y=e.setCurrentLayer,C=e.setCameraReset,N=Object(n.useState)(!1),w=Object(l.a)(N,2),k=w[0],D=w[1],S=function(e){f(e)};return"DesignPreview"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(le,{handleViewChange:S,design:t,setDesign:a,canSave:k,setCanSave:D,userData:o,currentShoe:b,setCurrentShoe:j,shoeVisibility:h,setShoeVisibility:g,setCameraReset:C})}):"Layers"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(we,{layersView:O,setLayersView:x,handleViewChange:S,design:t,setDesign:a,currentShoe:b,currentPart:d,setCurrentPart:v,currentLayer:m,setCurrentLayer:y,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:s,handleChangeManager:i,setCanSave:D})}):"ChangeDesignName"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(De,{handleViewChange:S,design:t,setDesign:a,setCanSave:D})}):"ChangeBaseColor"===p?Object(u.jsx)("div",{className:"interface-container",children:Object(u.jsx)(Se,{handleViewChange:S,design:t,setDesign:a,setCanSave:D,handleUpdateBaseColor:c,currentShoe:b,setCurrentShoe:j})}):void 0},Le=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s,i,c,o,l,u,d,v,b,j,h,g,p,f,O,x;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.setTexturesLoaded,n=t.design,r=t.graphicVisualCanvas,s=t.rightInnerOverlayCanvas,i=t.rightOuterOverlayCanvas,c=t.rightTexture,o=t.rightTextureCanvas,l=t.leftInnerOverlayCanvas,u=t.leftOuterOverlayCanvas,d=t.leftTexture,v=t.leftTextureCanvas,b=t.rightCanvasObjectRef,j=t.rightOverlaysCanvasObjectRef,h=t.rightBaseColorCanvasObjectRef,g=t.leftBaseColorCanvasObjectRef,p=t.leftCanvasObjectRef,f=t.leftOverlaysCanvasObjectRef,e.next=3,Ge({design:n,type:"overlaysCanvasObject",currentShoe:"right"});case 3:return j.current=e.sent,e.next=6,Ge({design:n,type:"overlaysCanvasObject",currentShoe:"left"});case 6:return f.current=e.sent,_e({design:n,overlayCanvasObject:j.current,overlayCanvas:i,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),_e({design:n,overlayCanvasObject:f.current,overlayCanvas:u,partName:"outerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),_e({design:n,overlayCanvasObject:j.current,overlayCanvas:s,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"right"}),_e({design:n,overlayCanvasObject:f.current,overlayCanvas:l,partName:"innerOverlay",graphicVisualCanvas:r,currentShoe:"left"}),e.next=13,Ge({design:n,type:"partsCanvasObject",overlays:[i,s],currentShoe:"right"});case 13:return b.current=e.sent,e.next=16,Ge({design:n,type:"partsCanvasObject",overlays:[u,l],currentShoe:"left"});case 16:return p.current=e.sent,e.next=19,Ge({design:n,type:"baseColorCanvasObject",currentShoe:"right"});case 19:return h.current=e.sent,e.next=22,Ge({design:n,type:"baseColorCanvasObject",currentShoe:"left"});case 22:return g.current=e.sent,e.next=25,tt({design:n,canvasObject:b.current,baseColorCanvasObject:h.current});case 25:return O=e.sent,e.next=28,tt({design:n,canvasObject:p.current,baseColorCanvasObject:g.current});case 28:x=e.sent,o.getContext("2d").drawImage(O,0,0),c.needsUpdate=!0,v.getContext("2d").drawImage(x,0,0),d.needsUpdate=!0,a(!0);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(e){var t=new Q.CanvasTexture(e);return t.flipY=!1,t},Pe=function(e){var t=e.design;return new Promise((function(e){var a=t.configData.canvasSize,n=document.createElement("canvas");n.width=a,n.height=a;var r=n.getContext("2d");!function t(){null!==r&&"object"===typeof n?(r.fillStyle="#ffffff",r.fillRect(0,0,a,a),e(n)):setTimeout(t,100)}()}))},Te=function(e){var t=e.design;return new Promise((function(e){var a=t.configData.canvasSize,n=document.createElement("canvas");n.width=a,n.height=a;var r=n.getContext("2d"),s=new Image;s.src="/api/assets/designimages/".concat(t.configData.source.redMap),s.onload=function(){!function t(){null!==r&&"object"===typeof n?(r.drawImage(s,0,0,1e3,1e3),e(n)):setTimeout(t,100)}()}}))},Re=function(e){var t=e.design.configData.canvasSize,a=document.createElement("canvas");return a.id="graphic-visual-canvas",a.width=t,a.height=t,a},Me=function(e){var t=e.design,a=e.layer,n=e.partName;return new Promise((function(e){var r=t.configData.partsObject[n].mask,s=a.color,i=t.configData.canvasSize,c=document.createElement("canvas");c.width=i,c.height=i;var o=c.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof c?(o.drawImage(l,0,0,i,i),o.globalCompositeOperation="source-in",o.fillStyle=s,o.fillRect(0,0,i,i),e(c)):setTimeout(t,100)}()}}))},Ee=function(e){var t=e.design,a=e.layer,n=e.partName,r=e.currentShoe;return new Promise((function(e){var s=t.configData.partsObject[n].mask,i=a.link,c=a.x,o=a.y,l=a.scale,u=a.rotation,d=t.configData.canvasSize,v=document.createElement("canvas");v.width=d,v.height=d;var b=v.getContext("2d"),j=new Image;j.src="/api/assets/images/".concat(i),j.onload=function(){var t=j.width,a=j.height,n=Math.round(Math.sqrt(t*t+a*a)),i=document.createElement("canvas");i.id="pythagorean-canvas",i.width=n,i.height=n;var h=i.getContext("2d");!function t(){if(null!==h&&"object"===typeof i&&null!==b&&"object"===typeof v){h.translate(i.width/2,i.height/2),h.rotate(u*Math.PI/180),h.drawImage(j,j.width/-2,j.height/-2,j.width,j.height);var a=new Image;a.src="/api/assets/designimages/".concat(s),a.onload=function(){b.drawImage(a,0,0,d,d),b.globalCompositeOperation="source-in";var t=c+(d-d*l)/2,n=o+(d-d*l)/2,s=d*l;"left"===r&&(b.scale(-1,1),b.translate(-d,0)),b.drawImage(i,t,n,s,s),e(v)}}else setTimeout(t,100)}()}}))},Ae=function(e){var t=e.design,a=e.layer,n=e.currentShoe;return new Promise((function(e){var r=a.link,s=a.color,i=t.configData.canvasSize,c=document.createElement("canvas");c.width=i,c.height=i;var o=c.getContext("2d"),l=new Image;l.src="/api/assets/designimages/".concat(r),l.onload=function(){!function t(){null!==o&&"object"===typeof c?("left"===n&&"heelWingLogoMask.png"===r&&(o.scale(-1,1),o.translate(-i,0)),o.drawImage(l,0,0,i,i),o.globalCompositeOperation="source-in",o.fillStyle=s,o.fillRect(0,0,i,i),e(c)):setTimeout(t,100)}()}}))},Be=function(e){var t=e.design,a=e.layer,n=e.partName,r=e.overlayCanvas;return new Promise((function(e){var s=t.configData.partsObject[n].mask,i=a.source,c=t.configData.translations[i][n],o=c.x,l=c.y,u=c.scale,d=c.rotation,v=t.configData.canvasSize,b=document.createElement("canvas");b.width=v,b.height=v;var j=b.getContext("2d"),h=new Image;h.src="/api/assets/designimages/".concat(s),h.onload=function(){!function t(){null!==j&&"object"===typeof b?(j.drawImage(h,0,0,v,v),j.globalCompositeOperation="source-in",j.translate(v*o,v*l),j.rotate(d),j.drawImage(r,0,0,v*u,v*u),e(b)):setTimeout(t,100)}()}}))},ze=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s,i,c,o,l;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.design,n=t.designLayers,r=t.partName,s=t.overlays,i=t.currentShoe,c=[],e.t0=X.a.keys(n);case 3:if((e.t1=e.t0()).done){e.next=44;break}if(o=e.t1.value,"color"!==n[o].type){e.next=12;break}return e.next=8,Me({design:a,layer:n[o],partName:r});case 8:l=e.sent,c.push(l),e.next=42;break;case 12:if("graphic"!==n[o].type){e.next=20;break}return e.t2=c,e.next=16,Ee({design:a,layer:n[o],partName:r,currentShoe:i});case 16:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=42;break;case 20:if("mask"!==n[o].type){e.next=28;break}return e.t4=c,e.next=24,Ae({design:a,layer:n[o],currentShoe:i});case 24:e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.next=42;break;case 28:if("overlay"!==n[o].type){e.next=42;break}if("outerOverlay"!==n[o].source){e.next=37;break}return e.t6=c,e.next=33,Be({design:a,layer:n[o],partName:r,overlayCanvas:s[0]});case 33:e.t7=e.sent,e.t6.push.call(e.t6,e.t7),e.next=42;break;case 37:return e.t8=c,e.next=40,Be({design:a,layer:n[o],partName:r,overlayCanvas:s[1]});case 40:e.t9=e.sent,e.t8.push.call(e.t8,e.t9);case 42:e.next=3;break;case 44:return e.abrupt("return",{layers:c});case 45:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.design,n=t.partName,r=t.currentShoe,e.next=3,Me({design:a,layer:{color:a.outlineData.baseColors[r]},partName:n});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(e){var t=e.design,a=e.type,n=e.overlays,r=e.currentShoe;return new Promise((function(e,s){var i={};(function(){var s=Object(q.a)(X.a.mark((function s(){var c,o,l;return X.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("partsCanvasObject"!==a){s.next=11;break}s.t0=X.a.keys(t.outlineData.parts);case 2:if((s.t1=s.t0()).done){s.next=9;break}return c=s.t1.value,s.next=6,ze({design:t,designLayers:t.outlineData.parts[c][r],partName:c,overlays:n,currentShoe:r});case 6:i[c]=s.sent,s.next=2;break;case 9:s.next=31;break;case 11:if("overlaysCanvasObject"!==a){s.next=22;break}s.t2=X.a.keys(t.outlineData.overlays);case 13:if((s.t3=s.t2()).done){s.next=20;break}return o=s.t3.value,s.next=17,ze({design:t,designLayers:t.outlineData.overlays[o][r],partName:o,currentShoe:r});case 17:i[o]=s.sent,s.next=13;break;case 20:s.next=31;break;case 22:if("baseColorCanvasObject"!==a){s.next=31;break}s.t4=X.a.keys(t.outlineData.parts);case 24:if((s.t5=s.t4()).done){s.next=31;break}return l=s.t5.value,s.next=28,Ue({design:t,partName:l,currentShoe:r});case 28:i[l]=s.sent,s.next=24;break;case 31:e(i);case 32:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}})()()}))},_e=function(e){var t=e.design,a=e.overlayCanvasObject,n=e.overlayCanvas,r=e.partName,s=e.graphicVisualCanvas,i=t.configData.canvasSize,c=n.getContext("2d"),o=s.getContext("2d");for(var l in o.clearRect(0,0,i,i),c.clearRect(0,0,i,i),a[r].layers){var u=a[r].layers[l];c.drawImage(u,0,0,i,i),o.drawImage(u,0,0,i,i)}},Fe=function(e){var t=e.design,a=e.graphicVisualCanvas,n=e.partName,r=e.canvasObject,s=e.baseColorCanvasObject,i=t.configData.canvasSize,c=a.getContext("2d");if(c.clearRect(0,0,i,i),s[n]){var o=s[n];c.drawImage(o,0,0,i,i)}for(var l in r[n].layers){var u=r[n].layers[l];c.drawImage(u,0,0,i,i)}},We=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s,i,c,o,l,u,d,v;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.partName,n=t.layerIndex,r=t.layerObject,s=t.canvasObject,i=t.textureCanvas,c=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.baseColorCanvasObject,d=t.currentShoe,"color"!==r.type){e.next=7;break}return e.next=4,Me({design:l,layer:r,partName:a});case 4:v=e.sent,e.next=16;break;case 7:if("graphic"!==r.type){e.next=13;break}return e.next=10,Ee({design:l,layer:r,partName:a,currentShoe:d});case 10:v=e.sent,e.next=16;break;case 13:return e.next=15,Ae({design:l,layer:r,currentShoe:d});case 15:v=e.sent;case 16:s[a].layers[n]=v,Xe({textureCanvas:i,canvasObjectPart:s[a],partName:a,texture:c,graphicVisualCanvas:o,design:l,baseColorCanvasObject:u});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s,i,c,o,l,u,d,v,b;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.canvasObject,n=t.graphicVisualCanvas,r=t.layerObject,s=t.partName,i=t.texture,c=t.textureCanvas,o=t.design,l=t.baseColorCanvasObject,u=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Me({design:o,layer:r,partName:s});case 4:d=e.sent,a[s].layers.push(d),e.next=19;break;case 8:if("graphic"!==r.type){e.next=15;break}return e.next=11,Ee({design:o,layer:r,partName:s,currentShoe:u});case 11:v=e.sent,a[s].layers.push(v),e.next=19;break;case 15:return e.next=17,Ae({design:o,layer:r,currentShoe:u});case 17:b=e.sent,a[s].layers.push(b);case 19:Xe({textureCanvas:c,canvasObjectPart:a[s],partName:s,texture:i,graphicVisualCanvas:n,design:o,baseColorCanvasObject:l});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(e){var t=e.canvasObject,a=e.partName,n=e.layerIndex,r=e.textureCanvas,s=e.texture,i=e.graphicVisualCanvas,c=e.design,o=e.baseColorCanvasObject;t[a].layers.splice(n,1),Xe({textureCanvas:r,canvasObjectPart:t[a],partName:a,texture:s,graphicVisualCanvas:i,design:c,baseColorCanvasObject:o})},Je=function(e){var t=e.canvasObject,a=e.partName,n=e.layerIndex,r=e.direction,s=e.textureCanvas,i=e.texture,c=e.graphicVisualCanvas,o=e.design,l=e.baseColorCanvasObject,u=t[a].layers,d=u[n];u[n]=u[n+r],u[n+r]=d,t[a].layers=u,Xe({textureCanvas:s,canvasObjectPart:t[a],partName:a,texture:i,graphicVisualCanvas:c,design:o,baseColorCanvasObject:l})},Xe=function(e){var t=e.textureCanvas,a=e.canvasObjectPart,n=e.partName,r=e.texture,s=e.graphicVisualCanvas,i=e.design,c=e.baseColorCanvasObject,o=t.getContext("2d"),l=s.getContext("2d");l.clearRect(0,0,i.configData.canvasSize,i.configData.canvasSize);var u=i.configData.partsObject[n],d=u.x,v=u.y,b=u.width,j=u.height,h=i.configData.divider;for(var g in o.drawImage(c[n],d/h,v/h,b/h,j/h),l.drawImage(c[n],0,0,i.configData.canvasSize,i.configData.canvasSize),a.layers){var p=a.layers[g];o.drawImage(p,d/h,v/h,b/h,j/h),l.drawImage(p,0,0,i.configData.canvasSize,i.configData.canvasSize)}r.needsUpdate=!0},qe=function(e){var t=e.changeObject,a=e.design,n=e.setDesign,r=e.texture,s=e.textureCanvas,i=e.graphicVisualCanvas,c=e.canvasObject,o=e.overlayCanvas,l=e.overlayCanvasObject,u=e.baseColorCanvasObject,d=e.currentShoe,v=t.type,b=t.fileName,j=Object(ke.cloneDeep)(a);if("graphic-moved"===v){var h=t.partName,g=t.layerIndex,p=t.direction,f=t.distance,O=j.outlineData.overlays[h][d][g];"vert"===p?O.y+=f:"hor"===p?O.x+=f:"scale"===p?O.scale*=f:"rotate"===p?O.rotation+=f:"reset"===p&&(O.y=0,O.x=0,O.scale=1,O.rotation=0),n(j),Ze({partName:h,layerIndex:g,layerObject:O,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:i,design:a,canvasObject:c,textureCanvas:s,baseColorCanvasObject:u,currentShoe:d})}else if("color-changed"===v){var x=t.partName,m=t.layerIndex,y=t.newColor,C=j.outlineData.overlays[x][d][m];C.color=y,n(j),Ze({partName:x,layerIndex:m,layerObject:C,overlayCanvasObject:l,overlayCanvas:o,texture:r,graphicVisualCanvas:i,design:a,canvasObject:c,textureCanvas:s,baseColorCanvasObject:u,currentShoe:d})}else if("layer-added"===v){var N=t.partName,w=t.layerType;if(0===a.outlineData.overlays[N][d].length){var k=a.configData.overlayParts[N];for(var D in k){var S=k[D];j.outlineData.parts[S][d].push({type:"overlay",source:N})}}"Color"===w?j.outlineData.overlays[N][d].push({type:"color",color:"#777777"}):j.outlineData.overlays[N][d].push({type:"graphic",link:b,x:0,y:0,scale:1,rotation:0}),n(j),$e({overlayCanvasObject:l,partName:N,layerObject:j.outlineData.overlays[N][d].slice(-1)[0],overlayCanvas:o,texture:r,graphicVisualCanvas:i,design:a,textureCanvas:s,canvasObject:c,tempDesign:j,baseColorCanvasObject:u,currentShoe:d})}else if("layer-moved"===v){var V=t.partName,L=t.layerIndex,I=t.direction,P=j.outlineData.overlays[V][d],T=P[L];P[L]=P[L+I],P[L+I]=T,j.outlineData.overlays[V][d]=P,n(j),Ke({overlayCanvasObject:l,partName:V,layerIndex:L,direction:I,overlayCanvas:o,texture:r,graphicVisualCanvas:i,design:a,textureCanvas:s,canvasObject:c,baseColorCanvasObject:u,currentShoe:d})}else if("layer-deleted"===v){var R=t.partName,M=t.layerIndex;if(j.outlineData.overlays[R][d].splice(M,1),0===j.outlineData.overlays[R][d].length){var E=a.configData.overlayParts[R];for(var A in E)for(var B=E[A],z=0;z<j.outlineData.parts[B][d].length;z++){var U=z;"overlay"===j.outlineData.parts[B][d][z].type&&j.outlineData.parts[B][d][z].source===R&&(j.outlineData.parts[B][d].splice(U,1),c[B].layers.splice(U,1))}}n(j),Qe({overlayCanvasObject:l,partName:R,layerIndex:M,overlayCanvas:o,texture:r,graphicVisualCanvas:i,design:a,textureCanvas:s,canvasObject:c,tempDesign:j,baseColorCanvasObject:u,currentShoe:d})}},Ze=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s,i,c,o,l,u,d,v,b,j,h,g,p,f,O,x;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.partName,n=t.layerIndex,r=t.layerObject,s=t.overlayCanvasObject,i=t.overlayCanvas,c=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.canvasObject,d=t.textureCanvas,v=t.baseColorCanvasObject,b=t.currentShoe,j=l.configData.overlayParts[a],"color"!==r.type){e.next=8;break}return e.next=5,Me({design:l,layer:r,partName:a});case 5:h=e.sent,e.next=11;break;case 8:return e.next=10,Ee({design:l,layer:r,partName:a,currentShoe:b});case 10:h=e.sent;case 11:s[a].layers[n]=h,_e({design:l,overlayCanvasObject:s,overlayCanvas:i,partName:a,graphicVisualCanvas:o,currentShoe:b}),e.t0=X.a.keys(j);case 14:if((e.t1=e.t0()).done){e.next=32;break}g=e.t1.value,p=j[g],f=0;case 18:if(!(f<l.outlineData.parts[p][b].length)){e.next=30;break}if(O=f,"overlay"!==l.outlineData.parts[p][b][f].type){e.next=27;break}if(l.outlineData.parts[p][b][f].source!==a){e.next=27;break}return e.next=24,Be({design:l,layer:l.outlineData.parts[p][b][f],partName:p,overlayCanvas:i});case 24:x=e.sent,u[p].layers[O]=x,et({textureCanvas:d,canvasObjectPart:u[p],partName:p,design:l,baseColorCanvasObject:v});case 27:f++,e.next=18;break;case 30:e.next=14;break;case 32:c.needsUpdate=!0;case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s,i,c,o,l,u,d,v,b,j,h,g,p,f,O,x,m;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.overlayCanvasObject,n=t.partName,r=t.layerObject,s=t.overlayCanvas,i=t.texture,c=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,v=t.baseColorCanvasObject,b=t.currentShoe,"color"!==r.type){e.next=8;break}return e.next=4,Me({design:o,layer:r,partName:n});case 4:j=e.sent,a[n].layers.push(j),e.next=13;break;case 8:if("graphic"!==r.type){e.next=13;break}return e.next=11,Ee({design:o,layer:r,partName:n,currentShoe:b});case 11:h=e.sent,a[n].layers.push(h);case 13:_e({design:o,overlayCanvasObject:a,overlayCanvas:s,partName:n,graphicVisualCanvas:c,currentShoe:b}),g=o.configData.overlayParts[n],e.t0=X.a.keys(g);case 16:if((e.t1=e.t0()).done){e.next=34;break}p=e.t1.value,f=g[p],O=0;case 20:if(!(O<d.outlineData.parts[f][b].length)){e.next=32;break}if(x=O,"overlay"!==d.outlineData.parts[f][b][O].type){e.next=29;break}if(d.outlineData.parts[f][b][O].source!==n){e.next=29;break}return e.next=26,Be({design:o,layer:d.outlineData.parts[f][b][O],partName:f,overlayCanvas:s});case 26:m=e.sent,u[f].layers[x]=m,et({textureCanvas:l,canvasObjectPart:u[f],partName:f,design:o,baseColorCanvasObject:v});case 29:O++,e.next=20;break;case 32:e.next=16;break;case 34:i.needsUpdate=!0;case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s,i,c,o,l,u,d,v,b,j,h,g,p,f,O,x,m;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.overlayCanvasObject,n=t.partName,r=t.layerIndex,s=t.direction,i=t.overlayCanvas,c=t.texture,o=t.graphicVisualCanvas,l=t.design,u=t.textureCanvas,d=t.canvasObject,v=t.baseColorCanvasObject,b=t.currentShoe,j=a[n].layers,h=j[r],j[r]=j[r+s],j[r+s]=h,a[n].layers=j,_e({design:l,overlayCanvasObject:a,overlayCanvas:i,partName:n,graphicVisualCanvas:o,currentShoe:b}),g=l.configData.overlayParts[n],e.t0=X.a.keys(g);case 9:if((e.t1=e.t0()).done){e.next=27;break}p=e.t1.value,f=g[p],O=0;case 13:if(!(O<l.outlineData.parts[f][b].length)){e.next=25;break}if(x=O,"overlay"!==l.outlineData.parts[f][b][O].type){e.next=22;break}if(l.outlineData.parts[f][b][O].source!==n){e.next=22;break}return e.next=19,Be({design:l,layer:l.outlineData.parts[f][b][O],partName:f,overlayCanvas:i});case 19:m=e.sent,d[f].layers[x]=m,et({textureCanvas:u,canvasObjectPart:d[f],partName:f,design:l,baseColorCanvasObject:v});case 22:O++,e.next=13;break;case 25:e.next=9;break;case 27:c.needsUpdate=!0;case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s,i,c,o,l,u,d,v,b,j,h,g,p,f,O;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.overlayCanvasObject,n=t.partName,r=t.layerIndex,s=t.overlayCanvas,i=t.texture,c=t.graphicVisualCanvas,o=t.design,l=t.textureCanvas,u=t.canvasObject,d=t.tempDesign,v=t.baseColorCanvasObject,b=t.currentShoe,a[n].layers.splice(r,1),_e({design:o,overlayCanvasObject:a,overlayCanvas:s,partName:n,graphicVisualCanvas:c,currentShoe:b}),j=o.configData.overlayParts[n],e.t0=X.a.keys(j);case 5:if((e.t1=e.t0()).done){e.next=22;break}h=e.t1.value,g=j[h],p=0;case 9:if(!(p<d.outlineData.parts[g][b].length)){e.next=19;break}if(f=p,"overlay"!==d.outlineData.parts[g][b][p].type||d.outlineData.parts[g][b][p].source!==n){e.next=16;break}return e.next=14,Be({design:o,layer:o.outlineData.parts[g][b][p],partName:g,overlayCanvas:s});case 14:O=e.sent,u[g].layers[f]=O;case 16:p++,e.next=9;break;case 19:et({textureCanvas:l,canvasObjectPart:u[g],partName:g,design:o,baseColorCanvasObject:v}),e.next=5;break;case 22:i.needsUpdate=!0;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(e){var t=e.textureCanvas,a=e.canvasObjectPart,n=e.partName,r=e.design,s=e.baseColorCanvasObject,i=t.getContext("2d"),c=r.configData.partsObject[n],o=c.x,l=c.y,u=c.width,d=c.height,v=r.configData.divider;for(var b in i.drawImage(s[n],o/v,l/v,u/v,d/v),a.layers){var j=a.layers[b];i.drawImage(j,o/v,l/v,u/v,d/v)}},tt=function(e){var t=e.design,a=e.canvasObject,n=e.baseColorCanvasObject;return new Promise((function(e,r){var s=document.createElement("canvas");s.width=t.configData.canvasSize,s.height=t.configData.canvasSize;var i=s.getContext("2d");!function r(){if("undefined"!==typeof i){for(var c in a){var o=t.configData.partsObject[c],l=o.x,u=o.y,d=o.width,v=o.height,b=t.configData.divider;for(var j in i.drawImage(n[c],l/b,u/b,d/b,v/b),a[c].layers){var h=a[c].layers[j];i.drawImage(h,l/b,u/b,d/b,v/b)}}e(s)}else setTimeout(r,100)}()}))};var at=function(e){var t=e.userData,a=e.designSpec,r=e.graphicVisualCanvas,s=e.rightInnerOverlayCanvas,i=e.rightOuterOverlayCanvas,c=e.rightTexture,o=e.rightTextureCanvas,d=e.leftInnerOverlayCanvas,v=e.leftOuterOverlayCanvas,b=e.leftTexture,j=e.leftTextureCanvas,h=e.redMapCanvas,g=Object(n.useState)(a),p=Object(l.a)(g,2),f=p[0],O=p[1],x=Object(n.useState)(!1),m=Object(l.a)(x,2),y=m[0],C=m[1],N=Object(n.useState)(0),w=Object(l.a)(N,2),k=w[0],D=w[1],S=Object(n.useState)("right"),V=Object(l.a)(S,2),L=V[0],I=V[1],P=Object(n.useState)(-1),T=Object(l.a)(P,2),R=T[0],M=T[1],E=Object(n.useState)({right:!0,left:!0}),A=Object(l.a)(E,2),B=A[0],z=A[1],U=Object(n.useState)("DesignPreview"),G=Object(l.a)(U,2),_=G[0],F=G[1],W=Object(n.useState)("LayerOverview"),Y=Object(l.a)(W,2),H=Y[0],J=Y[1],Z=Object(n.useRef)(),$=Object(n.useRef)(),K=Object(n.useRef)(),Q=Object(n.useRef)(),ee=Object(n.useRef)(),te=Object(n.useRef)(),ne=Object(n.useState)(!0),re=Object(l.a)(ne,2),se=re[0],ie=re[1],ce=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge({design:t,type:"baseColorCanvasObject",currentShoe:"right"});case 2:return Z.current=e.sent,e.next=5,Ge({design:t,type:"baseColorCanvasObject",currentShoe:"left"});case 5:return Q.current=e.sent,e.next=8,tt({design:f,canvasObject:$.current,baseColorCanvasObject:Z.current});case 8:return a=e.sent,e.next=11,tt({design:f,canvasObject:ee.current,baseColorCanvasObject:Q.current});case 11:n=e.sent,o.getContext("2d").drawImage(a,0,0),c.needsUpdate=!0,j.getContext("2d").drawImage(n,0,0),b.needsUpdate=!0;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){$.current&&ee.current||Le({setTexturesLoaded:C,design:f,graphicVisualCanvas:r,rightBaseColorCanvasObjectRef:Z,rightInnerOverlayCanvas:s,rightOuterOverlayCanvas:i,rightTexture:c,rightTextureCanvas:o,rightCanvasObjectRef:$,rightOverlaysCanvasObjectRef:K,leftBaseColorCanvasObjectRef:Q,leftInnerOverlayCanvas:d,leftOuterOverlayCanvas:v,leftTexture:b,leftTextureCanvas:j,leftCanvasObjectRef:ee,leftOverlaysCanvasObjectRef:te})}),[f,r,s,i,c,o,d,v,b,j]),f?Object(u.jsxs)("div",{className:"designer-container",children:[Object(u.jsx)(ae,{design:f,setView:F,setLayersView:J,rightTexture:c,leftTexture:b,texturesLoaded:y,setCurrentPart:D,setCurrentShoe:I,setCurrentLayer:M,shoeVisibility:B,redMapCanvas:h,cameraReset:se,setCameraReset:ie}),Object(u.jsx)(Ve,{design:f,setDesign:O,view:_,setView:F,currentLayer:R,setCurrentLayer:M,layersView:H,setLayersView:J,graphicVisualCanvas:r,handleUpdateGraphicVisualCanvas:function(e){Fe("outerOverlay"===e||"innerOverlay"===e?"right"===L?{design:f,graphicVisualCanvas:r,partName:e,canvasObject:K.current,baseColorCanvasObject:Z.current,currentShoe:L}:{design:f,graphicVisualCanvas:r,partName:e,canvasObject:te.current,baseColorCanvasObject:Q.current,currentShoe:L}:"right"===L?{design:f,graphicVisualCanvas:r,partName:e,canvasObject:$.current,baseColorCanvasObject:Z.current,currentShoe:L}:{design:f,graphicVisualCanvas:r,partName:e,canvasObject:ee.current,baseColorCanvasObject:Q.current,currentShoe:L})},handleChangeManager:function(e){var t=e.partName;"outerOverlay"===t?qe({changeObject:e,design:f,setDesign:O,texture:"right"===L?c:b,textureCanvas:"right"===L?o:j,graphicVisualCanvas:r,canvasObject:"right"===L?$.current:ee.current,overlayCanvas:"right"===L?i:v,overlayCanvasObject:"right"===L?K.current:te.current,baseColorCanvasObject:"right"===L?Z.current:Q.current,currentShoe:L}):"innerOverlay"===t?qe({changeObject:e,design:f,setDesign:O,texture:"right"===L?c:b,textureCanvas:"right"===L?o:j,graphicVisualCanvas:r,canvasObject:"right"===L?$.current:ee.current,overlayCanvas:"right"===L?s:d,overlayCanvasObject:"right"===L?K.current:te.current,baseColorCanvasObject:"right"===L?Z.current:Q.current,currentShoe:L}):function(e){var t=e.changeObject,a=e.design,n=e.setDesign,r=e.texture,s=e.textureCanvas,i=e.graphicVisualCanvas,c=e.canvasObject,o=e.baseColorCanvasObject,l=e.currentShoe,u=t.type,d=t.fileName,v=Object(ke.cloneDeep)(a);if("graphic-moved"===u){var b=t.partName,j=t.layerIndex,h=t.direction,g=t.distance,p=v.outlineData.parts[b][l][j];"vert"===h?p.y+=g:"hor"===h?p.x+=g:"scale"===h?p.scale*=g:"rotate"===h?p.rotation+=g:"reset"===h&&(p.y=0,p.x=0,p.scale=1,p.rotation=0),n(v),We({partName:b,layerIndex:j,layerObject:p,canvasObject:c,textureCanvas:s,texture:r,graphicVisualCanvas:i,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("color-changed"===u){var f,O=t.partName,x=t.layerIndex,m=t.newColor;(f="outerOverlay"===O||"innerOverlay"===O?v.outlineData.overlays[O].layers[x]:v.outlineData.parts[O][l][x]).color=m,n(v),We({partName:O,layerIndex:x,layerObject:f,canvasObject:c,textureCanvas:s,texture:r,graphicVisualCanvas:i,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("layer-added"===u){var y=t.partName,C=t.layerType;if("Color"===C)v.outlineData.parts[y][l].push({type:"color",color:"#777777"});else if("Graphic"===C)v.outlineData.parts[y][l].push({type:"graphic",link:d,x:0,y:0,scale:1,rotation:0});else{var N=t.maskLink;v.outlineData.parts[y][l].push({type:"mask",link:N,color:"#000000"})}n(v);var w=v.outlineData.parts[y][l].slice(-1)[0];Ye({canvasObject:c,graphicVisualCanvas:i,layerObject:w,partName:y,texture:r,textureCanvas:s,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("layer-moved"===u){var k=t.partName,D=t.layerIndex,S=t.direction,V=v.outlineData.parts[k][l],L=V[D];V[D]=V[D+S],V[D+S]=L,v.outlineData.parts[k].layers=V,n(v),Je({canvasObject:c,partName:k,layerIndex:D,direction:S,textureCanvas:s,texture:r,graphicVisualCanvas:i,design:a,baseColorCanvasObject:o,currentShoe:l})}else if("layer-deleted"===u){var I=t.partName,P=t.layerIndex;v.outlineData.parts[I][l].splice(P,1),n(v),He({canvasObject:c,partName:I,layerIndex:P,textureCanvas:s,texture:r,graphicVisualCanvas:i,design:a,baseColorCanvasObject:o,currentShoe:l})}}({changeObject:e,design:f,setDesign:O,texture:"right"===L?c:b,textureCanvas:"right"===L?o:j,graphicVisualCanvas:r,canvasObject:"right"===L?$.current:ee.current,baseColorCanvasObject:"right"===L?Z.current:Q.current,currentShoe:L})},handleUpdateBaseColor:ce,userData:t,currentPart:k,setCurrentPart:D,currentShoe:L,setCurrentShoe:I,shoeVisibility:B,setShoeVisibility:z,setCameraReset:ie})]}):Object(u.jsx)("div",{children:"hi"})};var nt,rt=function(){var e=Object(o.g)().id,t=Object(n.useContext)(b.context),a=Object(n.useState)(null),r=Object(l.a)(a,2),s=r[0],i=r[1],c=Object(n.useState)(null),d=Object(l.a)(c,2),v=d[0],j=d[1],h=Object(n.useState)(null),g=Object(l.a)(h,2),p=g[0],f=g[1],O=Object(n.useState)(null),x=Object(l.a)(O,2),m=x[0],y=x[1],C=Object(n.useState)(null),N=Object(l.a)(C,2),w=N[0],k=N[1],D=Object(n.useState)(null),S=Object(l.a)(D,2),V=S[0],L=S[1],P=Object(n.useState)(null),T=Object(l.a)(P,2),R=T[0],M=T[1],E=Object(n.useState)(null),A=Object(l.a)(E,2),B=A[0],z=A[1],U=Object(n.useState)(null),G=Object(l.a)(U,2),_=G[0],F=G[1],W=Object(n.useState)(null),Y=Object(l.a)(W,2),H=Y[0],J=Y[1],Z=Object(n.useState)(null),$=Object(l.a)(Z,2),K=$[0],Q=$[1],ee=function(){var e=Object(q.a)(X.a.mark((function e(t){var a,n,r,s,c,o,l;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(t),j(Re({design:t})),e.next=4,Pe({design:t});case 4:return a=e.sent,f(a),e.next=8,Pe({design:t});case 8:return n=e.sent,y(n),e.next=12,Pe({design:t});case 12:return r=e.sent,k(r),e.next=16,Pe({design:t});case 16:return s=e.sent,M(s),e.next=20,Pe({design:t});case 20:return c=e.sent,z(c),e.next=24,Pe({design:t});case 24:return o=e.sent,F(o),e.next=28,Te({design:t});case 28:l=e.sent,Q(l);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){e?I("/api/outlines/".concat(e),"GET").then((function(e){return e.json()})).then((function(e){ee(e)})):I("/api/outlines/newdesign","GET").then((function(e){return e.json()})).then((function(e){ee(e)}))}),[e]),Object(n.useEffect)((function(){w&&_&&(L(Ie(w)),J(Ie(_)))}),[w,_]),s&&v&&p&&m&&w&&V&&R&&B&&_&&H&&K?Object(u.jsx)("div",{className:"designer-root-container",children:Object(u.jsx)(at,{userData:t,designSpec:s,graphicVisualCanvas:v,rightInnerOverlayCanvas:p,rightOuterOverlayCanvas:m,rightTexture:V,rightTextureCanvas:w,leftInnerOverlayCanvas:R,leftOuterOverlayCanvas:B,leftTexture:H,leftTextureCanvas:_,redMapCanvas:K})}):Object(u.jsx)("div",{})},st=R.a.div(nt||(nt=Object(T.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  justify-content: center;\n"])));var it,ct,ot=function(){return Object(u.jsxs)(st,{children:[Object(u.jsx)(W,{google:!0,onClick:function(){window.open("http://solecomposer.com/auth/google","_self")},children:"Login With Google"}),Object(u.jsx)(c.b,{to:"/",children:Object(u.jsx)(W,{children:"Back"})})]})},lt=R.a.div(it||(it=Object(T.a)(["\n  max-width: 400px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n"]))),ut=R.a.p(ct||(ct=Object(T.a)(["\n  padding: 0;\n  text-align: center;\n  margin: 0;\n  margin-top: 15px;\n"])));var dt=function(){var e=Object(n.useContext)(b.context);return Object(u.jsxs)(lt,{children:[Object(u.jsx)(ut,{children:e.firstName}),Object(u.jsx)(ut,{children:e.email}),Object(u.jsx)(W,{onClick:function(){window.open("http://solecomposer.com/auth/logout","_self")},children:"Log Out"}),Object(u.jsx)(c.b,{to:"/",children:Object(u.jsx)(W,{children:"Back"})})]})};a(353);var vt,bt=function(){return Object(u.jsxs)("div",{className:"no-page-container",children:[Object(u.jsx)("p",{className:"basic-paragraph",children:"404 - PAGE NOT FOUND"}),Object(u.jsx)(c.b,{to:"/",children:Object(u.jsx)("div",{className:"basic-button",children:Object(u.jsx)("button",{children:"Home"})})})]})},jt=R.a.div(vt||(vt=Object(T.a)([""])));var ht=function(){return Object(u.jsx)(jt,{children:Object(u.jsx)(c.a,{children:Object(u.jsx)(b,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:H}),Object(u.jsx)(o.a,{exact:!0,path:"/login",component:ot}),Object(u.jsx)(o.a,{exact:!0,path:"/profile",component:dt}),Object(u.jsx)(o.a,{exact:!0,path:"/designer",component:rt}),Object(u.jsx)(o.a,{exact:!0,path:"/designer/:id",component:rt}),Object(u.jsx)(o.a,{path:"*",component:bt})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(ht,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[354,1,2]]]);
//# sourceMappingURL=main.9cdb58ce.chunk.js.map